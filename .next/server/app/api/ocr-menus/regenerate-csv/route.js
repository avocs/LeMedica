"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ocr-menus/regenerate-csv/route";
exports.ids = ["app/api/ocr-menus/regenerate-csv/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute&page=%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute&page=%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_User_Documents_side_quest_LeMedica_src_app_api_ocr_menus_regenerate_csv_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ocr-menus/regenerate-csv/route.ts */ \"(rsc)/./src/app/api/ocr-menus/regenerate-csv/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ocr-menus/regenerate-csv/route\",\n        pathname: \"/api/ocr-menus/regenerate-csv\",\n        filename: \"route\",\n        bundlePath: \"app/api/ocr-menus/regenerate-csv/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\User\\\\Documents\\\\side quest\\\\LeMedica\\\\src\\\\app\\\\api\\\\ocr-menus\\\\regenerate-csv\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_User_Documents_side_quest_LeMedica_src_app_api_ocr_menus_regenerate_csv_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ocr-menus/regenerate-csv/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvY3ItbWVudXMlMkZyZWdlbmVyYXRlLWNzdiUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGb2NyLW1lbnVzJTJGcmVnZW5lcmF0ZS1jc3YlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZvY3ItbWVudXMlMkZyZWdlbmVyYXRlLWNzdiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNVc2VyJTVDRG9jdW1lbnRzJTVDc2lkZSUyMHF1ZXN0JTVDTGVNZWRpY2ElNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q1VzZXIlNUNEb2N1bWVudHMlNUNzaWRlJTIwcXVlc3QlNUNMZU1lZGljYSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDb0Q7QUFDakk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZW1lZGljYS1jbGluaWMtb2NyLz8yMzQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFVzZXJcXFxcRG9jdW1lbnRzXFxcXHNpZGUgcXVlc3RcXFxcTGVNZWRpY2FcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb2NyLW1lbnVzXFxcXHJlZ2VuZXJhdGUtY3N2XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9vY3ItbWVudXMvcmVnZW5lcmF0ZS1jc3Yvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vY3ItbWVudXMvcmVnZW5lcmF0ZS1jc3ZcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL29jci1tZW51cy9yZWdlbmVyYXRlLWNzdi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFVzZXJcXFxcRG9jdW1lbnRzXFxcXHNpZGUgcXVlc3RcXFxcTGVNZWRpY2FcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb2NyLW1lbnVzXFxcXHJlZ2VuZXJhdGUtY3N2XFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9vY3ItbWVudXMvcmVnZW5lcmF0ZS1jc3Yvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute&page=%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/ocr-menus/regenerate-csv/route.ts":
/*!*******************************************************!*\
  !*** ./src/app/api/ocr-menus/regenerate-csv/route.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _services_normalizer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../services/normalizer */ \"(rsc)/./src/services/normalizer.ts\");\n/* harmony import */ var _services_csvGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../services/csvGenerator */ \"(rsc)/./src/services/csvGenerator.ts\");\n\n\n\n/**\r\n * POST /api/ocr-menus/regenerate-csv\r\n * ----------------------------------\r\n * Accepts a JSON payload { packages: PackageRow[], forwardToImporter?: boolean }\r\n * and responds with a CSV file (text/csv) that mirrors the bulk import template.\r\n */ async function POST(req) {\n    try {\n        const body = await req.json();\n        if (!Array.isArray(body?.packages)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                message: \"packages array is required\"\n            }, {\n                status: 400\n            });\n        }\n        const normalizedPackages = body.packages.map((pkg)=>(0,_services_normalizer__WEBPACK_IMPORTED_MODULE_1__.normalizePackageRow)(pkg));\n        const csvContent = (0,_services_csvGenerator__WEBPACK_IMPORTED_MODULE_2__.generateBulkCsv)(normalizedPackages);\n        let importerStatus;\n        if (body.forwardToImporter) {\n            const importerResult = await forwardCsvToImporter(csvContent, {\n                confirmAutoCreate: body.confirmAutoCreate,\n                clearExisting: body.clearExisting\n            });\n            importerStatus = importerResult;\n        }\n        const fileName = body.fileName || \"clinic-menu-packages.csv\";\n        const headers = new Headers({\n            \"Content-Type\": \"text/csv\",\n            \"Content-Disposition\": `attachment; filename=\"${fileName}\"`\n        });\n        if (importerStatus) {\n            headers.set(\"x-importer-status\", importerStatus);\n        }\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(csvContent, {\n            status: 200,\n            headers\n        });\n    } catch (error) {\n        console.error(\"Failed to regenerate CSV:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: \"Failed to regenerate CSV\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function forwardCsvToImporter(csvContent, options) {\n    const baseUrl = process.env.BULK_IMPORT_ENDPOINT || (process.env.APP_BASE_URL ? `${process.env.APP_BASE_URL}/api/admin/bulk-import-packages` : \"http://localhost:3000/api/admin/bulk-import-packages\");\n    const importerUrl = baseUrl;\n    try {\n        const formData = new FormData();\n        formData.append(\"file\", new Blob([\n            csvContent\n        ], {\n            type: \"text/csv\"\n        }), \"clinic-menu-import.csv\");\n        if (options.confirmAutoCreate !== undefined) {\n            formData.append(\"confirmAutoCreate\", String(options.confirmAutoCreate));\n        }\n        if (options.clearExisting !== undefined) {\n            formData.append(\"clearExisting\", String(options.clearExisting));\n        }\n        const response = await fetch(importerUrl, {\n            method: \"POST\",\n            body: formData\n        });\n        if (!response.ok) {\n            const details = await safeJson(response);\n            return `failed:${details?.message || response.statusText}`;\n        }\n        return \"success\";\n    } catch (error) {\n        console.error(\"Failed to forward CSV to importer:\", error);\n        return \"failed:network_error\";\n    }\n}\nasync function safeJson(response) {\n    try {\n        return await response.json();\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9vY3ItbWVudXMvcmVnZW5lcmF0ZS1jc3Yvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUVjO0FBQ0Y7QUFFcEU7Ozs7O0NBS0MsR0FDTSxlQUFlRyxLQUFLQyxHQUFnQjtJQUN6QyxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNRCxJQUFJRSxJQUFJO1FBQzNCLElBQUksQ0FBQ0MsTUFBTUMsT0FBTyxDQUFDSCxNQUFNSSxXQUFXO1lBQ2xDLE9BQU9ULHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO2dCQUFFSSxTQUFTO2dCQUFPQyxTQUFTO1lBQTZCLEdBQ3hEO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxxQkFBcUIsS0FBTUosUUFBUSxDQUFrQkssR0FBRyxDQUFDLENBQUNDLE1BQzlEZCx5RUFBbUJBLENBQUNjO1FBRXRCLE1BQU1DLGFBQWFkLHVFQUFlQSxDQUFDVztRQUVuQyxJQUFJSTtRQUNKLElBQUlaLEtBQUthLGlCQUFpQixFQUFFO1lBQzFCLE1BQU1DLGlCQUFpQixNQUFNQyxxQkFBcUJKLFlBQVk7Z0JBQzVESyxtQkFBbUJoQixLQUFLZ0IsaUJBQWlCO2dCQUN6Q0MsZUFBZWpCLEtBQUtpQixhQUFhO1lBQ25DO1lBQ0FMLGlCQUFpQkU7UUFDbkI7UUFFQSxNQUFNSSxXQUFXbEIsS0FBS2tCLFFBQVEsSUFBSTtRQUNsQyxNQUFNQyxVQUFVLElBQUlDLFFBQVE7WUFDMUIsZ0JBQWdCO1lBQ2hCLHVCQUF1QixDQUFDLHNCQUFzQixFQUFFRixTQUFTLENBQUMsQ0FBQztRQUM3RDtRQUNBLElBQUlOLGdCQUFnQjtZQUNsQk8sUUFBUUUsR0FBRyxDQUFDLHFCQUFxQlQ7UUFDbkM7UUFFQSxPQUFPLElBQUlqQixxREFBWUEsQ0FBQ2dCLFlBQVk7WUFBRUosUUFBUTtZQUFLWTtRQUFRO0lBQzdELEVBQUUsT0FBT0csT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxPQUFPM0IscURBQVlBLENBQUNNLElBQUksQ0FDdEI7WUFBRUksU0FBUztZQUFPQyxTQUFTO1FBQTJCLEdBQ3REO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUEsZUFBZVEscUJBQ2JKLFVBQWtCLEVBQ2xCYSxPQUFpRTtJQUVqRSxNQUFNQyxVQUNKQyxRQUFRQyxHQUFHLENBQUNDLG9CQUFvQixJQUMvQkYsQ0FBQUEsUUFBUUMsR0FBRyxDQUFDRSxZQUFZLEdBQ3JCLENBQUMsRUFBRUgsUUFBUUMsR0FBRyxDQUFDRSxZQUFZLENBQUMsK0JBQStCLENBQUMsR0FDNUQsc0RBQXFEO0lBQzNELE1BQU1DLGNBQWNMO0lBRXBCLElBQUk7UUFDRixNQUFNTSxXQUFXLElBQUlDO1FBQ3JCRCxTQUFTRSxNQUFNLENBQ2IsUUFDQSxJQUFJQyxLQUFLO1lBQUN2QjtTQUFXLEVBQUU7WUFBRXdCLE1BQU07UUFBVyxJQUMxQztRQUVGLElBQUlYLFFBQVFSLGlCQUFpQixLQUFLb0IsV0FBVztZQUMzQ0wsU0FBU0UsTUFBTSxDQUFDLHFCQUFxQkksT0FBT2IsUUFBUVIsaUJBQWlCO1FBQ3ZFO1FBQ0EsSUFBSVEsUUFBUVAsYUFBYSxLQUFLbUIsV0FBVztZQUN2Q0wsU0FBU0UsTUFBTSxDQUFDLGlCQUFpQkksT0FBT2IsUUFBUVAsYUFBYTtRQUMvRDtRQUVBLE1BQU1xQixXQUFXLE1BQU1DLE1BQU1ULGFBQWE7WUFDeENVLFFBQVE7WUFDUnhDLE1BQU0rQjtRQUNSO1FBRUEsSUFBSSxDQUFDTyxTQUFTRyxFQUFFLEVBQUU7WUFDaEIsTUFBTUMsVUFBVSxNQUFNQyxTQUFTTDtZQUMvQixPQUFPLENBQUMsT0FBTyxFQUFFSSxTQUFTcEMsV0FBV2dDLFNBQVNNLFVBQVUsQ0FBQyxDQUFDO1FBQzVEO1FBRUEsT0FBTztJQUNULEVBQUUsT0FBT3RCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHNDQUFzQ0E7UUFDcEQsT0FBTztJQUNUO0FBQ0Y7QUFFQSxlQUFlcUIsU0FBU0wsUUFBa0I7SUFDeEMsSUFBSTtRQUNGLE9BQU8sTUFBTUEsU0FBU3JDLElBQUk7SUFDNUIsRUFBRSxPQUFNO1FBQ04sT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZW1lZGljYS1jbGluaWMtb2NyLy4vc3JjL2FwcC9hcGkvb2NyLW1lbnVzL3JlZ2VuZXJhdGUtY3N2L3JvdXRlLnRzP2RlZmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBQYWNrYWdlUm93IH0gZnJvbSBcIi4uLy4uLy4uLy4uL3R5cGVzL3BhY2thZ2VzXCI7XHJcbmltcG9ydCB7IG5vcm1hbGl6ZVBhY2thZ2VSb3cgfSBmcm9tIFwiLi4vLi4vLi4vLi4vc2VydmljZXMvbm9ybWFsaXplclwiO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZUJ1bGtDc3YgfSBmcm9tIFwiLi4vLi4vLi4vLi4vc2VydmljZXMvY3N2R2VuZXJhdG9yXCI7XHJcblxyXG4vKipcclxuICogUE9TVCAvYXBpL29jci1tZW51cy9yZWdlbmVyYXRlLWNzdlxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqIEFjY2VwdHMgYSBKU09OIHBheWxvYWQgeyBwYWNrYWdlczogUGFja2FnZVJvd1tdLCBmb3J3YXJkVG9JbXBvcnRlcj86IGJvb2xlYW4gfVxyXG4gKiBhbmQgcmVzcG9uZHMgd2l0aCBhIENTViBmaWxlICh0ZXh0L2NzdikgdGhhdCBtaXJyb3JzIHRoZSBidWxrIGltcG9ydCB0ZW1wbGF0ZS5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYm9keT8ucGFja2FnZXMpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcInBhY2thZ2VzIGFycmF5IGlzIHJlcXVpcmVkXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub3JtYWxpemVkUGFja2FnZXMgPSAoYm9keS5wYWNrYWdlcyBhcyBQYWNrYWdlUm93W10pLm1hcCgocGtnKSA9PlxyXG4gICAgICBub3JtYWxpemVQYWNrYWdlUm93KHBrZylcclxuICAgICk7XHJcbiAgICBjb25zdCBjc3ZDb250ZW50ID0gZ2VuZXJhdGVCdWxrQ3N2KG5vcm1hbGl6ZWRQYWNrYWdlcyk7XHJcblxyXG4gICAgbGV0IGltcG9ydGVyU3RhdHVzOiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICBpZiAoYm9keS5mb3J3YXJkVG9JbXBvcnRlcikge1xyXG4gICAgICBjb25zdCBpbXBvcnRlclJlc3VsdCA9IGF3YWl0IGZvcndhcmRDc3ZUb0ltcG9ydGVyKGNzdkNvbnRlbnQsIHtcclxuICAgICAgICBjb25maXJtQXV0b0NyZWF0ZTogYm9keS5jb25maXJtQXV0b0NyZWF0ZSxcclxuICAgICAgICBjbGVhckV4aXN0aW5nOiBib2R5LmNsZWFyRXhpc3RpbmcsXHJcbiAgICAgIH0pO1xyXG4gICAgICBpbXBvcnRlclN0YXR1cyA9IGltcG9ydGVyUmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbGVOYW1lID0gYm9keS5maWxlTmFtZSB8fCBcImNsaW5pYy1tZW51LXBhY2thZ2VzLmNzdlwiO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcclxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJ0ZXh0L2NzdlwiLFxyXG4gICAgICBcIkNvbnRlbnQtRGlzcG9zaXRpb25cIjogYGF0dGFjaG1lbnQ7IGZpbGVuYW1lPVwiJHtmaWxlTmFtZX1cImAsXHJcbiAgICB9KTtcclxuICAgIGlmIChpbXBvcnRlclN0YXR1cykge1xyXG4gICAgICBoZWFkZXJzLnNldChcIngtaW1wb3J0ZXItc3RhdHVzXCIsIGltcG9ydGVyU3RhdHVzKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShjc3ZDb250ZW50LCB7IHN0YXR1czogMjAwLCBoZWFkZXJzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHJlZ2VuZXJhdGUgQ1NWOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJlZ2VuZXJhdGUgQ1NWXCIgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZm9yd2FyZENzdlRvSW1wb3J0ZXIoXHJcbiAgY3N2Q29udGVudDogc3RyaW5nLFxyXG4gIG9wdGlvbnM6IHsgY29uZmlybUF1dG9DcmVhdGU/OiBib29sZWFuOyBjbGVhckV4aXN0aW5nPzogYm9vbGVhbiB9XHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgYmFzZVVybCA9XHJcbiAgICBwcm9jZXNzLmVudi5CVUxLX0lNUE9SVF9FTkRQT0lOVCB8fFxyXG4gICAgKHByb2Nlc3MuZW52LkFQUF9CQVNFX1VSTFxyXG4gICAgICA/IGAke3Byb2Nlc3MuZW52LkFQUF9CQVNFX1VSTH0vYXBpL2FkbWluL2J1bGstaW1wb3J0LXBhY2thZ2VzYFxyXG4gICAgICA6IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9hZG1pbi9idWxrLWltcG9ydC1wYWNrYWdlc1wiKTtcclxuICBjb25zdCBpbXBvcnRlclVybCA9IGJhc2VVcmw7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKFxyXG4gICAgICBcImZpbGVcIixcclxuICAgICAgbmV3IEJsb2IoW2NzdkNvbnRlbnRdLCB7IHR5cGU6IFwidGV4dC9jc3ZcIiB9KSxcclxuICAgICAgXCJjbGluaWMtbWVudS1pbXBvcnQuY3N2XCJcclxuICAgICk7XHJcbiAgICBpZiAob3B0aW9ucy5jb25maXJtQXV0b0NyZWF0ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChcImNvbmZpcm1BdXRvQ3JlYXRlXCIsIFN0cmluZyhvcHRpb25zLmNvbmZpcm1BdXRvQ3JlYXRlKSk7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5jbGVhckV4aXN0aW5nICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgZm9ybURhdGEuYXBwZW5kKFwiY2xlYXJFeGlzdGluZ1wiLCBTdHJpbmcob3B0aW9ucy5jbGVhckV4aXN0aW5nKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpbXBvcnRlclVybCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBib2R5OiBmb3JtRGF0YSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IHNhZmVKc29uKHJlc3BvbnNlKTtcclxuICAgICAgcmV0dXJuIGBmYWlsZWQ6JHtkZXRhaWxzPy5tZXNzYWdlIHx8IHJlc3BvbnNlLnN0YXR1c1RleHR9YDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gXCJzdWNjZXNzXCI7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZm9yd2FyZCBDU1YgdG8gaW1wb3J0ZXI6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBcImZhaWxlZDpuZXR3b3JrX2Vycm9yXCI7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzYWZlSnNvbihyZXNwb25zZTogUmVzcG9uc2UpIHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIm5vcm1hbGl6ZVBhY2thZ2VSb3ciLCJnZW5lcmF0ZUJ1bGtDc3YiLCJQT1NUIiwicmVxIiwiYm9keSIsImpzb24iLCJBcnJheSIsImlzQXJyYXkiLCJwYWNrYWdlcyIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwic3RhdHVzIiwibm9ybWFsaXplZFBhY2thZ2VzIiwibWFwIiwicGtnIiwiY3N2Q29udGVudCIsImltcG9ydGVyU3RhdHVzIiwiZm9yd2FyZFRvSW1wb3J0ZXIiLCJpbXBvcnRlclJlc3VsdCIsImZvcndhcmRDc3ZUb0ltcG9ydGVyIiwiY29uZmlybUF1dG9DcmVhdGUiLCJjbGVhckV4aXN0aW5nIiwiZmlsZU5hbWUiLCJoZWFkZXJzIiwiSGVhZGVycyIsInNldCIsImVycm9yIiwiY29uc29sZSIsIm9wdGlvbnMiLCJiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIkJVTEtfSU1QT1JUX0VORFBPSU5UIiwiQVBQX0JBU0VfVVJMIiwiaW1wb3J0ZXJVcmwiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiQmxvYiIsInR5cGUiLCJ1bmRlZmluZWQiLCJTdHJpbmciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwib2siLCJkZXRhaWxzIiwic2FmZUpzb24iLCJzdGF0dXNUZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ocr-menus/regenerate-csv/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/matching.ts":
/*!*****************************!*\
  !*** ./src/lib/matching.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   matchHospitalName: () => (/* binding */ matchHospitalName),\n/* harmony export */   matchTreatmentName: () => (/* binding */ matchTreatmentName),\n/* harmony export */   matchingReferenceData: () => (/* binding */ matchingReferenceData)\n/* harmony export */ });\nconst HOSPITAL_NAMES = [\n    \"Bumrungrad Intl\",\n    \"Mery Plastic Surgery\",\n    \"Pruksa Clinic\",\n    \"SLC hospital\",\n    \"Panacee Medical Center\",\n    \"The Square Clinic\",\n    \"Vethjani Hospital\",\n    \"Phuket Plastic Surgery Institute\",\n    \"Wansiri Hospital\",\n    \"Prince Court\",\n    \"Raffles Medical\",\n    \"Sunway Medical Center\",\n    \"Thomson Hospital\",\n    \"China Medical University Hospital - 中國醫藥大學附設醫院\"\n];\nconst TREATMENT_NAMES = [\n    \"Health Checkup\",\n    \"Cancer Screening\",\n    \"MRI Scan\",\n    \"CT Scan\",\n    \"PET-CT Scan\",\n    \"Blood Test\",\n    \"Cardiac Screening\",\n    \"Hip & Knee Replacement\",\n    \"Spinal Surgery\",\n    \"Brain Tumor Surgery\",\n    \"Heart Valve Repair\",\n    \"Kidney Transplant\",\n    \"Liver Transplant\",\n    \"LASIK Surgery\",\n    \"Cataract Surgery\",\n    \"Glaucoma Surgery\",\n    \"Gastric Sleeve\",\n    \"Gastric Bypass\",\n    \"Endoscopic Sleeve Gastroplasty\",\n    \"Gender-Affirming Surgery\",\n    \"Pacemaker Implantation\",\n    \"Prostate Surgery\",\n    \"Vasectomy Reversal\",\n    \"Hysterectomy\",\n    \"Fibroid Removal\",\n    \"Corneal Transplant\",\n    \"Deep Brain Stimulation (DBS)\",\n    \"Epilepsy Surgery\",\n    \"Spinal Cord Surgery\",\n    \"Facial Plastic Surgery\",\n    \"Breast Augmentation\",\n    \"Rhinoplasty\",\n    \"Liposuction\",\n    \"Botox Treatment\",\n    \"Dermal Fillers\",\n    \"Hair Transplant\",\n    \"Laser Resurfacing\",\n    \"Buccal Fat Removal\",\n    \"Chin Augmentation\",\n    \"Teeth Whitening\",\n    \"Veneer\",\n    \"Dental Implants\",\n    \"Root Canal\",\n    \"IVF (In Vitro Fertilization)\",\n    \"IUI (Intrauterine Insemination)\",\n    \"Egg Freezing\",\n    \"HRT (Hormone Replacement Therapy)\",\n    \"Chemotherapy\",\n    \"Radiation Therapy\",\n    \"Immunotherapy\",\n    \"Proton Therapy\",\n    \"Detox Retreats\",\n    \"IV Therapy\",\n    \"Anti-Aging Therapy\",\n    \"Physiotherapy\",\n    \"Acupuncture\",\n    \"Ayurveda\",\n    \"Thai Massage\"\n];\nconst MIN_HOSPITAL_SCORE = 0.72;\nconst MIN_TREATMENT_SCORE = 0.7;\n/**\r\n * Normalizes a name string by removing punctuation and lowercasing.\r\n */ function normalize(value) {\n    return value.toLowerCase().replace(/[^a-z0-9]+/g, \"\").trim();\n}\n/**\r\n * Computes Levenshtein distance between two strings.\r\n */ function levenshtein(a, b) {\n    if (a === b) return 0;\n    if (!a.length) return b.length;\n    if (!b.length) return a.length;\n    const matrix = Array.from({\n        length: a.length + 1\n    }, (_, i)=>Array.from({\n            length: b.length + 1\n        }, (_, j)=>i === 0 ? j : j === 0 ? i : 0));\n    for(let i = 1; i <= a.length; i++){\n        for(let j = 1; j <= b.length; j++){\n            if (a[i - 1] === b[j - 1]) {\n                matrix[i][j] = matrix[i - 1][j - 1];\n            } else {\n                matrix[i][j] = Math.min(matrix[i - 1][j], matrix[i][j - 1], matrix[i - 1][j - 1]) + 1;\n            }\n        }\n    }\n    return matrix[a.length][b.length];\n}\n/**\r\n * Calculates a similarity score between two strings based on Levenshtein distance.\r\n */ function similarityScore(source, candidate) {\n    if (!source || !candidate) return 0;\n    const normalizedSource = normalize(source);\n    const normalizedCandidate = normalize(candidate);\n    if (!normalizedSource.length || !normalizedCandidate.length) return 0;\n    const distance = levenshtein(normalizedSource, normalizedCandidate);\n    const longest = Math.max(normalizedSource.length, normalizedCandidate.length);\n    return 1 - distance / longest;\n}\n/**\r\n * Attempts to fuzzy-match a raw hospital name string against the curated list\r\n * from BULK_CSV_UPLOAD_GUIDE.md.\r\n */ function matchHospitalName(raw) {\n    if (!raw?.trim()) {\n        return {\n            value: null,\n            score: 0\n        };\n    }\n    let bestMatch = {\n        value: null,\n        score: 0\n    };\n    for (const hospital of HOSPITAL_NAMES){\n        const score = similarityScore(raw, hospital);\n        if (score > bestMatch.score) {\n            bestMatch = {\n                value: hospital,\n                score\n            };\n        }\n    }\n    if (bestMatch.score < MIN_HOSPITAL_SCORE) {\n        return {\n            value: null,\n            score: bestMatch.score\n        };\n    }\n    return bestMatch;\n}\n/**\r\n * Attempts to fuzzy-match a raw treatment name string against\r\n * the known set of treatment names from BULK_CSV_UPLOAD_GUIDE.md.\r\n */ function matchTreatmentName(raw) {\n    if (!raw?.trim()) {\n        return {\n            value: null,\n            score: 0\n        };\n    }\n    let bestMatch = {\n        value: null,\n        score: 0\n    };\n    for (const treatment of TREATMENT_NAMES){\n        const score = similarityScore(raw, treatment);\n        if (score > bestMatch.score) {\n            bestMatch = {\n                value: treatment,\n                score\n            };\n        }\n    }\n    if (bestMatch.score < MIN_TREATMENT_SCORE) {\n        return {\n            value: null,\n            score: bestMatch.score\n        };\n    }\n    return bestMatch;\n}\nconst matchingReferenceData = {\n    hospitals: HOSPITAL_NAMES,\n    treatments: TREATMENT_NAMES\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVlyQztBQUNkLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZW1lZGljYS1jbGluaWMtb2NyLy4vc3JjL2xpYi9tYXRjaGluZy50cz8zNWYzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEhPU1BJVEFMX05BTUVTID0gW1xyXG4gIFwiQnVtcnVuZ3JhZCBJbnRsXCIsXHJcbiAgXCJNZXJ5IFBsYXN0aWMgU3VyZ2VyeVwiLFxyXG4gIFwiUHJ1a3NhIENsaW5pY1wiLFxyXG4gIFwiU0xDIGhvc3BpdGFsXCIsXHJcbiAgXCJQYW5hY2VlIE1lZGljYWwgQ2VudGVyXCIsXHJcbiAgXCJUaGUgU3F1YXJlIENsaW5pY1wiLFxyXG4gIFwiVmV0aGphbmkgSG9zcGl0YWxcIixcclxuICBcIlBodWtldCBQbGFzdGljIFN1cmdlcnkgSW5zdGl0dXRlXCIsXHJcbiAgXCJXYW5zaXJpIEhvc3BpdGFsXCIsXHJcbiAgXCJQcmluY2UgQ291cnRcIixcclxuICBcIlJhZmZsZXMgTWVkaWNhbFwiLFxyXG4gIFwiU3Vud2F5IE1lZGljYWwgQ2VudGVyXCIsXHJcbiAgXCJUaG9tc29uIEhvc3BpdGFsXCIsXHJcbiAgXCJDaGluYSBNZWRpY2FsIFVuaXZlcnNpdHkgSG9zcGl0YWwgLSDkuK3lnIvphqvol6XlpKflrbjpmYToqK3phqvpmaJcIixcclxuXTtcclxuXHJcbmNvbnN0IFRSRUFUTUVOVF9OQU1FUyA9IFtcclxuICBcIkhlYWx0aCBDaGVja3VwXCIsXHJcbiAgXCJDYW5jZXIgU2NyZWVuaW5nXCIsXHJcbiAgXCJNUkkgU2NhblwiLFxyXG4gIFwiQ1QgU2NhblwiLFxyXG4gIFwiUEVULUNUIFNjYW5cIixcclxuICBcIkJsb29kIFRlc3RcIixcclxuICBcIkNhcmRpYWMgU2NyZWVuaW5nXCIsXHJcbiAgXCJIaXAgJiBLbmVlIFJlcGxhY2VtZW50XCIsXHJcbiAgXCJTcGluYWwgU3VyZ2VyeVwiLFxyXG4gIFwiQnJhaW4gVHVtb3IgU3VyZ2VyeVwiLFxyXG4gIFwiSGVhcnQgVmFsdmUgUmVwYWlyXCIsXHJcbiAgXCJLaWRuZXkgVHJhbnNwbGFudFwiLFxyXG4gIFwiTGl2ZXIgVHJhbnNwbGFudFwiLFxyXG4gIFwiTEFTSUsgU3VyZ2VyeVwiLFxyXG4gIFwiQ2F0YXJhY3QgU3VyZ2VyeVwiLFxyXG4gIFwiR2xhdWNvbWEgU3VyZ2VyeVwiLFxyXG4gIFwiR2FzdHJpYyBTbGVldmVcIixcclxuICBcIkdhc3RyaWMgQnlwYXNzXCIsXHJcbiAgXCJFbmRvc2NvcGljIFNsZWV2ZSBHYXN0cm9wbGFzdHlcIixcclxuICBcIkdlbmRlci1BZmZpcm1pbmcgU3VyZ2VyeVwiLFxyXG4gIFwiUGFjZW1ha2VyIEltcGxhbnRhdGlvblwiLFxyXG4gIFwiUHJvc3RhdGUgU3VyZ2VyeVwiLFxyXG4gIFwiVmFzZWN0b215IFJldmVyc2FsXCIsXHJcbiAgXCJIeXN0ZXJlY3RvbXlcIixcclxuICBcIkZpYnJvaWQgUmVtb3ZhbFwiLFxyXG4gIFwiQ29ybmVhbCBUcmFuc3BsYW50XCIsXHJcbiAgXCJEZWVwIEJyYWluIFN0aW11bGF0aW9uIChEQlMpXCIsXHJcbiAgXCJFcGlsZXBzeSBTdXJnZXJ5XCIsXHJcbiAgXCJTcGluYWwgQ29yZCBTdXJnZXJ5XCIsXHJcbiAgXCJGYWNpYWwgUGxhc3RpYyBTdXJnZXJ5XCIsXHJcbiAgXCJCcmVhc3QgQXVnbWVudGF0aW9uXCIsXHJcbiAgXCJSaGlub3BsYXN0eVwiLFxyXG4gIFwiTGlwb3N1Y3Rpb25cIixcclxuICBcIkJvdG94IFRyZWF0bWVudFwiLFxyXG4gIFwiRGVybWFsIEZpbGxlcnNcIixcclxuICBcIkhhaXIgVHJhbnNwbGFudFwiLFxyXG4gIFwiTGFzZXIgUmVzdXJmYWNpbmdcIixcclxuICBcIkJ1Y2NhbCBGYXQgUmVtb3ZhbFwiLFxyXG4gIFwiQ2hpbiBBdWdtZW50YXRpb25cIixcclxuICBcIlRlZXRoIFdoaXRlbmluZ1wiLFxyXG4gIFwiVmVuZWVyXCIsXHJcbiAgXCJEZW50YWwgSW1wbGFudHNcIixcclxuICBcIlJvb3QgQ2FuYWxcIixcclxuICBcIklWRiAoSW4gVml0cm8gRmVydGlsaXphdGlvbilcIixcclxuICBcIklVSSAoSW50cmF1dGVyaW5lIEluc2VtaW5hdGlvbilcIixcclxuICBcIkVnZyBGcmVlemluZ1wiLFxyXG4gIFwiSFJUIChIb3Jtb25lIFJlcGxhY2VtZW50IFRoZXJhcHkpXCIsXHJcbiAgXCJDaGVtb3RoZXJhcHlcIixcclxuICBcIlJhZGlhdGlvbiBUaGVyYXB5XCIsXHJcbiAgXCJJbW11bm90aGVyYXB5XCIsXHJcbiAgXCJQcm90b24gVGhlcmFweVwiLFxyXG4gIFwiRGV0b3ggUmV0cmVhdHNcIixcclxuICBcIklWIFRoZXJhcHlcIixcclxuICBcIkFudGktQWdpbmcgVGhlcmFweVwiLFxyXG4gIFwiUGh5c2lvdGhlcmFweVwiLFxyXG4gIFwiQWN1cHVuY3R1cmVcIixcclxuICBcIkF5dXJ2ZWRhXCIsXHJcbiAgXCJUaGFpIE1hc3NhZ2VcIixcclxuXTtcclxuXHJcbmNvbnN0IE1JTl9IT1NQSVRBTF9TQ09SRSA9IDAuNzI7XHJcbmNvbnN0IE1JTl9UUkVBVE1FTlRfU0NPUkUgPSAwLjc7XHJcblxyXG4vKipcclxuICogTm9ybWFsaXplcyBhIG5hbWUgc3RyaW5nIGJ5IHJlbW92aW5nIHB1bmN0dWF0aW9uIGFuZCBsb3dlcmNhc2luZy5cclxuICovXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gdmFsdWVcclxuICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAucmVwbGFjZSgvW15hLXowLTldKy9nLCBcIlwiKVxyXG4gICAgLnRyaW0oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXB1dGVzIExldmVuc2h0ZWluIGRpc3RhbmNlIGJldHdlZW4gdHdvIHN0cmluZ3MuXHJcbiAqL1xyXG5mdW5jdGlvbiBsZXZlbnNodGVpbihhOiBzdHJpbmcsIGI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgaWYgKGEgPT09IGIpIHJldHVybiAwO1xyXG4gIGlmICghYS5sZW5ndGgpIHJldHVybiBiLmxlbmd0aDtcclxuICBpZiAoIWIubGVuZ3RoKSByZXR1cm4gYS5sZW5ndGg7XHJcblxyXG4gIGNvbnN0IG1hdHJpeDogbnVtYmVyW11bXSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IGEubGVuZ3RoICsgMSB9LCAoXywgaSkgPT5cclxuICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IGIubGVuZ3RoICsgMSB9LCAoXywgaikgPT4gKGkgPT09IDAgPyBqIDogaiA9PT0gMCA/IGkgOiAwKSlcclxuICApO1xyXG5cclxuICBmb3IgKGxldCBpID0gMTsgaSA8PSBhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBiLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGlmIChhW2kgLSAxXSA9PT0gYltqIC0gMV0pIHtcclxuICAgICAgICBtYXRyaXhbaV1bal0gPSBtYXRyaXhbaSAtIDFdW2ogLSAxXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtYXRyaXhbaV1bal0gPVxyXG4gICAgICAgICAgTWF0aC5taW4obWF0cml4W2kgLSAxXVtqXSwgbWF0cml4W2ldW2ogLSAxXSwgbWF0cml4W2kgLSAxXVtqIC0gMV0pICsgMTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1hdHJpeFthLmxlbmd0aF1bYi5sZW5ndGhdO1xyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyBhIHNpbWlsYXJpdHkgc2NvcmUgYmV0d2VlbiB0d28gc3RyaW5ncyBiYXNlZCBvbiBMZXZlbnNodGVpbiBkaXN0YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIHNpbWlsYXJpdHlTY29yZShzb3VyY2U6IHN0cmluZywgY2FuZGlkYXRlOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gIGlmICghc291cmNlIHx8ICFjYW5kaWRhdGUpIHJldHVybiAwO1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWRTb3VyY2UgPSBub3JtYWxpemUoc291cmNlKTtcclxuICBjb25zdCBub3JtYWxpemVkQ2FuZGlkYXRlID0gbm9ybWFsaXplKGNhbmRpZGF0ZSk7XHJcbiAgaWYgKCFub3JtYWxpemVkU291cmNlLmxlbmd0aCB8fCAhbm9ybWFsaXplZENhbmRpZGF0ZS5sZW5ndGgpIHJldHVybiAwO1xyXG4gIGNvbnN0IGRpc3RhbmNlID0gbGV2ZW5zaHRlaW4obm9ybWFsaXplZFNvdXJjZSwgbm9ybWFsaXplZENhbmRpZGF0ZSk7XHJcbiAgY29uc3QgbG9uZ2VzdCA9IE1hdGgubWF4KG5vcm1hbGl6ZWRTb3VyY2UubGVuZ3RoLCBub3JtYWxpemVkQ2FuZGlkYXRlLmxlbmd0aCk7XHJcbiAgcmV0dXJuIDEgLSBkaXN0YW5jZSAvIGxvbmdlc3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBmdXp6eS1tYXRjaCBhIHJhdyBob3NwaXRhbCBuYW1lIHN0cmluZyBhZ2FpbnN0IHRoZSBjdXJhdGVkIGxpc3RcclxuICogZnJvbSBCVUxLX0NTVl9VUExPQURfR1VJREUubWQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hIb3NwaXRhbE5hbWUocmF3OiBzdHJpbmcpOiB7IHZhbHVlOiBzdHJpbmcgfCBudWxsOyBzY29yZTogbnVtYmVyIH0ge1xyXG4gIGlmICghcmF3Py50cmltKCkpIHtcclxuICAgIHJldHVybiB7IHZhbHVlOiBudWxsLCBzY29yZTogMCB9O1xyXG4gIH1cclxuXHJcbiAgbGV0IGJlc3RNYXRjaDogeyB2YWx1ZTogc3RyaW5nIHwgbnVsbDsgc2NvcmU6IG51bWJlciB9ID0geyB2YWx1ZTogbnVsbCwgc2NvcmU6IDAgfTtcclxuXHJcbiAgZm9yIChjb25zdCBob3NwaXRhbCBvZiBIT1NQSVRBTF9OQU1FUykge1xyXG4gICAgY29uc3Qgc2NvcmUgPSBzaW1pbGFyaXR5U2NvcmUocmF3LCBob3NwaXRhbCk7XHJcbiAgICBpZiAoc2NvcmUgPiBiZXN0TWF0Y2guc2NvcmUpIHtcclxuICAgICAgYmVzdE1hdGNoID0geyB2YWx1ZTogaG9zcGl0YWwsIHNjb3JlIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoYmVzdE1hdGNoLnNjb3JlIDwgTUlOX0hPU1BJVEFMX1NDT1JFKSB7XHJcbiAgICByZXR1cm4geyB2YWx1ZTogbnVsbCwgc2NvcmU6IGJlc3RNYXRjaC5zY29yZSB9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGJlc3RNYXRjaDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIGZ1enp5LW1hdGNoIGEgcmF3IHRyZWF0bWVudCBuYW1lIHN0cmluZyBhZ2FpbnN0XHJcbiAqIHRoZSBrbm93biBzZXQgb2YgdHJlYXRtZW50IG5hbWVzIGZyb20gQlVMS19DU1ZfVVBMT0FEX0dVSURFLm1kLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoVHJlYXRtZW50TmFtZShyYXc6IHN0cmluZyk6IHsgdmFsdWU6IHN0cmluZyB8IG51bGw7IHNjb3JlOiBudW1iZXIgfSB7XHJcbiAgaWYgKCFyYXc/LnRyaW0oKSkge1xyXG4gICAgcmV0dXJuIHsgdmFsdWU6IG51bGwsIHNjb3JlOiAwIH07XHJcbiAgfVxyXG5cclxuICBsZXQgYmVzdE1hdGNoOiB7IHZhbHVlOiBzdHJpbmcgfCBudWxsOyBzY29yZTogbnVtYmVyIH0gPSB7IHZhbHVlOiBudWxsLCBzY29yZTogMCB9O1xyXG5cclxuICBmb3IgKGNvbnN0IHRyZWF0bWVudCBvZiBUUkVBVE1FTlRfTkFNRVMpIHtcclxuICAgIGNvbnN0IHNjb3JlID0gc2ltaWxhcml0eVNjb3JlKHJhdywgdHJlYXRtZW50KTtcclxuICAgIGlmIChzY29yZSA+IGJlc3RNYXRjaC5zY29yZSkge1xyXG4gICAgICBiZXN0TWF0Y2ggPSB7IHZhbHVlOiB0cmVhdG1lbnQsIHNjb3JlIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoYmVzdE1hdGNoLnNjb3JlIDwgTUlOX1RSRUFUTUVOVF9TQ09SRSkge1xyXG4gICAgcmV0dXJuIHsgdmFsdWU6IG51bGwsIHNjb3JlOiBiZXN0TWF0Y2guc2NvcmUgfTtcclxuICB9XHJcblxyXG4gIHJldHVybiBiZXN0TWF0Y2g7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtYXRjaGluZ1JlZmVyZW5jZURhdGEgPSB7XHJcbiAgaG9zcGl0YWxzOiBIT1NQSVRBTF9OQU1FUyxcclxuICB0cmVhdG1lbnRzOiBUUkVBVE1FTlRfTkFNRVMsXHJcbn07XHJcblxyXG4iXSwibmFtZXMiOlsiSE9TUElUQUxfTkFNRVMiLCJUUkVBVE1FTlRfTkFNRVMiLCJNSU5fSE9TUElUQUxfU0NPUkUiLCJNSU5fVFJFQVRNRU5UX1NDT1JFIiwibm9ybWFsaXplIiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ0cmltIiwibGV2ZW5zaHRlaW4iLCJhIiwiYiIsImxlbmd0aCIsIm1hdHJpeCIsIkFycmF5IiwiZnJvbSIsIl8iLCJpIiwiaiIsIk1hdGgiLCJtaW4iLCJzaW1pbGFyaXR5U2NvcmUiLCJzb3VyY2UiLCJjYW5kaWRhdGUiLCJub3JtYWxpemVkU291cmNlIiwibm9ybWFsaXplZENhbmRpZGF0ZSIsImRpc3RhbmNlIiwibG9uZ2VzdCIsIm1heCIsIm1hdGNoSG9zcGl0YWxOYW1lIiwicmF3Iiwic2NvcmUiLCJiZXN0TWF0Y2giLCJob3NwaXRhbCIsIm1hdGNoVHJlYXRtZW50TmFtZSIsInRyZWF0bWVudCIsIm1hdGNoaW5nUmVmZXJlbmNlRGF0YSIsImhvc3BpdGFscyIsInRyZWF0bWVudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/matching.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/csvGenerator.ts":
/*!**************************************!*\
  !*** ./src/services/csvGenerator.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CSV_HEADERS: () => (/* binding */ CSV_HEADERS),\n/* harmony export */   generateBulkCsv: () => (/* binding */ generateBulkCsv),\n/* harmony export */   toBulkCsvRow: () => (/* binding */ toBulkCsvRow)\n/* harmony export */ });\nconst CSV_HEADERS = [\n    \"title\",\n    \"description\",\n    \"details\",\n    \"hospital_name\",\n    \"treatment_name\",\n    \"Sub Treatments\",\n    \"price\",\n    \"original_price\",\n    \"currency\",\n    \"duration\",\n    \"treatment_category\",\n    \"anaesthesia\",\n    \"commission\",\n    \"featured\",\n    \"status\",\n    \"doctor_name\",\n    \"is_le_package\",\n    \"includes\",\n    \"image_file_id\",\n    \"hospital_location\",\n    \"category\",\n    \"hospital_country\",\n    \"translation_title\",\n    \"translation_description\",\n    \"translation_details\",\n    \"translation\"\n];\n/**\r\n * toBulkCsvRow\r\n * ------------\r\n * Maps a normalized PackageRow into an array of string values using the\r\n * exact header order required by BULK_CSV_UPLOAD_GUIDE.md.\r\n */ function toBulkCsvRow(row) {\n    return [\n        row.title ?? \"\",\n        row.description ?? \"\",\n        row.details ?? \"\",\n        row.hospital_name ?? \"\",\n        row.treatment_name ?? \"\",\n        row.sub_treatments ?? \"\",\n        row.price != null ? row.price.toString() : \"\",\n        row.original_price != null ? row.original_price.toString() : \"\",\n        row.currency ?? \"\",\n        row.duration ?? \"\",\n        row.treatment_category ?? \"\",\n        row.anaesthesia ?? \"\",\n        row.commission != null ? row.commission.toString() : \"\",\n        row.featured ? \"TRUE\" : \"FALSE\",\n        row.status,\n        row.doctor_name ?? \"\",\n        row.is_le_package ? \"TRUE\" : \"FALSE\",\n        row.includes ?? \"\",\n        row.image_file_id ?? \"\",\n        row.hospital_location ?? \"\",\n        row.category ?? \"\",\n        row.hospital_country ?? \"\",\n        row.translation_title ?? \"\",\n        row.translation_description ?? \"\",\n        row.translation_details ?? \"\",\n        row.translation ?? \"\"\n    ];\n}\n/**\r\n * generateBulkCsv\r\n * ---------------\r\n * Serializes a list of PackageRow objects into the official bulk CSV format.\r\n */ function generateBulkCsv(rows) {\n    const lines = [\n        CSV_HEADERS.join(\",\")\n    ];\n    for (const row of rows){\n        const values = toBulkCsvRow(row).map(csvEscape);\n        lines.push(values.join(\",\"));\n    }\n    return lines.join(\"\\n\");\n}\nfunction csvEscape(value) {\n    if (value === undefined || value === null) return \"\";\n    const needsQuotes = /[\",\\n]/.test(value);\n    const sanitized = value.replace(/\"/g, '\"\"');\n    return needsQuotes ? `\"${sanitized}\"` : sanitized;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvY3N2R2VuZXJhdG9yLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUVPLE1BQU1BLGNBQWM7SUFDekI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNELENBQUM7QUFFRjs7Ozs7Q0FLQyxHQUNNLFNBQVNDLGFBQWFDLEdBQWU7SUFDMUMsT0FBTztRQUNMQSxJQUFJQyxLQUFLLElBQUk7UUFDYkQsSUFBSUUsV0FBVyxJQUFJO1FBQ25CRixJQUFJRyxPQUFPLElBQUk7UUFDZkgsSUFBSUksYUFBYSxJQUFJO1FBQ3JCSixJQUFJSyxjQUFjLElBQUk7UUFDdEJMLElBQUlNLGNBQWMsSUFBSTtRQUN0Qk4sSUFBSU8sS0FBSyxJQUFJLE9BQU9QLElBQUlPLEtBQUssQ0FBQ0MsUUFBUSxLQUFLO1FBQzNDUixJQUFJUyxjQUFjLElBQUksT0FBT1QsSUFBSVMsY0FBYyxDQUFDRCxRQUFRLEtBQUs7UUFDN0RSLElBQUlVLFFBQVEsSUFBSTtRQUNoQlYsSUFBSVcsUUFBUSxJQUFJO1FBQ2hCWCxJQUFJWSxrQkFBa0IsSUFBSTtRQUMxQlosSUFBSWEsV0FBVyxJQUFJO1FBQ25CYixJQUFJYyxVQUFVLElBQUksT0FBT2QsSUFBSWMsVUFBVSxDQUFDTixRQUFRLEtBQUs7UUFDckRSLElBQUllLFFBQVEsR0FBRyxTQUFTO1FBQ3hCZixJQUFJZ0IsTUFBTTtRQUNWaEIsSUFBSWlCLFdBQVcsSUFBSTtRQUNuQmpCLElBQUlrQixhQUFhLEdBQUcsU0FBUztRQUM3QmxCLElBQUltQixRQUFRLElBQUk7UUFDaEJuQixJQUFJb0IsYUFBYSxJQUFJO1FBQ3JCcEIsSUFBSXFCLGlCQUFpQixJQUFJO1FBQ3pCckIsSUFBSXNCLFFBQVEsSUFBSTtRQUNoQnRCLElBQUl1QixnQkFBZ0IsSUFBSTtRQUN4QnZCLElBQUl3QixpQkFBaUIsSUFBSTtRQUN6QnhCLElBQUl5Qix1QkFBdUIsSUFBSTtRQUMvQnpCLElBQUkwQixtQkFBbUIsSUFBSTtRQUMzQjFCLElBQUkyQixXQUFXLElBQUk7S0FDcEI7QUFDSDtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTQyxnQkFBZ0JDLElBQWtCO0lBQ2hELE1BQU1DLFFBQVE7UUFBQ2hDLFlBQVlpQyxJQUFJLENBQUM7S0FBSztJQUNyQyxLQUFLLE1BQU0vQixPQUFPNkIsS0FBTTtRQUN0QixNQUFNRyxTQUFTakMsYUFBYUMsS0FBS2lDLEdBQUcsQ0FBQ0M7UUFDckNKLE1BQU1LLElBQUksQ0FBQ0gsT0FBT0QsSUFBSSxDQUFDO0lBQ3pCO0lBQ0EsT0FBT0QsTUFBTUMsSUFBSSxDQUFDO0FBQ3BCO0FBRUEsU0FBU0csVUFBVUUsS0FBYTtJQUM5QixJQUFJQSxVQUFVQyxhQUFhRCxVQUFVLE1BQU0sT0FBTztJQUNsRCxNQUFNRSxjQUFjLFNBQVNDLElBQUksQ0FBQ0g7SUFDbEMsTUFBTUksWUFBWUosTUFBTUssT0FBTyxDQUFDLE1BQU07SUFDdEMsT0FBT0gsY0FBYyxDQUFDLENBQUMsRUFBRUUsVUFBVSxDQUFDLENBQUMsR0FBR0E7QUFDMUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZW1lZGljYS1jbGluaWMtb2NyLy4vc3JjL3NlcnZpY2VzL2NzdkdlbmVyYXRvci50cz80NGFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhY2thZ2VSb3cgfSBmcm9tIFwiLi4vdHlwZXMvcGFja2FnZXNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBDU1ZfSEVBREVSUyA9IFtcclxuICBcInRpdGxlXCIsXHJcbiAgXCJkZXNjcmlwdGlvblwiLFxyXG4gIFwiZGV0YWlsc1wiLFxyXG4gIFwiaG9zcGl0YWxfbmFtZVwiLFxyXG4gIFwidHJlYXRtZW50X25hbWVcIixcclxuICBcIlN1YiBUcmVhdG1lbnRzXCIsXHJcbiAgXCJwcmljZVwiLFxyXG4gIFwib3JpZ2luYWxfcHJpY2VcIixcclxuICBcImN1cnJlbmN5XCIsXHJcbiAgXCJkdXJhdGlvblwiLFxyXG4gIFwidHJlYXRtZW50X2NhdGVnb3J5XCIsXHJcbiAgXCJhbmFlc3RoZXNpYVwiLFxyXG4gIFwiY29tbWlzc2lvblwiLFxyXG4gIFwiZmVhdHVyZWRcIixcclxuICBcInN0YXR1c1wiLFxyXG4gIFwiZG9jdG9yX25hbWVcIixcclxuICBcImlzX2xlX3BhY2thZ2VcIixcclxuICBcImluY2x1ZGVzXCIsXHJcbiAgXCJpbWFnZV9maWxlX2lkXCIsXHJcbiAgXCJob3NwaXRhbF9sb2NhdGlvblwiLFxyXG4gIFwiY2F0ZWdvcnlcIixcclxuICBcImhvc3BpdGFsX2NvdW50cnlcIixcclxuICBcInRyYW5zbGF0aW9uX3RpdGxlXCIsXHJcbiAgXCJ0cmFuc2xhdGlvbl9kZXNjcmlwdGlvblwiLFxyXG4gIFwidHJhbnNsYXRpb25fZGV0YWlsc1wiLFxyXG4gIFwidHJhbnNsYXRpb25cIixcclxuXTtcclxuXHJcbi8qKlxyXG4gKiB0b0J1bGtDc3ZSb3dcclxuICogLS0tLS0tLS0tLS0tXHJcbiAqIE1hcHMgYSBub3JtYWxpemVkIFBhY2thZ2VSb3cgaW50byBhbiBhcnJheSBvZiBzdHJpbmcgdmFsdWVzIHVzaW5nIHRoZVxyXG4gKiBleGFjdCBoZWFkZXIgb3JkZXIgcmVxdWlyZWQgYnkgQlVMS19DU1ZfVVBMT0FEX0dVSURFLm1kLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRvQnVsa0NzdlJvdyhyb3c6IFBhY2thZ2VSb3cpOiBzdHJpbmdbXSB7XHJcbiAgcmV0dXJuIFtcclxuICAgIHJvdy50aXRsZSA/PyBcIlwiLFxyXG4gICAgcm93LmRlc2NyaXB0aW9uID8/IFwiXCIsXHJcbiAgICByb3cuZGV0YWlscyA/PyBcIlwiLFxyXG4gICAgcm93Lmhvc3BpdGFsX25hbWUgPz8gXCJcIixcclxuICAgIHJvdy50cmVhdG1lbnRfbmFtZSA/PyBcIlwiLFxyXG4gICAgcm93LnN1Yl90cmVhdG1lbnRzID8/IFwiXCIsXHJcbiAgICByb3cucHJpY2UgIT0gbnVsbCA/IHJvdy5wcmljZS50b1N0cmluZygpIDogXCJcIixcclxuICAgIHJvdy5vcmlnaW5hbF9wcmljZSAhPSBudWxsID8gcm93Lm9yaWdpbmFsX3ByaWNlLnRvU3RyaW5nKCkgOiBcIlwiLFxyXG4gICAgcm93LmN1cnJlbmN5ID8/IFwiXCIsXHJcbiAgICByb3cuZHVyYXRpb24gPz8gXCJcIixcclxuICAgIHJvdy50cmVhdG1lbnRfY2F0ZWdvcnkgPz8gXCJcIixcclxuICAgIHJvdy5hbmFlc3RoZXNpYSA/PyBcIlwiLFxyXG4gICAgcm93LmNvbW1pc3Npb24gIT0gbnVsbCA/IHJvdy5jb21taXNzaW9uLnRvU3RyaW5nKCkgOiBcIlwiLFxyXG4gICAgcm93LmZlYXR1cmVkID8gXCJUUlVFXCIgOiBcIkZBTFNFXCIsXHJcbiAgICByb3cuc3RhdHVzLFxyXG4gICAgcm93LmRvY3Rvcl9uYW1lID8/IFwiXCIsXHJcbiAgICByb3cuaXNfbGVfcGFja2FnZSA/IFwiVFJVRVwiIDogXCJGQUxTRVwiLFxyXG4gICAgcm93LmluY2x1ZGVzID8/IFwiXCIsXHJcbiAgICByb3cuaW1hZ2VfZmlsZV9pZCA/PyBcIlwiLFxyXG4gICAgcm93Lmhvc3BpdGFsX2xvY2F0aW9uID8/IFwiXCIsXHJcbiAgICByb3cuY2F0ZWdvcnkgPz8gXCJcIixcclxuICAgIHJvdy5ob3NwaXRhbF9jb3VudHJ5ID8/IFwiXCIsXHJcbiAgICByb3cudHJhbnNsYXRpb25fdGl0bGUgPz8gXCJcIixcclxuICAgIHJvdy50cmFuc2xhdGlvbl9kZXNjcmlwdGlvbiA/PyBcIlwiLFxyXG4gICAgcm93LnRyYW5zbGF0aW9uX2RldGFpbHMgPz8gXCJcIixcclxuICAgIHJvdy50cmFuc2xhdGlvbiA/PyBcIlwiLFxyXG4gIF07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBnZW5lcmF0ZUJ1bGtDc3ZcclxuICogLS0tLS0tLS0tLS0tLS0tXHJcbiAqIFNlcmlhbGl6ZXMgYSBsaXN0IG9mIFBhY2thZ2VSb3cgb2JqZWN0cyBpbnRvIHRoZSBvZmZpY2lhbCBidWxrIENTViBmb3JtYXQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVCdWxrQ3N2KHJvd3M6IFBhY2thZ2VSb3dbXSk6IHN0cmluZyB7XHJcbiAgY29uc3QgbGluZXMgPSBbQ1NWX0hFQURFUlMuam9pbihcIixcIildO1xyXG4gIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHRvQnVsa0NzdlJvdyhyb3cpLm1hcChjc3ZFc2NhcGUpO1xyXG4gICAgbGluZXMucHVzaCh2YWx1ZXMuam9pbihcIixcIikpO1xyXG4gIH1cclxuICByZXR1cm4gbGluZXMuam9pbihcIlxcblwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3N2RXNjYXBlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSByZXR1cm4gXCJcIjtcclxuICBjb25zdCBuZWVkc1F1b3RlcyA9IC9bXCIsXFxuXS8udGVzdCh2YWx1ZSk7XHJcbiAgY29uc3Qgc2FuaXRpemVkID0gdmFsdWUucmVwbGFjZSgvXCIvZywgJ1wiXCInKTtcclxuICByZXR1cm4gbmVlZHNRdW90ZXMgPyBgXCIke3Nhbml0aXplZH1cImAgOiBzYW5pdGl6ZWQ7XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJDU1ZfSEVBREVSUyIsInRvQnVsa0NzdlJvdyIsInJvdyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkZXRhaWxzIiwiaG9zcGl0YWxfbmFtZSIsInRyZWF0bWVudF9uYW1lIiwic3ViX3RyZWF0bWVudHMiLCJwcmljZSIsInRvU3RyaW5nIiwib3JpZ2luYWxfcHJpY2UiLCJjdXJyZW5jeSIsImR1cmF0aW9uIiwidHJlYXRtZW50X2NhdGVnb3J5IiwiYW5hZXN0aGVzaWEiLCJjb21taXNzaW9uIiwiZmVhdHVyZWQiLCJzdGF0dXMiLCJkb2N0b3JfbmFtZSIsImlzX2xlX3BhY2thZ2UiLCJpbmNsdWRlcyIsImltYWdlX2ZpbGVfaWQiLCJob3NwaXRhbF9sb2NhdGlvbiIsImNhdGVnb3J5IiwiaG9zcGl0YWxfY291bnRyeSIsInRyYW5zbGF0aW9uX3RpdGxlIiwidHJhbnNsYXRpb25fZGVzY3JpcHRpb24iLCJ0cmFuc2xhdGlvbl9kZXRhaWxzIiwidHJhbnNsYXRpb24iLCJnZW5lcmF0ZUJ1bGtDc3YiLCJyb3dzIiwibGluZXMiLCJqb2luIiwidmFsdWVzIiwibWFwIiwiY3N2RXNjYXBlIiwicHVzaCIsInZhbHVlIiwidW5kZWZpbmVkIiwibmVlZHNRdW90ZXMiLCJ0ZXN0Iiwic2FuaXRpemVkIiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/csvGenerator.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/normalizer.ts":
/*!************************************!*\
  !*** ./src/services/normalizer.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizePackageRow: () => (/* binding */ normalizePackageRow),\n/* harmony export */   validatePackageBatch: () => (/* binding */ validatePackageBatch)\n/* harmony export */ });\n/* harmony import */ var _lib_matching__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/matching */ \"(rsc)/./src/lib/matching.ts\");\n\nconst REQUIRED_FIELDS = [\n    \"title\",\n    \"hospital_name\",\n    \"treatment_name\",\n    \"price\",\n    \"currency\"\n];\nconst ALLOWED_CURRENCIES = [\n    \"USD\",\n    \"THB\",\n    \"EUR\",\n    \"GBP\",\n    \"SGD\",\n    \"MYR\",\n    \"KRW\"\n];\n/**\r\n * normalizePackageRow\r\n * -------------------\r\n * Cleans and normalizes a partially filled PackageRow object.\r\n * - Trims string fields and normalizes currency codes\r\n * - Parses numeric fields (price, original_price, commission)\r\n * - Applies default booleans/status values\r\n * - Runs fuzzy matching helpers and captures warnings\r\n */ function normalizePackageRow(row) {\n    const warnings = [\n        ...row._meta?.warnings ?? []\n    ];\n    const matcher = {\n        ...row._meta?.matcher ?? {}\n    };\n    const sanitized = {\n        title: normalizeString(row.title),\n        description: normalizeOptional(row.description),\n        details: normalizeOptional(row.details),\n        hospital_name: normalizeString(row.hospital_name),\n        treatment_name: normalizeString(row.treatment_name),\n        sub_treatments: normalizeOptional(row.sub_treatments),\n        price: parseNumber(row.price, \"price\", warnings),\n        original_price: parseOptionalNumber(row.original_price, \"original_price\", warnings),\n        currency: normalizeCurrency(row.currency, warnings),\n        duration: normalizeOptional(row.duration),\n        treatment_category: normalizeOptional(row.treatment_category),\n        anaesthesia: normalizeOptional(row.anaesthesia),\n        commission: parseOptionalNumber(row.commission, \"commission\", warnings),\n        featured: normalizeBoolean(row.featured, false),\n        status: normalizeStatus(row.status, warnings),\n        doctor_name: normalizeOptional(row.doctor_name),\n        is_le_package: normalizeBoolean(row.is_le_package, false),\n        includes: normalizeOptional(row.includes),\n        image_file_id: normalizeOptional(row.image_file_id),\n        hospital_location: normalizeOptional(row.hospital_location),\n        category: normalizeOptional(row.category),\n        hospital_country: normalizeOptional(row.hospital_country),\n        translation_title: normalizeOptional(row.translation_title),\n        translation_description: normalizeOptional(row.translation_description),\n        translation_details: normalizeOptional(row.translation_details),\n        translation: normalizeOptional(row.translation),\n        _meta: {\n            ...row._meta,\n            warnings,\n            matcher\n        }\n    };\n    applyMatching(\"hospital\", sanitized, matcher, warnings);\n    applyMatching(\"treatment\", sanitized, matcher, warnings);\n    return sanitized;\n}\n/**\r\n * validatePackageBatch\r\n * --------------------\r\n * Splits a list of PackageRow objects into valid / warning / invalid buckets.\r\n */ function validatePackageBatch(rows) {\n    const validPackages = [];\n    const packagesWithWarnings = [];\n    const invalidPackages = [];\n    for (const row of rows){\n        const missingRequired = REQUIRED_FIELDS.filter((field)=>{\n            if (field === \"price\") {\n                return row.price === null || row.price === undefined;\n            }\n            return !row[field]?.toString().trim();\n        });\n        if (missingRequired.length) {\n            row._meta = {\n                ...row._meta,\n                warnings: [\n                    ...row._meta?.warnings ?? [],\n                    `Missing required fields: ${missingRequired.join(\", \")}`\n                ]\n            };\n            invalidPackages.push(row);\n            continue;\n        }\n        const hasWarnings = (row._meta?.warnings ?? []).length > 0;\n        if (hasWarnings) {\n            packagesWithWarnings.push(row);\n        } else {\n            validPackages.push(row);\n        }\n    }\n    return {\n        validPackages,\n        packagesWithWarnings,\n        invalidPackages\n    };\n}\nfunction normalizeString(value) {\n    return (value ?? \"\").trim();\n}\nfunction normalizeOptional(value) {\n    const trimmed = (value ?? \"\").trim();\n    return trimmed.length ? trimmed : undefined;\n}\nfunction parseNumber(value, field, warnings) {\n    if (value === null || value === undefined || value === \"\") {\n        warnings.push(`${field} missing; set to null`);\n        return null;\n    }\n    const parsed = Number(value);\n    if (Number.isNaN(parsed)) {\n        warnings.push(`${field} is not a number; set to null`);\n        return null;\n    }\n    return parsed;\n}\nfunction parseOptionalNumber(value, field, warnings) {\n    if (value === null || value === undefined || value === \"\") {\n        return undefined;\n    }\n    const parsed = Number(value);\n    if (Number.isNaN(parsed)) {\n        warnings.push(`${field} is not a number; set to null`);\n        return null;\n    }\n    return parsed;\n}\nfunction normalizeCurrency(value, warnings) {\n    if (!value) {\n        warnings.push(\"currency missing; defaulting to USD\");\n        return \"USD\";\n    }\n    const upper = value.trim().toUpperCase().replace(\"฿\", \"THB\");\n    if (!ALLOWED_CURRENCIES.includes(upper)) {\n        warnings.push(`currency ${value} not supported; defaulting to USD`);\n        return \"USD\";\n    }\n    return upper;\n}\nfunction normalizeBoolean(value, fallback) {\n    if (typeof value === \"boolean\") return value;\n    if (typeof value === \"string\") {\n        const normalized = value.toLowerCase();\n        if ([\n            \"true\",\n            \"1\",\n            \"yes\"\n        ].includes(normalized)) return true;\n        if ([\n            \"false\",\n            \"0\",\n            \"no\"\n        ].includes(normalized)) return false;\n    }\n    if (typeof value === \"number\") {\n        return value === 1;\n    }\n    return fallback;\n}\nfunction normalizeStatus(value, warnings) {\n    if (value === \"active\" || value === \"inactive\") {\n        return value;\n    }\n    warnings.push(\"status missing; defaulting to active\");\n    return \"active\";\n}\nfunction applyMatching(type, row, matcher, warnings) {\n    if (type === \"hospital\" && row.hospital_name) {\n        const result = (0,_lib_matching__WEBPACK_IMPORTED_MODULE_0__.matchHospitalName)(row.hospital_name);\n        matcher.hospitalScore = result.score;\n        if (result.value) {\n            row.hospital_name = result.value;\n        } else if (row.hospital_name) {\n            warnings.push(`Hospital not recognized: ${row.hospital_name}`);\n        }\n    }\n    if (type === \"treatment\" && row.treatment_name) {\n        const result = (0,_lib_matching__WEBPACK_IMPORTED_MODULE_0__.matchTreatmentName)(row.treatment_name);\n        matcher.treatmentScore = result.score;\n        if (result.value) {\n            row.treatment_name = result.value;\n        } else {\n            warnings.push(`Treatment not recognized: ${row.treatment_name}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBa0I7SUFDckQsSUFBSXFELFVBQVUsWUFBWUEsVUFBVSxZQUFZO1FBQzlDLE9BQU9BO0lBQ1Q7SUFDQXJELFNBQVNtRCxJQUFJLENBQUM7SUFDZCxPQUFPO0FBQ1Q7QUFFQSxTQUFTZCxjQUNQMkIsSUFBOEIsRUFDOUJqRSxHQUFlLEVBQ2ZHLE9BQWtELEVBQ2xERixRQUFrQjtJQUVsQixJQUFJZ0UsU0FBUyxjQUFjakUsSUFBSVUsYUFBYSxFQUFFO1FBQzVDLE1BQU13RCxTQUFTdkUsZ0VBQWlCQSxDQUFDSyxJQUFJVSxhQUFhO1FBQ2xEUCxRQUFRZ0UsYUFBYSxHQUFHRCxPQUFPRSxLQUFLO1FBQ3BDLElBQUlGLE9BQU9aLEtBQUssRUFBRTtZQUNoQnRELElBQUlVLGFBQWEsR0FBR3dELE9BQU9aLEtBQUs7UUFDbEMsT0FBTyxJQUFJdEQsSUFBSVUsYUFBYSxFQUFFO1lBQzVCVCxTQUFTbUQsSUFBSSxDQUFDLENBQUMseUJBQXlCLEVBQUVwRCxJQUFJVSxhQUFhLENBQUMsQ0FBQztRQUMvRDtJQUNGO0lBRUEsSUFBSXVELFNBQVMsZUFBZWpFLElBQUlXLGNBQWMsRUFBRTtRQUM5QyxNQUFNdUQsU0FBU3RFLGlFQUFrQkEsQ0FBQ0ksSUFBSVcsY0FBYztRQUNwRFIsUUFBUWtFLGNBQWMsR0FBR0gsT0FBT0UsS0FBSztRQUNyQyxJQUFJRixPQUFPWixLQUFLLEVBQUU7WUFDaEJ0RCxJQUFJVyxjQUFjLEdBQUd1RCxPQUFPWixLQUFLO1FBQ25DLE9BQU87WUFDTHJELFNBQVNtRCxJQUFJLENBQUMsQ0FBQywwQkFBMEIsRUFBRXBELElBQUlXLGNBQWMsQ0FBQyxDQUFDO1FBQ2pFO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2xlbWVkaWNhLWNsaW5pYy1vY3IvLi9zcmMvc2VydmljZXMvbm9ybWFsaXplci50cz8yNGRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhY2thZ2VSb3cgfSBmcm9tIFwiLi4vdHlwZXMvcGFja2FnZXNcIjtcclxuaW1wb3J0IHsgbWF0Y2hIb3NwaXRhbE5hbWUsIG1hdGNoVHJlYXRtZW50TmFtZSB9IGZyb20gXCIuLi9saWIvbWF0Y2hpbmdcIjtcclxuXHJcbmNvbnN0IFJFUVVJUkVEX0ZJRUxEUzogQXJyYXk8a2V5b2YgUGFja2FnZVJvdz4gPSBbXHJcbiAgXCJ0aXRsZVwiLFxyXG4gIFwiaG9zcGl0YWxfbmFtZVwiLFxyXG4gIFwidHJlYXRtZW50X25hbWVcIixcclxuICBcInByaWNlXCIsXHJcbiAgXCJjdXJyZW5jeVwiLFxyXG5dO1xyXG5cclxuY29uc3QgQUxMT1dFRF9DVVJSRU5DSUVTID0gW1wiVVNEXCIsIFwiVEhCXCIsIFwiRVVSXCIsIFwiR0JQXCIsIFwiU0dEXCIsIFwiTVlSXCIsIFwiS1JXXCJdO1xyXG5cclxuLyoqXHJcbiAqIG5vcm1hbGl6ZVBhY2thZ2VSb3dcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBDbGVhbnMgYW5kIG5vcm1hbGl6ZXMgYSBwYXJ0aWFsbHkgZmlsbGVkIFBhY2thZ2VSb3cgb2JqZWN0LlxyXG4gKiAtIFRyaW1zIHN0cmluZyBmaWVsZHMgYW5kIG5vcm1hbGl6ZXMgY3VycmVuY3kgY29kZXNcclxuICogLSBQYXJzZXMgbnVtZXJpYyBmaWVsZHMgKHByaWNlLCBvcmlnaW5hbF9wcmljZSwgY29tbWlzc2lvbilcclxuICogLSBBcHBsaWVzIGRlZmF1bHQgYm9vbGVhbnMvc3RhdHVzIHZhbHVlc1xyXG4gKiAtIFJ1bnMgZnV6enkgbWF0Y2hpbmcgaGVscGVycyBhbmQgY2FwdHVyZXMgd2FybmluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVQYWNrYWdlUm93KHJvdzogUGFydGlhbDxQYWNrYWdlUm93Pik6IFBhY2thZ2VSb3cge1xyXG4gIGNvbnN0IHdhcm5pbmdzID0gWy4uLihyb3cuX21ldGE/Lndhcm5pbmdzID8/IFtdKV07XHJcbiAgY29uc3QgbWF0Y2hlciA9IHsgLi4uKHJvdy5fbWV0YT8ubWF0Y2hlciA/PyB7fSkgfTtcclxuXHJcbiAgY29uc3Qgc2FuaXRpemVkOiBQYWNrYWdlUm93ID0ge1xyXG4gICAgdGl0bGU6IG5vcm1hbGl6ZVN0cmluZyhyb3cudGl0bGUpLFxyXG4gICAgZGVzY3JpcHRpb246IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy5kZXNjcmlwdGlvbiksXHJcbiAgICBkZXRhaWxzOiBub3JtYWxpemVPcHRpb25hbChyb3cuZGV0YWlscyksXHJcbiAgICBob3NwaXRhbF9uYW1lOiBub3JtYWxpemVTdHJpbmcocm93Lmhvc3BpdGFsX25hbWUpLFxyXG4gICAgdHJlYXRtZW50X25hbWU6IG5vcm1hbGl6ZVN0cmluZyhyb3cudHJlYXRtZW50X25hbWUpLFxyXG4gICAgc3ViX3RyZWF0bWVudHM6IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy5zdWJfdHJlYXRtZW50cyksXHJcbiAgICBwcmljZTogcGFyc2VOdW1iZXIocm93LnByaWNlLCBcInByaWNlXCIsIHdhcm5pbmdzKSxcclxuICAgIG9yaWdpbmFsX3ByaWNlOiBwYXJzZU9wdGlvbmFsTnVtYmVyKHJvdy5vcmlnaW5hbF9wcmljZSwgXCJvcmlnaW5hbF9wcmljZVwiLCB3YXJuaW5ncyksXHJcbiAgICBjdXJyZW5jeTogbm9ybWFsaXplQ3VycmVuY3kocm93LmN1cnJlbmN5LCB3YXJuaW5ncyksXHJcbiAgICBkdXJhdGlvbjogbm9ybWFsaXplT3B0aW9uYWwocm93LmR1cmF0aW9uKSxcclxuICAgIHRyZWF0bWVudF9jYXRlZ29yeTogbm9ybWFsaXplT3B0aW9uYWwocm93LnRyZWF0bWVudF9jYXRlZ29yeSksXHJcbiAgICBhbmFlc3RoZXNpYTogbm9ybWFsaXplT3B0aW9uYWwocm93LmFuYWVzdGhlc2lhKSxcclxuICAgIGNvbW1pc3Npb246IHBhcnNlT3B0aW9uYWxOdW1iZXIocm93LmNvbW1pc3Npb24sIFwiY29tbWlzc2lvblwiLCB3YXJuaW5ncyksXHJcbiAgICBmZWF0dXJlZDogbm9ybWFsaXplQm9vbGVhbihyb3cuZmVhdHVyZWQsIGZhbHNlKSxcclxuICAgIHN0YXR1czogbm9ybWFsaXplU3RhdHVzKHJvdy5zdGF0dXMsIHdhcm5pbmdzKSxcclxuICAgIGRvY3Rvcl9uYW1lOiBub3JtYWxpemVPcHRpb25hbChyb3cuZG9jdG9yX25hbWUpLFxyXG4gICAgaXNfbGVfcGFja2FnZTogbm9ybWFsaXplQm9vbGVhbihyb3cuaXNfbGVfcGFja2FnZSwgZmFsc2UpLFxyXG4gICAgaW5jbHVkZXM6IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy5pbmNsdWRlcyksXHJcbiAgICBpbWFnZV9maWxlX2lkOiBub3JtYWxpemVPcHRpb25hbChyb3cuaW1hZ2VfZmlsZV9pZCksXHJcbiAgICBob3NwaXRhbF9sb2NhdGlvbjogbm9ybWFsaXplT3B0aW9uYWwocm93Lmhvc3BpdGFsX2xvY2F0aW9uKSxcclxuICAgIGNhdGVnb3J5OiBub3JtYWxpemVPcHRpb25hbChyb3cuY2F0ZWdvcnkpLFxyXG4gICAgaG9zcGl0YWxfY291bnRyeTogbm9ybWFsaXplT3B0aW9uYWwocm93Lmhvc3BpdGFsX2NvdW50cnkpLFxyXG4gICAgdHJhbnNsYXRpb25fdGl0bGU6IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy50cmFuc2xhdGlvbl90aXRsZSksXHJcbiAgICB0cmFuc2xhdGlvbl9kZXNjcmlwdGlvbjogbm9ybWFsaXplT3B0aW9uYWwocm93LnRyYW5zbGF0aW9uX2Rlc2NyaXB0aW9uKSxcclxuICAgIHRyYW5zbGF0aW9uX2RldGFpbHM6IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy50cmFuc2xhdGlvbl9kZXRhaWxzKSxcclxuICAgIHRyYW5zbGF0aW9uOiBub3JtYWxpemVPcHRpb25hbChyb3cudHJhbnNsYXRpb24pLFxyXG4gICAgX21ldGE6IHtcclxuICAgICAgLi4ucm93Ll9tZXRhLFxyXG4gICAgICB3YXJuaW5ncyxcclxuICAgICAgbWF0Y2hlcixcclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbiAgYXBwbHlNYXRjaGluZyhcImhvc3BpdGFsXCIsIHNhbml0aXplZCwgbWF0Y2hlciwgd2FybmluZ3MpO1xyXG4gIGFwcGx5TWF0Y2hpbmcoXCJ0cmVhdG1lbnRcIiwgc2FuaXRpemVkLCBtYXRjaGVyLCB3YXJuaW5ncyk7XHJcblxyXG4gIHJldHVybiBzYW5pdGl6ZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiB2YWxpZGF0ZVBhY2thZ2VCYXRjaFxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBTcGxpdHMgYSBsaXN0IG9mIFBhY2thZ2VSb3cgb2JqZWN0cyBpbnRvIHZhbGlkIC8gd2FybmluZyAvIGludmFsaWQgYnVja2V0cy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBhY2thZ2VCYXRjaChyb3dzOiBQYWNrYWdlUm93W10pOiB7XHJcbiAgdmFsaWRQYWNrYWdlczogUGFja2FnZVJvd1tdO1xyXG4gIHBhY2thZ2VzV2l0aFdhcm5pbmdzOiBQYWNrYWdlUm93W107XHJcbiAgaW52YWxpZFBhY2thZ2VzOiBQYWNrYWdlUm93W107XHJcbn0ge1xyXG4gIGNvbnN0IHZhbGlkUGFja2FnZXM6IFBhY2thZ2VSb3dbXSA9IFtdO1xyXG4gIGNvbnN0IHBhY2thZ2VzV2l0aFdhcm5pbmdzOiBQYWNrYWdlUm93W10gPSBbXTtcclxuICBjb25zdCBpbnZhbGlkUGFja2FnZXM6IFBhY2thZ2VSb3dbXSA9IFtdO1xyXG5cclxuICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XHJcbiAgICBjb25zdCBtaXNzaW5nUmVxdWlyZWQgPSBSRVFVSVJFRF9GSUVMRFMuZmlsdGVyKChmaWVsZCkgPT4ge1xyXG4gICAgICBpZiAoZmllbGQgPT09IFwicHJpY2VcIikge1xyXG4gICAgICAgIHJldHVybiByb3cucHJpY2UgPT09IG51bGwgfHwgcm93LnByaWNlID09PSB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuICFyb3dbZmllbGRdPy50b1N0cmluZygpLnRyaW0oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChtaXNzaW5nUmVxdWlyZWQubGVuZ3RoKSB7XHJcbiAgICAgIHJvdy5fbWV0YSA9IHtcclxuICAgICAgICAuLi5yb3cuX21ldGEsXHJcbiAgICAgICAgd2FybmluZ3M6IFtcclxuICAgICAgICAgIC4uLihyb3cuX21ldGE/Lndhcm5pbmdzID8/IFtdKSxcclxuICAgICAgICAgIGBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogJHttaXNzaW5nUmVxdWlyZWQuam9pbihcIiwgXCIpfWAsXHJcbiAgICAgICAgXSxcclxuICAgICAgfTtcclxuICAgICAgaW52YWxpZFBhY2thZ2VzLnB1c2gocm93KTtcclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFzV2FybmluZ3MgPSAocm93Ll9tZXRhPy53YXJuaW5ncyA/PyBbXSkubGVuZ3RoID4gMDtcclxuICAgIGlmIChoYXNXYXJuaW5ncykge1xyXG4gICAgICBwYWNrYWdlc1dpdGhXYXJuaW5ncy5wdXNoKHJvdyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWxpZFBhY2thZ2VzLnB1c2gocm93KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7IHZhbGlkUGFja2FnZXMsIHBhY2thZ2VzV2l0aFdhcm5pbmdzLCBpbnZhbGlkUGFja2FnZXMgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplU3RyaW5nKHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xyXG4gIHJldHVybiAodmFsdWUgPz8gXCJcIikudHJpbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVPcHRpb25hbCh2YWx1ZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgY29uc3QgdHJpbW1lZCA9ICh2YWx1ZSA/PyBcIlwiKS50cmltKCk7XHJcbiAgcmV0dXJuIHRyaW1tZWQubGVuZ3RoID8gdHJpbW1lZCA6IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VOdW1iZXIodmFsdWU6IGFueSwgZmllbGQ6IHN0cmluZywgd2FybmluZ3M6IHN0cmluZ1tdKTogbnVtYmVyIHwgbnVsbCB7XHJcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IFwiXCIpIHtcclxuICAgIHdhcm5pbmdzLnB1c2goYCR7ZmllbGR9IG1pc3Npbmc7IHNldCB0byBudWxsYCk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgY29uc3QgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcclxuICBpZiAoTnVtYmVyLmlzTmFOKHBhcnNlZCkpIHtcclxuICAgIHdhcm5pbmdzLnB1c2goYCR7ZmllbGR9IGlzIG5vdCBhIG51bWJlcjsgc2V0IHRvIG51bGxgKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICByZXR1cm4gcGFyc2VkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZU9wdGlvbmFsTnVtYmVyKFxyXG4gIHZhbHVlOiBhbnksXHJcbiAgZmllbGQ6IHN0cmluZyxcclxuICB3YXJuaW5nczogc3RyaW5nW11cclxuKTogbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZCB7XHJcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IFwiXCIpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG4gIGNvbnN0IHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XHJcbiAgaWYgKE51bWJlci5pc05hTihwYXJzZWQpKSB7XHJcbiAgICB3YXJuaW5ncy5wdXNoKGAke2ZpZWxkfSBpcyBub3QgYSBudW1iZXI7IHNldCB0byBudWxsYCk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgcmV0dXJuIHBhcnNlZDtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplQ3VycmVuY3kodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgd2FybmluZ3M6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICBpZiAoIXZhbHVlKSB7XHJcbiAgICB3YXJuaW5ncy5wdXNoKFwiY3VycmVuY3kgbWlzc2luZzsgZGVmYXVsdGluZyB0byBVU0RcIik7XHJcbiAgICByZXR1cm4gXCJVU0RcIjtcclxuICB9XHJcbiAgY29uc3QgdXBwZXIgPSB2YWx1ZS50cmltKCkudG9VcHBlckNhc2UoKS5yZXBsYWNlKFwi4Li/XCIsIFwiVEhCXCIpO1xyXG4gIGlmICghQUxMT1dFRF9DVVJSRU5DSUVTLmluY2x1ZGVzKHVwcGVyKSkge1xyXG4gICAgd2FybmluZ3MucHVzaChgY3VycmVuY3kgJHt2YWx1ZX0gbm90IHN1cHBvcnRlZDsgZGVmYXVsdGluZyB0byBVU0RgKTtcclxuICAgIHJldHVybiBcIlVTRFwiO1xyXG4gIH1cclxuICByZXR1cm4gdXBwZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUJvb2xlYW4odmFsdWU6IGFueSwgZmFsbGJhY2s6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikgcmV0dXJuIHZhbHVlO1xyXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKFtcInRydWVcIiwgXCIxXCIsIFwieWVzXCJdLmluY2x1ZGVzKG5vcm1hbGl6ZWQpKSByZXR1cm4gdHJ1ZTtcclxuICAgIGlmIChbXCJmYWxzZVwiLCBcIjBcIiwgXCJub1wiXS5pbmNsdWRlcyhub3JtYWxpemVkKSkgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IDE7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxsYmFjaztcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplU3RhdHVzKHZhbHVlOiBhbnksIHdhcm5pbmdzOiBzdHJpbmdbXSk6IFwiYWN0aXZlXCIgfCBcImluYWN0aXZlXCIge1xyXG4gIGlmICh2YWx1ZSA9PT0gXCJhY3RpdmVcIiB8fCB2YWx1ZSA9PT0gXCJpbmFjdGl2ZVwiKSB7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG4gIHdhcm5pbmdzLnB1c2goXCJzdGF0dXMgbWlzc2luZzsgZGVmYXVsdGluZyB0byBhY3RpdmVcIik7XHJcbiAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGx5TWF0Y2hpbmcoXHJcbiAgdHlwZTogXCJob3NwaXRhbFwiIHwgXCJ0cmVhdG1lbnRcIixcclxuICByb3c6IFBhY2thZ2VSb3csXHJcbiAgbWF0Y2hlcjogUmVjb3JkPHN0cmluZywgbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZD4sXHJcbiAgd2FybmluZ3M6IHN0cmluZ1tdXHJcbikge1xyXG4gIGlmICh0eXBlID09PSBcImhvc3BpdGFsXCIgJiYgcm93Lmhvc3BpdGFsX25hbWUpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IG1hdGNoSG9zcGl0YWxOYW1lKHJvdy5ob3NwaXRhbF9uYW1lKTtcclxuICAgIG1hdGNoZXIuaG9zcGl0YWxTY29yZSA9IHJlc3VsdC5zY29yZTtcclxuICAgIGlmIChyZXN1bHQudmFsdWUpIHtcclxuICAgICAgcm93Lmhvc3BpdGFsX25hbWUgPSByZXN1bHQudmFsdWU7XHJcbiAgICB9IGVsc2UgaWYgKHJvdy5ob3NwaXRhbF9uYW1lKSB7XHJcbiAgICAgIHdhcm5pbmdzLnB1c2goYEhvc3BpdGFsIG5vdCByZWNvZ25pemVkOiAke3Jvdy5ob3NwaXRhbF9uYW1lfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKHR5cGUgPT09IFwidHJlYXRtZW50XCIgJiYgcm93LnRyZWF0bWVudF9uYW1lKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBtYXRjaFRyZWF0bWVudE5hbWUocm93LnRyZWF0bWVudF9uYW1lKTtcclxuICAgIG1hdGNoZXIudHJlYXRtZW50U2NvcmUgPSByZXN1bHQuc2NvcmU7XHJcbiAgICBpZiAocmVzdWx0LnZhbHVlKSB7XHJcbiAgICAgIHJvdy50cmVhdG1lbnRfbmFtZSA9IHJlc3VsdC52YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdhcm5pbmdzLnB1c2goYFRyZWF0bWVudCBub3QgcmVjb2duaXplZDogJHtyb3cudHJlYXRtZW50X25hbWV9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsibWF0Y2hIb3NwaXRhbE5hbWUiLCJtYXRjaFRyZWF0bWVudE5hbWUiLCJSRVFVSVJFRF9GSUVMRFMiLCJBTExPV0VEX0NVUlJFTkNJRVMiLCJub3JtYWxpemVQYWNrYWdlUm93Iiwicm93Iiwid2FybmluZ3MiLCJfbWV0YSIsIm1hdGNoZXIiLCJzYW5pdGl6ZWQiLCJ0aXRsZSIsIm5vcm1hbGl6ZVN0cmluZyIsImRlc2NyaXB0aW9uIiwibm9ybWFsaXplT3B0aW9uYWwiLCJkZXRhaWxzIiwiaG9zcGl0YWxfbmFtZSIsInRyZWF0bWVudF9uYW1lIiwic3ViX3RyZWF0bWVudHMiLCJwcmljZSIsInBhcnNlTnVtYmVyIiwib3JpZ2luYWxfcHJpY2UiLCJwYXJzZU9wdGlvbmFsTnVtYmVyIiwiY3VycmVuY3kiLCJub3JtYWxpemVDdXJyZW5jeSIsImR1cmF0aW9uIiwidHJlYXRtZW50X2NhdGVnb3J5IiwiYW5hZXN0aGVzaWEiLCJjb21taXNzaW9uIiwiZmVhdHVyZWQiLCJub3JtYWxpemVCb29sZWFuIiwic3RhdHVzIiwibm9ybWFsaXplU3RhdHVzIiwiZG9jdG9yX25hbWUiLCJpc19sZV9wYWNrYWdlIiwiaW5jbHVkZXMiLCJpbWFnZV9maWxlX2lkIiwiaG9zcGl0YWxfbG9jYXRpb24iLCJjYXRlZ29yeSIsImhvc3BpdGFsX2NvdW50cnkiLCJ0cmFuc2xhdGlvbl90aXRsZSIsInRyYW5zbGF0aW9uX2Rlc2NyaXB0aW9uIiwidHJhbnNsYXRpb25fZGV0YWlscyIsInRyYW5zbGF0aW9uIiwiYXBwbHlNYXRjaGluZyIsInZhbGlkYXRlUGFja2FnZUJhdGNoIiwicm93cyIsInZhbGlkUGFja2FnZXMiLCJwYWNrYWdlc1dpdGhXYXJuaW5ncyIsImludmFsaWRQYWNrYWdlcyIsIm1pc3NpbmdSZXF1aXJlZCIsImZpbHRlciIsImZpZWxkIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJ0cmltIiwibGVuZ3RoIiwiam9pbiIsInB1c2giLCJoYXNXYXJuaW5ncyIsInZhbHVlIiwidHJpbW1lZCIsInBhcnNlZCIsIk51bWJlciIsImlzTmFOIiwidXBwZXIiLCJ0b1VwcGVyQ2FzZSIsInJlcGxhY2UiLCJmYWxsYmFjayIsIm5vcm1hbGl6ZWQiLCJ0b0xvd2VyQ2FzZSIsInR5cGUiLCJyZXN1bHQiLCJob3NwaXRhbFNjb3JlIiwic2NvcmUiLCJ0cmVhdG1lbnRTY29yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/normalizer.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute&page=%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Focr-menus%2Fregenerate-csv%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();