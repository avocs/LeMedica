/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ocr-menus/route";
exports.ids = ["app/api/ocr-menus/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/pdf-parse/lib/pdf.js sync recursive ^\\.\\/.*\\/build\\/pdf\\.js$":
/*!**************************************************************************!*\
  !*** ./node_modules/pdf-parse/lib/pdf.js/ sync ^\.\/.*\/build\/pdf\.js$ ***!
  \**************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./v1.10.100/build/pdf.js": "(rsc)/./node_modules/pdf-parse/lib/pdf.js/v1.10.100/build/pdf.js",
	"./v1.10.88/build/pdf.js": "(rsc)/./node_modules/pdf-parse/lib/pdf.js/v1.10.88/build/pdf.js",
	"./v1.9.426/build/pdf.js": "(rsc)/./node_modules/pdf-parse/lib/pdf.js/v1.9.426/build/pdf.js",
	"./v2.0.550/build/pdf.js": "(rsc)/./node_modules/pdf-parse/lib/pdf.js/v2.0.550/build/pdf.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "(rsc)/./node_modules/pdf-parse/lib/pdf.js sync recursive ^\\.\\/.*\\/build\\/pdf\\.js$";

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "node:async_hooks":
/*!***********************************!*\
  !*** external "node:async_hooks" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:async_hooks");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:os":
/*!**************************!*\
  !*** external "node:os" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:os");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Focr-menus%2Froute&page=%2Fapi%2Focr-menus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Focr-menus%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Focr-menus%2Froute&page=%2Fapi%2Focr-menus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Focr-menus%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_User_Documents_side_quest_LeMedica_src_app_api_ocr_menus_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ocr-menus/route.ts */ \"(rsc)/./src/app/api/ocr-menus/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ocr-menus/route\",\n        pathname: \"/api/ocr-menus\",\n        filename: \"route\",\n        bundlePath: \"app/api/ocr-menus/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\User\\\\Documents\\\\side quest\\\\LeMedica\\\\src\\\\app\\\\api\\\\ocr-menus\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_User_Documents_side_quest_LeMedica_src_app_api_ocr_menus_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ocr-menus/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvY3ItbWVudXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9jci1tZW51cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9jci1tZW51cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNVc2VyJTVDRG9jdW1lbnRzJTVDc2lkZSUyMHF1ZXN0JTVDTGVNZWRpY2ElNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q1VzZXIlNUNEb2N1bWVudHMlNUNzaWRlJTIwcXVlc3QlNUNMZU1lZGljYSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDb0M7QUFDakg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZW1lZGljYS1jbGluaWMtb2NyLz80ZTZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXFVzZXJcXFxcRG9jdW1lbnRzXFxcXHNpZGUgcXVlc3RcXFxcTGVNZWRpY2FcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb2NyLW1lbnVzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9vY3ItbWVudXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vY3ItbWVudXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL29jci1tZW51cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXFVzZXJcXFxcRG9jdW1lbnRzXFxcXHNpZGUgcXVlc3RcXFxcTGVNZWRpY2FcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcb2NyLW1lbnVzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9vY3ItbWVudXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Focr-menus%2Froute&page=%2Fapi%2Focr-menus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Focr-menus%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./bedrock-config.ts/bedrock-config.ts":
/*!*********************************************!*\
  !*** ./bedrock-config.ts/bedrock-config.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CLAUDE_OPUS_MODEL_ID: () => (/* binding */ CLAUDE_OPUS_MODEL_ID),\n/* harmony export */   CLAUDE_OPUS_PROFILE_ARN: () => (/* binding */ CLAUDE_OPUS_PROFILE_ARN),\n/* harmony export */   CLAUDE_SONNET_MODEL_ID: () => (/* binding */ CLAUDE_SONNET_MODEL_ID),\n/* harmony export */   CLAUDE_SONNET_PROFILE_ARN: () => (/* binding */ CLAUDE_SONNET_PROFILE_ARN),\n/* harmony export */   bedrockClient: () => (/* binding */ bedrockClient),\n/* harmony export */   createMedicalProcessingPrompt: () => (/* binding */ createMedicalProcessingPrompt),\n/* harmony export */   deidentifyMedicalRecord: () => (/* binding */ deidentifyMedicalRecord),\n/* harmony export */   processMedicalRecordWithClaude: () => (/* binding */ processMedicalRecordWithClaude)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aws-sdk/client-bedrock-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-runtime/dist-es/BedrockRuntimeClient.js\");\n/* harmony import */ var _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-bedrock-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-runtime/dist-es/commands/InvokeModelCommand.js\");\n// ============================================================================\n// bedrock-config.ts\n// HIPAA-Compliant Claude 3 Medical Processing (AWS Bedrock Runtime)\n// ============================================================================\n\n// ---------------------------------------------------------------------------\n// AWS Bedrock Client\n// ---------------------------------------------------------------------------\nconst bedrockClient = new _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_0__.BedrockRuntimeClient({\n    region: process.env.AWS_REGION || process.env.AWS_BEDROCK_REGION || \"us-east-1\",\n    credentials: {\n        accessKeyId: process.env.AWS_BEDROCK_ACCESS_KEY_ID || process.env.AWS_ACCESS_KEY_ID || \"\",\n        secretAccessKey: process.env.AWS_BEDROCK_SECRET_ACCESS_KEY || process.env.AWS_SECRET_ACCESS_KEY || \"\"\n    }\n});\n// ---------------------------------------------------------------------------\n// Model IDs\n// ---------------------------------------------------------------------------\nconst CLAUDE_SONNET_PROFILE_ARN = process.env.BEDROCK_PROFILE_ARN || \"\";\nconst CLAUDE_OPUS_PROFILE_ARN = process.env.BEDROCK_OPUS_PROFILE_ARN || \"\";\nconst CLAUDE_SONNET_MODEL_ID = \"anthropic.claude-sonnet-4-5-20250929-v1:0\";\nconst CLAUDE_OPUS_MODEL_ID = \"anthropic.claude-opus-4-20250514-v1:0\";\n// ---------------------------------------------------------------------------\n// ðŸ”’ De-identification function (HIPAA compliant)\n// ---------------------------------------------------------------------------\nfunction deidentifyMedicalRecord(record) {\n    let deidentified = record;\n    const phiPatterns = [\n        /\\b[A-Z][a-z]+ [A-Z][a-z]+\\b/g,\n        /\\b\\d{3}-\\d{2}-\\d{4}\\b/g,\n        /\\b\\d{3}-\\d{3}-\\d{4}\\b/g,\n        /\\b\\(\\d{3}\\)\\s*\\d{3}-\\d{4}\\b/g,\n        /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/g,\n        /\\b\\d+\\s+[A-Za-z\\s]+(?:Street|St|Avenue|Ave|Road|Rd|Drive|Dr|Lane|Ln|Boulevard|Blvd)\\b/g,\n        /\\bMRN\\s*:?\\s*\\d+/gi,\n        /\\bPatient\\s*ID\\s*:?\\s*\\d+/gi,\n        /\\b(?:DOB|Date of Birth|Birth Date|Patient.*Birth)\\s*:?\\s*\\d{1,2}\\/\\d{1,2}\\/\\d{4}\\b/gi // DOB\n    ];\n    phiPatterns.forEach((pattern)=>{\n        deidentified = deidentified.replace(pattern, \"[REDACTED]\");\n    });\n    return deidentified;\n}\n// ---------------------------------------------------------------------------\n// PROMPT BUILDER (Lab reports only)\n// ---------------------------------------------------------------------------\nfunction createMedicalProcessingPrompt(record) {\n    // Lab report: strict JSON with reportDate + categories\n    return `You are a medical lab data processor. Extract lab test results from the medical report and return a clean JSON object with categorized tests.\n\nIMPORTANT GUIDELINES:\n1. Maintain HIPAA compliance - do not extract or infer any personally identifiable information\n2. Focus on medical data, test results, and clinical information\n3. Be precise with numerical values and units\n4. Flag any abnormal or critical values clearly\n5. Provide confidence scores for your extractions\n6. If information is not available, use null or empty arrays/objects\n7. Ensure all extracted data is medically accurate and clinically relevant\n\nCRITICAL: Return ONLY the JSON object. No markdown, no backticks, no explanations. Start with { and end with }.\n\nREQUIRED JSON STRUCTURE:\n{\n  \"reportDate\": \"YYYY-MM-DD format if found, otherwise null\",\n  \"confidence\": 0.95,\n  \"categories\": [\n    {\n      \"categoryName\": \"Complete Blood Count\",\n      \"confidence\": 0.9,\n      \"tests\": [\n        {\n          \"testName\": \"White Blood Cells\",\n          \"value\": \"7.2\",\n          \"unit\": \"K/uL\",\n          \"referenceLow\": \"4.5\",\n          \"referenceHigh\": \"11.0\",\n          \"status\": \"normal\",\n          \"confidence\": 0.9\n        }\n      ]\n    }\n  ]\n}\nRULES:\nDATE EXTRACTION RULES:\n- Look for lab report date, test date, collection date, reported date, specimen date, received date\n- Common date formats: MM/DD/YYYY, DD/MM/YYYY, YYYY-MM-DD, Month DD, YYYY, DD-MMM-YYYY, YYYY/MM/DD\n- If multiple dates found, use the most recent test/collection/specimen date\n- Return null if no date found\n- Format as YYYY-MM-DD (e.g., \"2024-01-15\")\n\nCATEGORY RULES:\n- Create categories dynamically as needed (CBC, Lipid Panel, Liver Function, Kidney Function, Blood Sugar, Thyroid Function, Electrolytes, Vitamins & Minerals, Hormones, CRP/ESR, Autoimmune markers, Urinalysis, Infection panels, Tumor markers, Cardiac markers, Coagulation studies, Toxicology, Genetic tests, others)\n- Do not place unrelated tests together\n- Always categorize every test\n\nSTATUS RULES:\n- Status must be one of: normal, high, low, critical\n- If above referenceHigh â†’ \"high\"\n- If below referenceLow â†’ \"low\"\n- If extremely abnormal â†’ \"critical\"\n- Otherwise â†’ \"normal\"\n\nVALUE RULES:\n- Use exact numeric values from the report\n- Use standardized units (K/uL instead of X10^9/L, mg/dL instead of complex notation)\n- Common unit conversions:\n  * White Blood Cells: \"K/uL\"\n  * Red Blood Cells: \"M/uL\"\n  * Hemoglobin: \"g/dL\"\n  * Platelets: \"K/uL\"\n  * Cholesterol: mg/dL or mmol/L\n  * Glucose: mg/dL or mmol/L\n  * Liver enzymes: U/L\n  * Creatinine: mg/dL or Î¼mol/L\n- Use \"N/A\" for missing values\n- Round numeric values to 1 decimal place\n\nSTATUS RULES:\n- Status MUST be: normal, high, low, critical\n- If above referenceHigh â†’ \"high\"\n- If below referenceLow â†’ \"low\"\n- If extremely abnormal â†’ \"critical\"\n- Otherwise â†’ \"normal\"\n\nLab Report Text:\n${record}\n\nCRITICAL: Return ONLY the JSON object. No markdown, no backticks, no explanations. Start with { and end with }.`;\n}\n// ---------------------------------------------------------------------------\n// CLAUDE INVOCATION\n// ---------------------------------------------------------------------------\n// Main processing function using Claude Sonnet 4.5 (with Opus 4 fallback for complex cases)\nasync function processMedicalRecordWithClaude(request) {\n    try {\n        // ðŸ”’ ALWAYS de-identify if requested\n        const safeRecord = request.deidentifiedData ? deidentifyMedicalRecord(request.medicalRecord) : request.medicalRecord;\n        // ðŸ” Complexity detection MUST use the deidentified version\n        const recordForDetection = safeRecord.toLowerCase();\n        // Create the prompt\n        const prompt = createMedicalProcessingPrompt(safeRecord);\n        // Decide model\n        let modelId = request.modelId || CLAUDE_SONNET_MODEL_ID;\n        let maxTokens = 4000;\n        let temperature = 0.1;\n        // Detect complex mode based on SAFE text (HIPAA-safe)\n        const isComplexCase = !request.modelId && (safeRecord.length > 10000 || recordForDetection.includes(\"complex\") || recordForDetection.includes(\"multiple\") || recordForDetection.includes(\"abnormal\"));\n        if (isComplexCase) {\n            modelId = CLAUDE_OPUS_MODEL_ID;\n            maxTokens = 8000;\n            temperature = 0.05;\n            console.log(\"\\uD83C\\uDFE5 Using Claude Opus 4 for complex medical case\");\n        } else {\n            console.log(\"\\uD83C\\uDFE5 Using model for medical processing:\", modelId);\n        }\n        // Resolve inference profile ARN\n        const resolvedModelId = modelId === CLAUDE_SONNET_MODEL_ID && CLAUDE_SONNET_PROFILE_ARN ? CLAUDE_SONNET_PROFILE_ARN : modelId === CLAUDE_OPUS_MODEL_ID && CLAUDE_OPUS_PROFILE_ARN ? CLAUDE_OPUS_PROFILE_ARN : modelId;\n        const input = {\n            modelId: resolvedModelId,\n            contentType: \"application/json\",\n            accept: \"application/json\",\n            body: JSON.stringify({\n                anthropic_version: \"bedrock-2023-05-31\",\n                max_tokens: maxTokens,\n                temperature: temperature,\n                messages: [\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ]\n            })\n        };\n        // Invoke model\n        const command = new _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_1__.InvokeModelCommand(input);\n        const response = await bedrockClient.send(command);\n        // Convert raw response into text\n        const rawText = await (async ()=>{\n            const body = response.body;\n            if (typeof body?.transformToByteArray === \"function\") {\n                return new TextDecoder().decode(await body.transformToByteArray());\n            }\n            if (body instanceof Uint8Array) {\n                return new TextDecoder().decode(body);\n            }\n            return String(body ?? \"\");\n        })();\n        const responseBody = JSON.parse(rawText || \"{}\");\n        const claudeResponse = responseBody?.content?.[0]?.text || \"\";\n        // Strip markdown\n        let cleaned = claudeResponse.trim().replace(/^```json\\s*/i, \"\").replace(/^```\\s*/i, \"\").replace(/```$/i, \"\").trim();\n        // Parse JSON (lab_report must provide categories JSON)\n        let parsed;\n        try {\n            parsed = JSON.parse(cleaned);\n        } catch (err) {\n            console.error(\"Failed JSON:\", cleaned.substring(0, 500));\n            throw new Error(\"Invalid JSON response from Claude\");\n        }\n        // Lab report required structure\n        if (!parsed.categories || !Array.isArray(parsed.categories)) {\n            throw new Error(\"Invalid lab report JSON: missing categories\");\n        }\n        return {\n            reportDate: parsed.reportDate ?? null,\n            confidence: parsed.confidence ?? 0.95,\n            categories: parsed.categories\n        };\n    } catch (error) {\n        console.error(\"Error processing medical record with Claude:\", error);\n        const msg = error instanceof Error ? error.message : \"Unknown error\";\n        if (msg.includes(\"UnrecognizedClientException\") || msg.includes(\"InvalidSignatureException\")) {\n            throw new Error(\"AWS Bedrock authentication failed.\");\n        }\n        if (msg.includes(\"ValidationException\")) {\n            throw new Error(\"AWS Bedrock validation error: \" + msg);\n        }\n        if (msg.includes(\"ModelNotReadyException\") || msg.includes(\"ThrottlingException\")) {\n            throw new Error(\"AWS Bedrock temporarily unavailable.\");\n        }\n        if (msg.includes(\"AccessDeniedException\")) {\n            throw new Error(\"Permission denied for AWS Bedrock.\");\n        }\n        throw new Error(\"Medical record processing failed: \" + msg);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9iZWRyb2NrLWNvbmZpZy50cy9iZWRyb2NrLWNvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsK0VBQStFO0FBQy9FLG9CQUFvQjtBQUNwQixvRUFBb0U7QUFDcEUsK0VBQStFO0FBRVk7QUFFM0YsOEVBQThFO0FBQzlFLHFCQUFxQjtBQUNyQiw4RUFBOEU7QUFDdkUsTUFBTUUsZ0JBQWdCLElBQUlGLGlGQUFvQkEsQ0FBQztJQUNwREcsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLElBQUlGLFFBQVFDLEdBQUcsQ0FBQ0Usa0JBQWtCLElBQUk7SUFDcEVDLGFBQWE7UUFDWEMsYUFBYUwsUUFBUUMsR0FBRyxDQUFDSyx5QkFBeUIsSUFBSU4sUUFBUUMsR0FBRyxDQUFDTSxpQkFBaUIsSUFBSTtRQUN2RkMsaUJBQWlCUixRQUFRQyxHQUFHLENBQUNRLDZCQUE2QixJQUFJVCxRQUFRQyxHQUFHLENBQUNTLHFCQUFxQixJQUFJO0lBQ3JHO0FBQ0YsR0FBRztBQUVILDhFQUE4RTtBQUM5RSxZQUFZO0FBQ1osOEVBQThFO0FBQ3ZFLE1BQU1DLDRCQUE0QlgsUUFBUUMsR0FBRyxDQUFDVyxtQkFBbUIsSUFBSSxHQUFHO0FBQ3hFLE1BQU1DLDBCQUEwQmIsUUFBUUMsR0FBRyxDQUFDYSx3QkFBd0IsSUFBSSxHQUFHO0FBQzNFLE1BQU1DLHlCQUF5Qiw0Q0FBNEM7QUFDM0UsTUFBTUMsdUJBQXVCLHdDQUF3QztBQWtENUUsOEVBQThFO0FBQzlFLGtEQUFrRDtBQUNsRCw4RUFBOEU7QUFDdkUsU0FBU0Msd0JBQXdCQyxNQUFjO0lBQ3BELElBQUlDLGVBQWVEO0lBRW5CLE1BQU1FLGNBQWM7UUFDbEI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBLHVGQUF1RixNQUFNO0tBQzlGO0lBRURBLFlBQVlDLE9BQU8sQ0FBQ0MsQ0FBQUE7UUFDbEJILGVBQWVBLGFBQWFJLE9BQU8sQ0FBQ0QsU0FBUztJQUMvQztJQUVB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UUFBUUssU0FBUyxDQUFDLEdBQUc7WUFDbkQsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsZ0NBQWdDO1FBQ2hDLElBQUksQ0FBQ0osT0FBT0ssVUFBVSxJQUFJLENBQUNDLE1BQU1DLE9BQU8sQ0FBQ1AsT0FBT0ssVUFBVSxHQUFHO1lBQzNELE1BQU0sSUFBSUQsTUFBTTtRQUNsQjtRQUNBLE9BQU87WUFDTEksWUFBWVIsT0FBT1EsVUFBVSxJQUFJO1lBQ2pDQyxZQUFZVCxPQUFPUyxVQUFVLElBQUk7WUFDakNKLFlBQVlMLE9BQU9LLFVBQVU7UUFDL0I7SUFDRixFQUFFLE9BQU9ILE9BQU87UUFDZC9CLFFBQVErQixLQUFLLENBQUMsZ0RBQWdEQTtRQUM5RCxNQUFNUSxNQUFNUixpQkFBaUJFLFFBQVFGLE1BQU1TLE9BQU8sR0FBRztRQUVyRCxJQUFJRCxJQUFJeEMsUUFBUSxDQUFDLGtDQUFrQ3dDLElBQUl4QyxRQUFRLENBQUMsOEJBQThCO1lBQzVGLE1BQU0sSUFBSWtDLE1BQU07UUFDbEI7UUFDQSxJQUFJTSxJQUFJeEMsUUFBUSxDQUFDLHdCQUF3QjtZQUN2QyxNQUFNLElBQUlrQyxNQUFNLG1DQUFtQ007UUFDckQ7UUFDQSxJQUFJQSxJQUFJeEMsUUFBUSxDQUFDLDZCQUE2QndDLElBQUl4QyxRQUFRLENBQUMsd0JBQXdCO1lBQ2pGLE1BQU0sSUFBSWtDLE1BQU07UUFDbEI7UUFDQSxJQUFJTSxJQUFJeEMsUUFBUSxDQUFDLDBCQUEwQjtZQUN6QyxNQUFNLElBQUlrQyxNQUFNO1FBQ2xCO1FBRUEsTUFBTSxJQUFJQSxNQUFNLHVDQUF1Q007SUFDekQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2xlbWVkaWNhLWNsaW5pYy1vY3IvLi9iZWRyb2NrLWNvbmZpZy50cy9iZWRyb2NrLWNvbmZpZy50cz9lYmE3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIGJlZHJvY2stY29uZmlnLnRzXG4vLyBISVBBQS1Db21wbGlhbnQgQ2xhdWRlIDMgTWVkaWNhbCBQcm9jZXNzaW5nIChBV1MgQmVkcm9jayBSdW50aW1lKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBCZWRyb2NrUnVudGltZUNsaWVudCwgSW52b2tlTW9kZWxDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1iZWRyb2NrLXJ1bnRpbWVcIjtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBBV1MgQmVkcm9jayBDbGllbnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IGJlZHJvY2tDbGllbnQgPSBuZXcgQmVkcm9ja1J1bnRpbWVDbGllbnQoe1xuICByZWdpb246IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgcHJvY2Vzcy5lbnYuQVdTX0JFRFJPQ0tfUkVHSU9OIHx8IFwidXMtZWFzdC0xXCIsXG4gIGNyZWRlbnRpYWxzOiB7XG4gICAgYWNjZXNzS2V5SWQ6IHByb2Nlc3MuZW52LkFXU19CRURST0NLX0FDQ0VTU19LRVlfSUQgfHwgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgfHwgXCJcIixcbiAgICBzZWNyZXRBY2Nlc3NLZXk6IHByb2Nlc3MuZW52LkFXU19CRURST0NLX1NFQ1JFVF9BQ0NFU1NfS0VZIHx8IHByb2Nlc3MuZW52LkFXU19TRUNSRVRfQUNDRVNTX0tFWSB8fCBcIlwiLFxuICB9XG59KTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNb2RlbCBJRHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IENMQVVERV9TT05ORVRfUFJPRklMRV9BUk4gPSBwcm9jZXNzLmVudi5CRURST0NLX1BST0ZJTEVfQVJOIHx8IFwiXCI7XG5leHBvcnQgY29uc3QgQ0xBVURFX09QVVNfUFJPRklMRV9BUk4gPSBwcm9jZXNzLmVudi5CRURST0NLX09QVVNfUFJPRklMRV9BUk4gfHwgXCJcIjtcbmV4cG9ydCBjb25zdCBDTEFVREVfU09OTkVUX01PREVMX0lEID0gXCJhbnRocm9waWMuY2xhdWRlLXNvbm5ldC00LTUtMjAyNTA5MjktdjE6MFwiO1xuZXhwb3J0IGNvbnN0IENMQVVERV9PUFVTX01PREVMX0lEID0gXCJhbnRocm9waWMuY2xhdWRlLW9wdXMtNC0yMDI1MDUxNC12MTowXCI7XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gUmVxdWVzdCArIFJlc3BvbnNlIEludGVyZmFjZXMgKENsYXVkZS1sZXZlbClcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2FsUmVjb3JkUHJvY2Vzc2luZ1JlcXVlc3Qge1xuICBtZWRpY2FsUmVjb3JkOiBzdHJpbmc7XG4gIHJlY29yZFR5cGU6IFwibGFiX3JlcG9ydFwiO1xuICBkZWlkZW50aWZpZWREYXRhPzogYm9vbGVhbjtcbiAgbW9kZWxJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZWRpY2FsUmVjb3JkUHJvY2Vzc2luZ1Jlc3BvbnNlIHtcbiAgcmVwb3J0RGF0ZTogc3RyaW5nIHwgbnVsbDtcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xuICBjYXRlZ29yaWVzOiBBcnJheTx7XG4gICAgY2F0ZWdvcnlOYW1lOiBzdHJpbmc7XG4gICAgY29uZmlkZW5jZTogbnVtYmVyO1xuICAgIHRlc3RzOiBBcnJheTx7XG4gICAgICB0ZXN0TmFtZTogc3RyaW5nO1xuICAgICAgdmFsdWU6IHN0cmluZztcbiAgICAgIHVuaXQ6IHN0cmluZztcbiAgICAgIHJlZmVyZW5jZUxvdzogc3RyaW5nO1xuICAgICAgcmVmZXJlbmNlSGlnaDogc3RyaW5nO1xuICAgICAgc3RhdHVzOiBzdHJpbmc7XG4gICAgICBjb25maWRlbmNlOiBudW1iZXI7XG4gICAgfT47XG4gIH0+O1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEZpbmFsIFVuaWZpZWQgRm9ybWF0IGZvciBVSSAocG9zdC1wcm9jZXNzaW5nKVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgaW50ZXJmYWNlIExhYlJlcG9ydERhdGEge1xuICByZXBvcnREYXRlOiBzdHJpbmcgfCBudWxsO1xuICBjb25maWRlbmNlOiBudW1iZXI7XG4gIGNhdGVnb3JpZXM6IEFycmF5PHtcbiAgICBjYXRlZ29yeU5hbWU6IHN0cmluZztcbiAgICBjb25maWRlbmNlOiBudW1iZXI7XG4gICAgdGVzdHM6IEFycmF5PHtcbiAgICAgIHRlc3ROYW1lOiBzdHJpbmc7XG4gICAgICB2YWx1ZTogc3RyaW5nO1xuICAgICAgdW5pdDogc3RyaW5nO1xuICAgICAgcmVmZXJlbmNlTG93OiBzdHJpbmc7XG4gICAgICByZWZlcmVuY2VIaWdoOiBzdHJpbmc7XG4gICAgICBzdGF0dXM6IFwibm9ybWFsXCIgfCBcImhpZ2hcIiB8IFwibG93XCIgfCBcImNyaXRpY2FsXCI7XG4gICAgICBjb25maWRlbmNlOiBudW1iZXI7XG4gICAgfT47XG4gIH0+O1xufVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyDwn5SSIERlLWlkZW50aWZpY2F0aW9uIGZ1bmN0aW9uIChISVBBQSBjb21wbGlhbnQpXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBmdW5jdGlvbiBkZWlkZW50aWZ5TWVkaWNhbFJlY29yZChyZWNvcmQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBkZWlkZW50aWZpZWQgPSByZWNvcmQ7XG5cbiAgY29uc3QgcGhpUGF0dGVybnMgPSBbXG4gICAgL1xcYltBLVpdW2Etel0rIFtBLVpdW2Etel0rXFxiL2csICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5hbWVzXG4gICAgL1xcYlxcZHszfS1cXGR7Mn0tXFxkezR9XFxiL2csICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNTTlxuICAgIC9cXGJcXGR7M30tXFxkezN9LVxcZHs0fVxcYi9nLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwaG9uZVxuICAgIC9cXGJcXChcXGR7M31cXClcXHMqXFxkezN9LVxcZHs0fVxcYi9nLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwaG9uZSBhbHRcbiAgICAvXFxiW0EtWmEtejAtOS5fJSstXStAW0EtWmEtejAtOS4tXStcXC5bQS1afGEtel17Mix9XFxiL2csICAgICAgICAgIC8vIGVtYWlsXG4gICAgL1xcYlxcZCtcXHMrW0EtWmEtelxcc10rKD86U3RyZWV0fFN0fEF2ZW51ZXxBdmV8Um9hZHxSZHxEcml2ZXxEcnxMYW5lfExufEJvdWxldmFyZHxCbHZkKVxcYi9nLFxuICAgIC9cXGJNUk5cXHMqOj9cXHMqXFxkKy9naSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1STlxuICAgIC9cXGJQYXRpZW50XFxzKklEXFxzKjo/XFxzKlxcZCsvZ2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJRFxuICAgIC9cXGIoPzpET0J8RGF0ZSBvZiBCaXJ0aHxCaXJ0aCBEYXRlfFBhdGllbnQuKkJpcnRoKVxccyo6P1xccypcXGR7MSwyfVxcL1xcZHsxLDJ9XFwvXFxkezR9XFxiL2dpIC8vIERPQlxuICBdO1xuXG4gIHBoaVBhdHRlcm5zLmZvckVhY2gocGF0dGVybiA9PiB7XG4gICAgZGVpZGVudGlmaWVkID0gZGVpZGVudGlmaWVkLnJlcGxhY2UocGF0dGVybiwgXCJbUkVEQUNURURdXCIpO1xuICB9KTtcblxuICByZXR1cm4gZGVpZGVudGlmaWVkO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFBST01QVCBCVUlMREVSIChMYWIgcmVwb3J0cyBvbmx5KVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWVkaWNhbFByb2Nlc3NpbmdQcm9tcHQocmVjb3JkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyBMYWIgcmVwb3J0OiBzdHJpY3QgSlNPTiB3aXRoIHJlcG9ydERhdGUgKyBjYXRlZ29yaWVzXG4gIHJldHVybiBgWW91IGFyZSBhIG1lZGljYWwgbGFiIGRhdGEgcHJvY2Vzc29yLiBFeHRyYWN0IGxhYiB0ZXN0IHJlc3VsdHMgZnJvbSB0aGUgbWVkaWNhbCByZXBvcnQgYW5kIHJldHVybiBhIGNsZWFuIEpTT04gb2JqZWN0IHdpdGggY2F0ZWdvcml6ZWQgdGVzdHMuXG5cbklNUE9SVEFOVCBHVUlERUxJTkVTOlxuMS4gTWFpbnRhaW4gSElQQUEgY29tcGxpYW5jZSAtIGRvIG5vdCBleHRyYWN0IG9yIGluZmVyIGFueSBwZXJzb25hbGx5IGlkZW50aWZpYWJsZSBpbmZvcm1hdGlvblxuMi4gRm9jdXMgb24gbWVkaWNhbCBkYXRhLCB0ZXN0IHJlc3VsdHMsIGFuZCBjbGluaWNhbCBpbmZvcm1hdGlvblxuMy4gQmUgcHJlY2lzZSB3aXRoIG51bWVyaWNhbCB2YWx1ZXMgYW5kIHVuaXRzXG40LiBGbGFnIGFueSBhYm5vcm1hbCBvciBjcml0aWNhbCB2YWx1ZXMgY2xlYXJseVxuNS4gUHJvdmlkZSBjb25maWRlbmNlIHNjb3JlcyBmb3IgeW91ciBleHRyYWN0aW9uc1xuNi4gSWYgaW5mb3JtYXRpb24gaXMgbm90IGF2YWlsYWJsZSwgdXNlIG51bGwgb3IgZW1wdHkgYXJyYXlzL29iamVjdHNcbjcuIEVuc3VyZSBhbGwgZXh0cmFjdGVkIGRhdGEgaXMgbWVkaWNhbGx5IGFjY3VyYXRlIGFuZCBjbGluaWNhbGx5IHJlbGV2YW50XG5cbkNSSVRJQ0FMOiBSZXR1cm4gT05MWSB0aGUgSlNPTiBvYmplY3QuIE5vIG1hcmtkb3duLCBubyBiYWNrdGlja3MsIG5vIGV4cGxhbmF0aW9ucy4gU3RhcnQgd2l0aCB7IGFuZCBlbmQgd2l0aCB9LlxuXG5SRVFVSVJFRCBKU09OIFNUUlVDVFVSRTpcbntcbiAgXCJyZXBvcnREYXRlXCI6IFwiWVlZWS1NTS1ERCBmb3JtYXQgaWYgZm91bmQsIG90aGVyd2lzZSBudWxsXCIsXG4gIFwiY29uZmlkZW5jZVwiOiAwLjk1LFxuICBcImNhdGVnb3JpZXNcIjogW1xuICAgIHtcbiAgICAgIFwiY2F0ZWdvcnlOYW1lXCI6IFwiQ29tcGxldGUgQmxvb2QgQ291bnRcIixcbiAgICAgIFwiY29uZmlkZW5jZVwiOiAwLjksXG4gICAgICBcInRlc3RzXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwidGVzdE5hbWVcIjogXCJXaGl0ZSBCbG9vZCBDZWxsc1wiLFxuICAgICAgICAgIFwidmFsdWVcIjogXCI3LjJcIixcbiAgICAgICAgICBcInVuaXRcIjogXCJLL3VMXCIsXG4gICAgICAgICAgXCJyZWZlcmVuY2VMb3dcIjogXCI0LjVcIixcbiAgICAgICAgICBcInJlZmVyZW5jZUhpZ2hcIjogXCIxMS4wXCIsXG4gICAgICAgICAgXCJzdGF0dXNcIjogXCJub3JtYWxcIixcbiAgICAgICAgICBcImNvbmZpZGVuY2VcIjogMC45XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9XG4gIF1cbn1cblJVTEVTOlxuREFURSBFWFRSQUNUSU9OIFJVTEVTOlxuLSBMb29rIGZvciBsYWIgcmVwb3J0IGRhdGUsIHRlc3QgZGF0ZSwgY29sbGVjdGlvbiBkYXRlLCByZXBvcnRlZCBkYXRlLCBzcGVjaW1lbiBkYXRlLCByZWNlaXZlZCBkYXRlXG4tIENvbW1vbiBkYXRlIGZvcm1hdHM6IE1NL0REL1lZWVksIEREL01NL1lZWVksIFlZWVktTU0tREQsIE1vbnRoIERELCBZWVlZLCBERC1NTU0tWVlZWSwgWVlZWS9NTS9ERFxuLSBJZiBtdWx0aXBsZSBkYXRlcyBmb3VuZCwgdXNlIHRoZSBtb3N0IHJlY2VudCB0ZXN0L2NvbGxlY3Rpb24vc3BlY2ltZW4gZGF0ZVxuLSBSZXR1cm4gbnVsbCBpZiBubyBkYXRlIGZvdW5kXG4tIEZvcm1hdCBhcyBZWVlZLU1NLUREIChlLmcuLCBcIjIwMjQtMDEtMTVcIilcblxuQ0FURUdPUlkgUlVMRVM6XG4tIENyZWF0ZSBjYXRlZ29yaWVzIGR5bmFtaWNhbGx5IGFzIG5lZWRlZCAoQ0JDLCBMaXBpZCBQYW5lbCwgTGl2ZXIgRnVuY3Rpb24sIEtpZG5leSBGdW5jdGlvbiwgQmxvb2QgU3VnYXIsIFRoeXJvaWQgRnVuY3Rpb24sIEVsZWN0cm9seXRlcywgVml0YW1pbnMgJiBNaW5lcmFscywgSG9ybW9uZXMsIENSUC9FU1IsIEF1dG9pbW11bmUgbWFya2VycywgVXJpbmFseXNpcywgSW5mZWN0aW9uIHBhbmVscywgVHVtb3IgbWFya2VycywgQ2FyZGlhYyBtYXJrZXJzLCBDb2FndWxhdGlvbiBzdHVkaWVzLCBUb3hpY29sb2d5LCBHZW5ldGljIHRlc3RzLCBvdGhlcnMpXG4tIERvIG5vdCBwbGFjZSB1bnJlbGF0ZWQgdGVzdHMgdG9nZXRoZXJcbi0gQWx3YXlzIGNhdGVnb3JpemUgZXZlcnkgdGVzdFxuXG5TVEFUVVMgUlVMRVM6XG4tIFN0YXR1cyBtdXN0IGJlIG9uZSBvZjogbm9ybWFsLCBoaWdoLCBsb3csIGNyaXRpY2FsXG4tIElmIGFib3ZlIHJlZmVyZW5jZUhpZ2gg4oaSIFwiaGlnaFwiXG4tIElmIGJlbG93IHJlZmVyZW5jZUxvdyDihpIgXCJsb3dcIlxuLSBJZiBleHRyZW1lbHkgYWJub3JtYWwg4oaSIFwiY3JpdGljYWxcIlxuLSBPdGhlcndpc2Ug4oaSIFwibm9ybWFsXCJcblxuVkFMVUUgUlVMRVM6XG4tIFVzZSBleGFjdCBudW1lcmljIHZhbHVlcyBmcm9tIHRoZSByZXBvcnRcbi0gVXNlIHN0YW5kYXJkaXplZCB1bml0cyAoSy91TCBpbnN0ZWFkIG9mIFgxMF45L0wsIG1nL2RMIGluc3RlYWQgb2YgY29tcGxleCBub3RhdGlvbilcbi0gQ29tbW9uIHVuaXQgY29udmVyc2lvbnM6XG4gICogV2hpdGUgQmxvb2QgQ2VsbHM6IFwiSy91TFwiXG4gICogUmVkIEJsb29kIENlbGxzOiBcIk0vdUxcIlxuICAqIEhlbW9nbG9iaW46IFwiZy9kTFwiXG4gICogUGxhdGVsZXRzOiBcIksvdUxcIlxuICAqIENob2xlc3Rlcm9sOiBtZy9kTCBvciBtbW9sL0xcbiAgKiBHbHVjb3NlOiBtZy9kTCBvciBtbW9sL0xcbiAgKiBMaXZlciBlbnp5bWVzOiBVL0xcbiAgKiBDcmVhdGluaW5lOiBtZy9kTCBvciDOvG1vbC9MXG4tIFVzZSBcIk4vQVwiIGZvciBtaXNzaW5nIHZhbHVlc1xuLSBSb3VuZCBudW1lcmljIHZhbHVlcyB0byAxIGRlY2ltYWwgcGxhY2VcblxuU1RBVFVTIFJVTEVTOlxuLSBTdGF0dXMgTVVTVCBiZTogbm9ybWFsLCBoaWdoLCBsb3csIGNyaXRpY2FsXG4tIElmIGFib3ZlIHJlZmVyZW5jZUhpZ2gg4oaSIFwiaGlnaFwiXG4tIElmIGJlbG93IHJlZmVyZW5jZUxvdyDihpIgXCJsb3dcIlxuLSBJZiBleHRyZW1lbHkgYWJub3JtYWwg4oaSIFwiY3JpdGljYWxcIlxuLSBPdGhlcndpc2Ug4oaSIFwibm9ybWFsXCJcblxuTGFiIFJlcG9ydCBUZXh0OlxuJHtyZWNvcmR9XG5cbkNSSVRJQ0FMOiBSZXR1cm4gT05MWSB0aGUgSlNPTiBvYmplY3QuIE5vIG1hcmtkb3duLCBubyBiYWNrdGlja3MsIG5vIGV4cGxhbmF0aW9ucy4gU3RhcnQgd2l0aCB7IGFuZCBlbmQgd2l0aCB9LmA7XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQ0xBVURFIElOVk9DQVRJT05cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTWFpbiBwcm9jZXNzaW5nIGZ1bmN0aW9uIHVzaW5nIENsYXVkZSBTb25uZXQgNC41ICh3aXRoIE9wdXMgNCBmYWxsYmFjayBmb3IgY29tcGxleCBjYXNlcylcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzTWVkaWNhbFJlY29yZFdpdGhDbGF1ZGUoXG4gIHJlcXVlc3Q6IE1lZGljYWxSZWNvcmRQcm9jZXNzaW5nUmVxdWVzdFxuKTogUHJvbWlzZTxNZWRpY2FsUmVjb3JkUHJvY2Vzc2luZ1Jlc3BvbnNlPiB7XG4gIHRyeSB7XG4gICAgLy8g8J+UkiBBTFdBWVMgZGUtaWRlbnRpZnkgaWYgcmVxdWVzdGVkXG4gICAgY29uc3Qgc2FmZVJlY29yZCA9IHJlcXVlc3QuZGVpZGVudGlmaWVkRGF0YVxuICAgICAgPyBkZWlkZW50aWZ5TWVkaWNhbFJlY29yZChyZXF1ZXN0Lm1lZGljYWxSZWNvcmQpXG4gICAgICA6IHJlcXVlc3QubWVkaWNhbFJlY29yZDtcblxuICAgIC8vIPCflI0gQ29tcGxleGl0eSBkZXRlY3Rpb24gTVVTVCB1c2UgdGhlIGRlaWRlbnRpZmllZCB2ZXJzaW9uXG4gICAgY29uc3QgcmVjb3JkRm9yRGV0ZWN0aW9uID0gc2FmZVJlY29yZC50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBwcm9tcHRcbiAgICBjb25zdCBwcm9tcHQgPSBjcmVhdGVNZWRpY2FsUHJvY2Vzc2luZ1Byb21wdChzYWZlUmVjb3JkKTtcblxuICAgIC8vIERlY2lkZSBtb2RlbFxuICAgIGxldCBtb2RlbElkID0gcmVxdWVzdC5tb2RlbElkIHx8IENMQVVERV9TT05ORVRfTU9ERUxfSUQ7XG4gICAgbGV0IG1heFRva2VucyA9IDQwMDA7XG4gICAgbGV0IHRlbXBlcmF0dXJlID0gMC4xO1xuXG4gICAgLy8gRGV0ZWN0IGNvbXBsZXggbW9kZSBiYXNlZCBvbiBTQUZFIHRleHQgKEhJUEFBLXNhZmUpXG4gICAgY29uc3QgaXNDb21wbGV4Q2FzZSA9XG4gICAgICAhcmVxdWVzdC5tb2RlbElkICYmXG4gICAgICAoXG4gICAgICAgIHNhZmVSZWNvcmQubGVuZ3RoID4gMTAwMDAgfHxcbiAgICAgICAgcmVjb3JkRm9yRGV0ZWN0aW9uLmluY2x1ZGVzKFwiY29tcGxleFwiKSB8fFxuICAgICAgICByZWNvcmRGb3JEZXRlY3Rpb24uaW5jbHVkZXMoXCJtdWx0aXBsZVwiKSB8fFxuICAgICAgICByZWNvcmRGb3JEZXRlY3Rpb24uaW5jbHVkZXMoXCJhYm5vcm1hbFwiKVxuICAgICAgKTtcblxuICAgIGlmIChpc0NvbXBsZXhDYXNlKSB7XG4gICAgICBtb2RlbElkID0gQ0xBVURFX09QVVNfTU9ERUxfSUQ7XG4gICAgICBtYXhUb2tlbnMgPSA4MDAwO1xuICAgICAgdGVtcGVyYXR1cmUgPSAwLjA1O1xuICAgICAgY29uc29sZS5sb2coXCLwn4+lIFVzaW5nIENsYXVkZSBPcHVzIDQgZm9yIGNvbXBsZXggbWVkaWNhbCBjYXNlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIvCfj6UgVXNpbmcgbW9kZWwgZm9yIG1lZGljYWwgcHJvY2Vzc2luZzpcIiwgbW9kZWxJZCk7XG4gICAgfVxuXG4gICAgLy8gUmVzb2x2ZSBpbmZlcmVuY2UgcHJvZmlsZSBBUk5cbiAgICBjb25zdCByZXNvbHZlZE1vZGVsSWQgPVxuICAgICAgbW9kZWxJZCA9PT0gQ0xBVURFX1NPTk5FVF9NT0RFTF9JRCAmJiBDTEFVREVfU09OTkVUX1BST0ZJTEVfQVJOXG4gICAgICAgID8gQ0xBVURFX1NPTk5FVF9QUk9GSUxFX0FSTlxuICAgICAgICA6IG1vZGVsSWQgPT09IENMQVVERV9PUFVTX01PREVMX0lEICYmIENMQVVERV9PUFVTX1BST0ZJTEVfQVJOXG4gICAgICAgICAgPyBDTEFVREVfT1BVU19QUk9GSUxFX0FSTlxuICAgICAgICAgIDogbW9kZWxJZDtcblxuICAgIGNvbnN0IGlucHV0ID0ge1xuICAgICAgbW9kZWxJZDogcmVzb2x2ZWRNb2RlbElkLFxuICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgYWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYW50aHJvcGljX3ZlcnNpb246IFwiYmVkcm9jay0yMDIzLTA1LTMxXCIsXG4gICAgICAgIG1heF90b2tlbnM6IG1heFRva2VucyxcbiAgICAgICAgdGVtcGVyYXR1cmU6IHRlbXBlcmF0dXJlLFxuICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHByb21wdCB9XVxuICAgICAgfSlcbiAgICB9O1xuXG4gICAgLy8gSW52b2tlIG1vZGVsXG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBJbnZva2VNb2RlbENvbW1hbmQoaW5wdXQpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmVkcm9ja0NsaWVudC5zZW5kKGNvbW1hbmQpO1xuXG4gICAgLy8gQ29udmVydCByYXcgcmVzcG9uc2UgaW50byB0ZXh0XG4gICAgY29uc3QgcmF3VGV4dCA9IGF3YWl0IChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBib2R5OiBhbnkgPSAocmVzcG9uc2UgYXMgYW55KS5ib2R5O1xuICAgICAgaWYgKHR5cGVvZiBib2R5Py50cmFuc2Zvcm1Ub0J5dGVBcnJheSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYXdhaXQgYm9keS50cmFuc2Zvcm1Ub0J5dGVBcnJheSgpKTtcbiAgICAgIH1cbiAgICAgIGlmIChib2R5IGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGJvZHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFN0cmluZyhib2R5ID8/IFwiXCIpO1xuICAgIH0pKCk7XG5cbiAgICBjb25zdCByZXNwb25zZUJvZHkgPSBKU09OLnBhcnNlKHJhd1RleHQgfHwgXCJ7fVwiKTtcbiAgICBjb25zdCBjbGF1ZGVSZXNwb25zZSA9IHJlc3BvbnNlQm9keT8uY29udGVudD8uWzBdPy50ZXh0IHx8IFwiXCI7XG5cbiAgICAvLyBTdHJpcCBtYXJrZG93blxuICAgIGxldCBjbGVhbmVkID0gY2xhdWRlUmVzcG9uc2UudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXmBgYGpzb25cXHMqL2ksIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXmBgYFxccyovaSwgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9gYGAkL2ksIFwiXCIpXG4gICAgICAudHJpbSgpO1xuXG5cbiAgICAvLyBQYXJzZSBKU09OIChsYWJfcmVwb3J0IG11c3QgcHJvdmlkZSBjYXRlZ29yaWVzIEpTT04pXG4gICAgbGV0IHBhcnNlZDogYW55O1xuICAgIHRyeSB7XG4gICAgICBwYXJzZWQgPSBKU09OLnBhcnNlKGNsZWFuZWQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCBKU09OOlwiLCBjbGVhbmVkLnN1YnN0cmluZygwLCA1MDApKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSlNPTiByZXNwb25zZSBmcm9tIENsYXVkZVwiKTtcbiAgICB9XG5cbiAgICAvLyBMYWIgcmVwb3J0IHJlcXVpcmVkIHN0cnVjdHVyZVxuICAgIGlmICghcGFyc2VkLmNhdGVnb3JpZXMgfHwgIUFycmF5LmlzQXJyYXkocGFyc2VkLmNhdGVnb3JpZXMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxhYiByZXBvcnQgSlNPTjogbWlzc2luZyBjYXRlZ29yaWVzXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcmVwb3J0RGF0ZTogcGFyc2VkLnJlcG9ydERhdGUgPz8gbnVsbCxcbiAgICAgIGNvbmZpZGVuY2U6IHBhcnNlZC5jb25maWRlbmNlID8/IDAuOTUsXG4gICAgICBjYXRlZ29yaWVzOiBwYXJzZWQuY2F0ZWdvcmllc1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgbWVkaWNhbCByZWNvcmQgd2l0aCBDbGF1ZGU6XCIsIGVycm9yKTtcbiAgICBjb25zdCBtc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiO1xuXG4gICAgaWYgKG1zZy5pbmNsdWRlcyhcIlVucmVjb2duaXplZENsaWVudEV4Y2VwdGlvblwiKSB8fCBtc2cuaW5jbHVkZXMoXCJJbnZhbGlkU2lnbmF0dXJlRXhjZXB0aW9uXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBV1MgQmVkcm9jayBhdXRoZW50aWNhdGlvbiBmYWlsZWQuXCIpO1xuICAgIH1cbiAgICBpZiAobXNnLmluY2x1ZGVzKFwiVmFsaWRhdGlvbkV4Y2VwdGlvblwiKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVdTIEJlZHJvY2sgdmFsaWRhdGlvbiBlcnJvcjogXCIgKyBtc2cpO1xuICAgIH1cbiAgICBpZiAobXNnLmluY2x1ZGVzKFwiTW9kZWxOb3RSZWFkeUV4Y2VwdGlvblwiKSB8fCBtc2cuaW5jbHVkZXMoXCJUaHJvdHRsaW5nRXhjZXB0aW9uXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBV1MgQmVkcm9jayB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS5cIik7XG4gICAgfVxuICAgIGlmIChtc2cuaW5jbHVkZXMoXCJBY2Nlc3NEZW5pZWRFeGNlcHRpb25cIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlBlcm1pc3Npb24gZGVuaWVkIGZvciBBV1MgQmVkcm9jay5cIik7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTWVkaWNhbCByZWNvcmQgcHJvY2Vzc2luZyBmYWlsZWQ6IFwiICsgbXNnKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkJlZHJvY2tSdW50aW1lQ2xpZW50IiwiSW52b2tlTW9kZWxDb21tYW5kIiwiYmVkcm9ja0NsaWVudCIsInJlZ2lvbiIsInByb2Nlc3MiLCJlbnYiLCJBV1NfUkVHSU9OIiwiQVdTX0JFRFJPQ0tfUkVHSU9OIiwiY3JlZGVudGlhbHMiLCJhY2Nlc3NLZXlJZCIsIkFXU19CRURST0NLX0FDQ0VTU19LRVlfSUQiLCJBV1NfQUNDRVNTX0tFWV9JRCIsInNlY3JldEFjY2Vzc0tleSIsIkFXU19CRURST0NLX1NFQ1JFVF9BQ0NFU1NfS0VZIiwiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIiwiQ0xBVURFX1NPTk5FVF9QUk9GSUxFX0FSTiIsIkJFRFJPQ0tfUFJPRklMRV9BUk4iLCJDTEFVREVfT1BVU19QUk9GSUxFX0FSTiIsIkJFRFJPQ0tfT1BVU19QUk9GSUxFX0FSTiIsIkNMQVVERV9TT05ORVRfTU9ERUxfSUQiLCJDTEFVREVfT1BVU19NT0RFTF9JRCIsImRlaWRlbnRpZnlNZWRpY2FsUmVjb3JkIiwicmVjb3JkIiwiZGVpZGVudGlmaWVkIiwicGhpUGF0dGVybnMiLCJmb3JFYWNoIiwicGF0dGVybiIsInJlcGxhY2UiLCJjcmVhdGVNZWRpY2FsUHJvY2Vzc2luZ1Byb21wdCIsInByb2Nlc3NNZWRpY2FsUmVjb3JkV2l0aENsYXVkZSIsInJlcXVlc3QiLCJzYWZlUmVjb3JkIiwiZGVpZGVudGlmaWVkRGF0YSIsIm1lZGljYWxSZWNvcmQiLCJyZWNvcmRGb3JEZXRlY3Rpb24iLCJ0b0xvd2VyQ2FzZSIsInByb21wdCIsIm1vZGVsSWQiLCJtYXhUb2tlbnMiLCJ0ZW1wZXJhdHVyZSIsImlzQ29tcGxleENhc2UiLCJsZW5ndGgiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJsb2ciLCJyZXNvbHZlZE1vZGVsSWQiLCJpbnB1dCIsImNvbnRlbnRUeXBlIiwiYWNjZXB0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbnRocm9waWNfdmVyc2lvbiIsIm1heF90b2tlbnMiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwiY29tbWFuZCIsInJlc3BvbnNlIiwic2VuZCIsInJhd1RleHQiLCJ0cmFuc2Zvcm1Ub0J5dGVBcnJheSIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwiVWludDhBcnJheSIsIlN0cmluZyIsInJlc3BvbnNlQm9keSIsInBhcnNlIiwiY2xhdWRlUmVzcG9uc2UiLCJ0ZXh0IiwiY2xlYW5lZCIsInRyaW0iLCJwYXJzZWQiLCJlcnIiLCJlcnJvciIsInN1YnN0cmluZyIsIkVycm9yIiwiY2F0ZWdvcmllcyIsIkFycmF5IiwiaXNBcnJheSIsInJlcG9ydERhdGUiLCJjb25maWRlbmNlIiwibXNnIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./bedrock-config.ts/bedrock-config.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/api/ocr-menus/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/ocr-menus/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _services_ocr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../services/ocr */ \"(rsc)/./src/services/ocr.ts\");\n/* harmony import */ var _services_aiExtractor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../services/aiExtractor */ \"(rsc)/./src/services/aiExtractor.ts\");\n/* harmony import */ var _services_normalizer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../services/normalizer */ \"(rsc)/./src/services/normalizer.ts\");\n\n\n\n\n/**\r\n * POST /api/ocr-menus\r\n * -------------------\r\n * Expected FormData fields:\r\n * - file: File (single)  â† used by medical-records/medical-records/MedicalRecordsView.tsx\r\n * - files[]: File (optional array, same contract used by PDFProcessor fallback)\r\n * - mode: 'clinic_menu' | 'lab_report' (optional discriminator; defaults to clinic menu)\r\n *\r\n * This route is invoked by the existing medical records UI and the upcoming\r\n * clinic-menu management UI. It mirrors the FormData contract already used by\r\n * PDFProcessor.tsx so uploads do not need to change.\r\n */ async function POST(req) {\n    try {\n        const { batchId, ocrPages, filesMeta } = await (0,_services_ocr__WEBPACK_IMPORTED_MODULE_1__.handleUploadAndExtractOcr)(req);\n        const packages = await (0,_services_aiExtractor__WEBPACK_IMPORTED_MODULE_2__.extractPackagesFromOcrText)(ocrPages);\n        const summary = (0,_services_normalizer__WEBPACK_IMPORTED_MODULE_3__.validatePackageBatch)(packages);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            batch_id: batchId,\n            files: filesMeta,\n            packages,\n            summary: {\n                total: packages.length,\n                valid: summary.validPackages.length,\n                withWarnings: summary.packagesWithWarnings.length,\n                invalid: summary.invalidPackages.length\n            }\n        });\n    } catch (error) {\n        console.error(\"OCR menu processing failed:\", error);\n        const status = error?.status || 500;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message: error?.message || \"Medical record processing failed.\"\n        }, {\n            status\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9vY3ItbWVudXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0Q7QUFDVTtBQUNTO0FBQ1A7QUFFcEU7Ozs7Ozs7Ozs7O0NBV0MsR0FDTSxlQUFlSSxLQUFLQyxHQUFnQjtJQUN6QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFFBQVEsRUFBRUMsU0FBUyxFQUFFLEdBQUcsTUFBTVAsd0VBQXlCQSxDQUFDSTtRQUN6RSxNQUFNSSxXQUFXLE1BQU1QLGlGQUEwQkEsQ0FBQ0s7UUFDbEQsTUFBTUcsVUFBVVAsMEVBQW9CQSxDQUFDTTtRQUVyQyxPQUFPVCxxREFBWUEsQ0FBQ1csSUFBSSxDQUFDO1lBQ3ZCQyxTQUFTO1lBQ1RDLFVBQVVQO1lBQ1ZRLE9BQU9OO1lBQ1BDO1lBQ0FDLFNBQVM7Z0JBQ1BLLE9BQU9OLFNBQVNPLE1BQU07Z0JBQ3RCQyxPQUFPUCxRQUFRUSxhQUFhLENBQUNGLE1BQU07Z0JBQ25DRyxjQUFjVCxRQUFRVSxvQkFBb0IsQ0FBQ0osTUFBTTtnQkFDakRLLFNBQVNYLFFBQVFZLGVBQWUsQ0FBQ04sTUFBTTtZQUN6QztRQUNGO0lBQ0YsRUFBRSxPQUFPTyxPQUFZO1FBQ25CQyxRQUFRRCxLQUFLLENBQUMsK0JBQStCQTtRQUM3QyxNQUFNRSxTQUFTRixPQUFPRSxVQUFVO1FBQ2hDLE9BQU96QixxREFBWUEsQ0FBQ1csSUFBSSxDQUN0QjtZQUNFQyxTQUFTO1lBQ1RjLFNBQVNILE9BQU9HLFdBQVc7UUFDN0IsR0FDQTtZQUFFRDtRQUFPO0lBRWI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2xlbWVkaWNhLWNsaW5pYy1vY3IvLi9zcmMvYXBwL2FwaS9vY3ItbWVudXMvcm91dGUudHM/YjAxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IGhhbmRsZVVwbG9hZEFuZEV4dHJhY3RPY3IgfSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvb2NyXCI7XHJcbmltcG9ydCB7IGV4dHJhY3RQYWNrYWdlc0Zyb21PY3JUZXh0IH0gZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL2FpRXh0cmFjdG9yXCI7XHJcbmltcG9ydCB7IHZhbGlkYXRlUGFja2FnZUJhdGNoIH0gZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL25vcm1hbGl6ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBQT1NUIC9hcGkvb2NyLW1lbnVzXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogRXhwZWN0ZWQgRm9ybURhdGEgZmllbGRzOlxyXG4gKiAtIGZpbGU6IEZpbGUgKHNpbmdsZSkgIOKGkCB1c2VkIGJ5IG1lZGljYWwtcmVjb3Jkcy9tZWRpY2FsLXJlY29yZHMvTWVkaWNhbFJlY29yZHNWaWV3LnRzeFxyXG4gKiAtIGZpbGVzW106IEZpbGUgKG9wdGlvbmFsIGFycmF5LCBzYW1lIGNvbnRyYWN0IHVzZWQgYnkgUERGUHJvY2Vzc29yIGZhbGxiYWNrKVxyXG4gKiAtIG1vZGU6ICdjbGluaWNfbWVudScgfCAnbGFiX3JlcG9ydCcgKG9wdGlvbmFsIGRpc2NyaW1pbmF0b3I7IGRlZmF1bHRzIHRvIGNsaW5pYyBtZW51KVxyXG4gKlxyXG4gKiBUaGlzIHJvdXRlIGlzIGludm9rZWQgYnkgdGhlIGV4aXN0aW5nIG1lZGljYWwgcmVjb3JkcyBVSSBhbmQgdGhlIHVwY29taW5nXHJcbiAqIGNsaW5pYy1tZW51IG1hbmFnZW1lbnQgVUkuIEl0IG1pcnJvcnMgdGhlIEZvcm1EYXRhIGNvbnRyYWN0IGFscmVhZHkgdXNlZCBieVxyXG4gKiBQREZQcm9jZXNzb3IudHN4IHNvIHVwbG9hZHMgZG8gbm90IG5lZWQgdG8gY2hhbmdlLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGJhdGNoSWQsIG9jclBhZ2VzLCBmaWxlc01ldGEgfSA9IGF3YWl0IGhhbmRsZVVwbG9hZEFuZEV4dHJhY3RPY3IocmVxKTtcclxuICAgIGNvbnN0IHBhY2thZ2VzID0gYXdhaXQgZXh0cmFjdFBhY2thZ2VzRnJvbU9jclRleHQob2NyUGFnZXMpO1xyXG4gICAgY29uc3Qgc3VtbWFyeSA9IHZhbGlkYXRlUGFja2FnZUJhdGNoKHBhY2thZ2VzKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBiYXRjaF9pZDogYmF0Y2hJZCxcclxuICAgICAgZmlsZXM6IGZpbGVzTWV0YSxcclxuICAgICAgcGFja2FnZXMsXHJcbiAgICAgIHN1bW1hcnk6IHtcclxuICAgICAgICB0b3RhbDogcGFja2FnZXMubGVuZ3RoLFxyXG4gICAgICAgIHZhbGlkOiBzdW1tYXJ5LnZhbGlkUGFja2FnZXMubGVuZ3RoLFxyXG4gICAgICAgIHdpdGhXYXJuaW5nczogc3VtbWFyeS5wYWNrYWdlc1dpdGhXYXJuaW5ncy5sZW5ndGgsXHJcbiAgICAgICAgaW52YWxpZDogc3VtbWFyeS5pbnZhbGlkUGFja2FnZXMubGVuZ3RoLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIk9DUiBtZW51IHByb2Nlc3NpbmcgZmFpbGVkOlwiLCBlcnJvcik7XHJcbiAgICBjb25zdCBzdGF0dXMgPSBlcnJvcj8uc3RhdHVzIHx8IDUwMDtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yPy5tZXNzYWdlIHx8IFwiTWVkaWNhbCByZWNvcmQgcHJvY2Vzc2luZyBmYWlsZWQuXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiaGFuZGxlVXBsb2FkQW5kRXh0cmFjdE9jciIsImV4dHJhY3RQYWNrYWdlc0Zyb21PY3JUZXh0IiwidmFsaWRhdGVQYWNrYWdlQmF0Y2giLCJQT1NUIiwicmVxIiwiYmF0Y2hJZCIsIm9jclBhZ2VzIiwiZmlsZXNNZXRhIiwicGFja2FnZXMiLCJzdW1tYXJ5IiwianNvbiIsInN1Y2Nlc3MiLCJiYXRjaF9pZCIsImZpbGVzIiwidG90YWwiLCJsZW5ndGgiLCJ2YWxpZCIsInZhbGlkUGFja2FnZXMiLCJ3aXRoV2FybmluZ3MiLCJwYWNrYWdlc1dpdGhXYXJuaW5ncyIsImludmFsaWQiLCJpbnZhbGlkUGFja2FnZXMiLCJlcnJvciIsImNvbnNvbGUiLCJzdGF0dXMiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ocr-menus/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/matching.ts":
/*!*****************************!*\
  !*** ./src/lib/matching.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   matchHospitalName: () => (/* binding */ matchHospitalName),\n/* harmony export */   matchTreatmentName: () => (/* binding */ matchTreatmentName),\n/* harmony export */   matchingReferenceData: () => (/* binding */ matchingReferenceData)\n/* harmony export */ });\nconst HOSPITAL_NAMES = [\n    \"Bumrungrad Intl\",\n    \"Mery Plastic Surgery\",\n    \"Pruksa Clinic\",\n    \"SLC hospital\",\n    \"Panacee Medical Center\",\n    \"The Square Clinic\",\n    \"Vethjani Hospital\",\n    \"Phuket Plastic Surgery Institute\",\n    \"Wansiri Hospital\",\n    \"Prince Court\",\n    \"Raffles Medical\",\n    \"Sunway Medical Center\",\n    \"Thomson Hospital\",\n    \"China Medical University Hospital - ä¸­åœ‹é†«è—¥å¤§å­¸é™„è¨­é†«é™¢\"\n];\nconst TREATMENT_NAMES = [\n    \"Health Checkup\",\n    \"Cancer Screening\",\n    \"MRI Scan\",\n    \"CT Scan\",\n    \"PET-CT Scan\",\n    \"Blood Test\",\n    \"Cardiac Screening\",\n    \"Hip & Knee Replacement\",\n    \"Spinal Surgery\",\n    \"Brain Tumor Surgery\",\n    \"Heart Valve Repair\",\n    \"Kidney Transplant\",\n    \"Liver Transplant\",\n    \"LASIK Surgery\",\n    \"Cataract Surgery\",\n    \"Glaucoma Surgery\",\n    \"Gastric Sleeve\",\n    \"Gastric Bypass\",\n    \"Endoscopic Sleeve Gastroplasty\",\n    \"Gender-Affirming Surgery\",\n    \"Pacemaker Implantation\",\n    \"Prostate Surgery\",\n    \"Vasectomy Reversal\",\n    \"Hysterectomy\",\n    \"Fibroid Removal\",\n    \"Corneal Transplant\",\n    \"Deep Brain Stimulation (DBS)\",\n    \"Epilepsy Surgery\",\n    \"Spinal Cord Surgery\",\n    \"Facial Plastic Surgery\",\n    \"Breast Augmentation\",\n    \"Rhinoplasty\",\n    \"Liposuction\",\n    \"Botox Treatment\",\n    \"Dermal Fillers\",\n    \"Hair Transplant\",\n    \"Laser Resurfacing\",\n    \"Buccal Fat Removal\",\n    \"Chin Augmentation\",\n    \"Teeth Whitening\",\n    \"Veneer\",\n    \"Dental Implants\",\n    \"Root Canal\",\n    \"IVF (In Vitro Fertilization)\",\n    \"IUI (Intrauterine Insemination)\",\n    \"Egg Freezing\",\n    \"HRT (Hormone Replacement Therapy)\",\n    \"Chemotherapy\",\n    \"Radiation Therapy\",\n    \"Immunotherapy\",\n    \"Proton Therapy\",\n    \"Detox Retreats\",\n    \"IV Therapy\",\n    \"Anti-Aging Therapy\",\n    \"Physiotherapy\",\n    \"Acupuncture\",\n    \"Ayurveda\",\n    \"Thai Massage\"\n];\nconst MIN_HOSPITAL_SCORE = 0.72;\nconst MIN_TREATMENT_SCORE = 0.7;\n/**\r\n * Normalizes a name string by removing punctuation and lowercasing.\r\n */ function normalize(value) {\n    return value.toLowerCase().replace(/[^a-z0-9]+/g, \"\").trim();\n}\n/**\r\n * Computes Levenshtein distance between two strings.\r\n */ function levenshtein(a, b) {\n    if (a === b) return 0;\n    if (!a.length) return b.length;\n    if (!b.length) return a.length;\n    const matrix = Array.from({\n        length: a.length + 1\n    }, (_, i)=>Array.from({\n            length: b.length + 1\n        }, (_, j)=>i === 0 ? j : j === 0 ? i : 0));\n    for(let i = 1; i <= a.length; i++){\n        for(let j = 1; j <= b.length; j++){\n            if (a[i - 1] === b[j - 1]) {\n                matrix[i][j] = matrix[i - 1][j - 1];\n            } else {\n                matrix[i][j] = Math.min(matrix[i - 1][j], matrix[i][j - 1], matrix[i - 1][j - 1]) + 1;\n            }\n        }\n    }\n    return matrix[a.length][b.length];\n}\n/**\r\n * Calculates a similarity score between two strings based on Levenshtein distance.\r\n */ function similarityScore(source, candidate) {\n    if (!source || !candidate) return 0;\n    const normalizedSource = normalize(source);\n    const normalizedCandidate = normalize(candidate);\n    if (!normalizedSource.length || !normalizedCandidate.length) return 0;\n    const distance = levenshtein(normalizedSource, normalizedCandidate);\n    const longest = Math.max(normalizedSource.length, normalizedCandidate.length);\n    return 1 - distance / longest;\n}\n/**\r\n * Attempts to fuzzy-match a raw hospital name string against the curated list\r\n * from BULK_CSV_UPLOAD_GUIDE.md.\r\n */ function matchHospitalName(raw) {\n    if (!raw?.trim()) {\n        return {\n            value: null,\n            score: 0\n        };\n    }\n    let bestMatch = {\n        value: null,\n        score: 0\n    };\n    for (const hospital of HOSPITAL_NAMES){\n        const score = similarityScore(raw, hospital);\n        if (score > bestMatch.score) {\n            bestMatch = {\n                value: hospital,\n                score\n            };\n        }\n    }\n    if (bestMatch.score < MIN_HOSPITAL_SCORE) {\n        return {\n            value: null,\n            score: bestMatch.score\n        };\n    }\n    return bestMatch;\n}\n/**\r\n * Attempts to fuzzy-match a raw treatment name string against\r\n * the known set of treatment names from BULK_CSV_UPLOAD_GUIDE.md.\r\n */ function matchTreatmentName(raw) {\n    if (!raw?.trim()) {\n        return {\n            value: null,\n            score: 0\n        };\n    }\n    let bestMatch = {\n        value: null,\n        score: 0\n    };\n    for (const treatment of TREATMENT_NAMES){\n        const score = similarityScore(raw, treatment);\n        if (score > bestMatch.score) {\n            bestMatch = {\n                value: treatment,\n                score\n            };\n        }\n    }\n    if (bestMatch.score < MIN_TREATMENT_SCORE) {\n        return {\n            value: null,\n            score: bestMatch.score\n        };\n    }\n    return bestMatch;\n}\nconst matchingReferenceData = {\n    hospitals: HOSPITAL_NAMES,\n    treatments: TREATMENT_NAMES\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVlyQztBQUNkLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZW1lZGljYS1jbGluaWMtb2NyLy4vc3JjL2xpYi9tYXRjaGluZy50cz8zNWYzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEhPU1BJVEFMX05BTUVTID0gW1xyXG4gIFwiQnVtcnVuZ3JhZCBJbnRsXCIsXHJcbiAgXCJNZXJ5IFBsYXN0aWMgU3VyZ2VyeVwiLFxyXG4gIFwiUHJ1a3NhIENsaW5pY1wiLFxyXG4gIFwiU0xDIGhvc3BpdGFsXCIsXHJcbiAgXCJQYW5hY2VlIE1lZGljYWwgQ2VudGVyXCIsXHJcbiAgXCJUaGUgU3F1YXJlIENsaW5pY1wiLFxyXG4gIFwiVmV0aGphbmkgSG9zcGl0YWxcIixcclxuICBcIlBodWtldCBQbGFzdGljIFN1cmdlcnkgSW5zdGl0dXRlXCIsXHJcbiAgXCJXYW5zaXJpIEhvc3BpdGFsXCIsXHJcbiAgXCJQcmluY2UgQ291cnRcIixcclxuICBcIlJhZmZsZXMgTWVkaWNhbFwiLFxyXG4gIFwiU3Vud2F5IE1lZGljYWwgQ2VudGVyXCIsXHJcbiAgXCJUaG9tc29uIEhvc3BpdGFsXCIsXHJcbiAgXCJDaGluYSBNZWRpY2FsIFVuaXZlcnNpdHkgSG9zcGl0YWwgLSDkuK3lnIvphqvol6XlpKflrbjpmYToqK3phqvpmaJcIixcclxuXTtcclxuXHJcbmNvbnN0IFRSRUFUTUVOVF9OQU1FUyA9IFtcclxuICBcIkhlYWx0aCBDaGVja3VwXCIsXHJcbiAgXCJDYW5jZXIgU2NyZWVuaW5nXCIsXHJcbiAgXCJNUkkgU2NhblwiLFxyXG4gIFwiQ1QgU2NhblwiLFxyXG4gIFwiUEVULUNUIFNjYW5cIixcclxuICBcIkJsb29kIFRlc3RcIixcclxuICBcIkNhcmRpYWMgU2NyZWVuaW5nXCIsXHJcbiAgXCJIaXAgJiBLbmVlIFJlcGxhY2VtZW50XCIsXHJcbiAgXCJTcGluYWwgU3VyZ2VyeVwiLFxyXG4gIFwiQnJhaW4gVHVtb3IgU3VyZ2VyeVwiLFxyXG4gIFwiSGVhcnQgVmFsdmUgUmVwYWlyXCIsXHJcbiAgXCJLaWRuZXkgVHJhbnNwbGFudFwiLFxyXG4gIFwiTGl2ZXIgVHJhbnNwbGFudFwiLFxyXG4gIFwiTEFTSUsgU3VyZ2VyeVwiLFxyXG4gIFwiQ2F0YXJhY3QgU3VyZ2VyeVwiLFxyXG4gIFwiR2xhdWNvbWEgU3VyZ2VyeVwiLFxyXG4gIFwiR2FzdHJpYyBTbGVldmVcIixcclxuICBcIkdhc3RyaWMgQnlwYXNzXCIsXHJcbiAgXCJFbmRvc2NvcGljIFNsZWV2ZSBHYXN0cm9wbGFzdHlcIixcclxuICBcIkdlbmRlci1BZmZpcm1pbmcgU3VyZ2VyeVwiLFxyXG4gIFwiUGFjZW1ha2VyIEltcGxhbnRhdGlvblwiLFxyXG4gIFwiUHJvc3RhdGUgU3VyZ2VyeVwiLFxyXG4gIFwiVmFzZWN0b215IFJldmVyc2FsXCIsXHJcbiAgXCJIeXN0ZXJlY3RvbXlcIixcclxuICBcIkZpYnJvaWQgUmVtb3ZhbFwiLFxyXG4gIFwiQ29ybmVhbCBUcmFuc3BsYW50XCIsXHJcbiAgXCJEZWVwIEJyYWluIFN0aW11bGF0aW9uIChEQlMpXCIsXHJcbiAgXCJFcGlsZXBzeSBTdXJnZXJ5XCIsXHJcbiAgXCJTcGluYWwgQ29yZCBTdXJnZXJ5XCIsXHJcbiAgXCJGYWNpYWwgUGxhc3RpYyBTdXJnZXJ5XCIsXHJcbiAgXCJCcmVhc3QgQXVnbWVudGF0aW9uXCIsXHJcbiAgXCJSaGlub3BsYXN0eVwiLFxyXG4gIFwiTGlwb3N1Y3Rpb25cIixcclxuICBcIkJvdG94IFRyZWF0bWVudFwiLFxyXG4gIFwiRGVybWFsIEZpbGxlcnNcIixcclxuICBcIkhhaXIgVHJhbnNwbGFudFwiLFxyXG4gIFwiTGFzZXIgUmVzdXJmYWNpbmdcIixcclxuICBcIkJ1Y2NhbCBGYXQgUmVtb3ZhbFwiLFxyXG4gIFwiQ2hpbiBBdWdtZW50YXRpb25cIixcclxuICBcIlRlZXRoIFdoaXRlbmluZ1wiLFxyXG4gIFwiVmVuZWVyXCIsXHJcbiAgXCJEZW50YWwgSW1wbGFudHNcIixcclxuICBcIlJvb3QgQ2FuYWxcIixcclxuICBcIklWRiAoSW4gVml0cm8gRmVydGlsaXphdGlvbilcIixcclxuICBcIklVSSAoSW50cmF1dGVyaW5lIEluc2VtaW5hdGlvbilcIixcclxuICBcIkVnZyBGcmVlemluZ1wiLFxyXG4gIFwiSFJUIChIb3Jtb25lIFJlcGxhY2VtZW50IFRoZXJhcHkpXCIsXHJcbiAgXCJDaGVtb3RoZXJhcHlcIixcclxuICBcIlJhZGlhdGlvbiBUaGVyYXB5XCIsXHJcbiAgXCJJbW11bm90aGVyYXB5XCIsXHJcbiAgXCJQcm90b24gVGhlcmFweVwiLFxyXG4gIFwiRGV0b3ggUmV0cmVhdHNcIixcclxuICBcIklWIFRoZXJhcHlcIixcclxuICBcIkFudGktQWdpbmcgVGhlcmFweVwiLFxyXG4gIFwiUGh5c2lvdGhlcmFweVwiLFxyXG4gIFwiQWN1cHVuY3R1cmVcIixcclxuICBcIkF5dXJ2ZWRhXCIsXHJcbiAgXCJUaGFpIE1hc3NhZ2VcIixcclxuXTtcclxuXHJcbmNvbnN0IE1JTl9IT1NQSVRBTF9TQ09SRSA9IDAuNzI7XHJcbmNvbnN0IE1JTl9UUkVBVE1FTlRfU0NPUkUgPSAwLjc7XHJcblxyXG4vKipcclxuICogTm9ybWFsaXplcyBhIG5hbWUgc3RyaW5nIGJ5IHJlbW92aW5nIHB1bmN0dWF0aW9uIGFuZCBsb3dlcmNhc2luZy5cclxuICovXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gdmFsdWVcclxuICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAucmVwbGFjZSgvW15hLXowLTldKy9nLCBcIlwiKVxyXG4gICAgLnRyaW0oKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbXB1dGVzIExldmVuc2h0ZWluIGRpc3RhbmNlIGJldHdlZW4gdHdvIHN0cmluZ3MuXHJcbiAqL1xyXG5mdW5jdGlvbiBsZXZlbnNodGVpbihhOiBzdHJpbmcsIGI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgaWYgKGEgPT09IGIpIHJldHVybiAwO1xyXG4gIGlmICghYS5sZW5ndGgpIHJldHVybiBiLmxlbmd0aDtcclxuICBpZiAoIWIubGVuZ3RoKSByZXR1cm4gYS5sZW5ndGg7XHJcblxyXG4gIGNvbnN0IG1hdHJpeDogbnVtYmVyW11bXSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IGEubGVuZ3RoICsgMSB9LCAoXywgaSkgPT5cclxuICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IGIubGVuZ3RoICsgMSB9LCAoXywgaikgPT4gKGkgPT09IDAgPyBqIDogaiA9PT0gMCA/IGkgOiAwKSlcclxuICApO1xyXG5cclxuICBmb3IgKGxldCBpID0gMTsgaSA8PSBhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBmb3IgKGxldCBqID0gMTsgaiA8PSBiLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgIGlmIChhW2kgLSAxXSA9PT0gYltqIC0gMV0pIHtcclxuICAgICAgICBtYXRyaXhbaV1bal0gPSBtYXRyaXhbaSAtIDFdW2ogLSAxXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtYXRyaXhbaV1bal0gPVxyXG4gICAgICAgICAgTWF0aC5taW4obWF0cml4W2kgLSAxXVtqXSwgbWF0cml4W2ldW2ogLSAxXSwgbWF0cml4W2kgLSAxXVtqIC0gMV0pICsgMTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1hdHJpeFthLmxlbmd0aF1bYi5sZW5ndGhdO1xyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlcyBhIHNpbWlsYXJpdHkgc2NvcmUgYmV0d2VlbiB0d28gc3RyaW5ncyBiYXNlZCBvbiBMZXZlbnNodGVpbiBkaXN0YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIHNpbWlsYXJpdHlTY29yZShzb3VyY2U6IHN0cmluZywgY2FuZGlkYXRlOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gIGlmICghc291cmNlIHx8ICFjYW5kaWRhdGUpIHJldHVybiAwO1xyXG4gIGNvbnN0IG5vcm1hbGl6ZWRTb3VyY2UgPSBub3JtYWxpemUoc291cmNlKTtcclxuICBjb25zdCBub3JtYWxpemVkQ2FuZGlkYXRlID0gbm9ybWFsaXplKGNhbmRpZGF0ZSk7XHJcbiAgaWYgKCFub3JtYWxpemVkU291cmNlLmxlbmd0aCB8fCAhbm9ybWFsaXplZENhbmRpZGF0ZS5sZW5ndGgpIHJldHVybiAwO1xyXG4gIGNvbnN0IGRpc3RhbmNlID0gbGV2ZW5zaHRlaW4obm9ybWFsaXplZFNvdXJjZSwgbm9ybWFsaXplZENhbmRpZGF0ZSk7XHJcbiAgY29uc3QgbG9uZ2VzdCA9IE1hdGgubWF4KG5vcm1hbGl6ZWRTb3VyY2UubGVuZ3RoLCBub3JtYWxpemVkQ2FuZGlkYXRlLmxlbmd0aCk7XHJcbiAgcmV0dXJuIDEgLSBkaXN0YW5jZSAvIGxvbmdlc3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBmdXp6eS1tYXRjaCBhIHJhdyBob3NwaXRhbCBuYW1lIHN0cmluZyBhZ2FpbnN0IHRoZSBjdXJhdGVkIGxpc3RcclxuICogZnJvbSBCVUxLX0NTVl9VUExPQURfR1VJREUubWQuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hIb3NwaXRhbE5hbWUocmF3OiBzdHJpbmcpOiB7IHZhbHVlOiBzdHJpbmcgfCBudWxsOyBzY29yZTogbnVtYmVyIH0ge1xyXG4gIGlmICghcmF3Py50cmltKCkpIHtcclxuICAgIHJldHVybiB7IHZhbHVlOiBudWxsLCBzY29yZTogMCB9O1xyXG4gIH1cclxuXHJcbiAgbGV0IGJlc3RNYXRjaDogeyB2YWx1ZTogc3RyaW5nIHwgbnVsbDsgc2NvcmU6IG51bWJlciB9ID0geyB2YWx1ZTogbnVsbCwgc2NvcmU6IDAgfTtcclxuXHJcbiAgZm9yIChjb25zdCBob3NwaXRhbCBvZiBIT1NQSVRBTF9OQU1FUykge1xyXG4gICAgY29uc3Qgc2NvcmUgPSBzaW1pbGFyaXR5U2NvcmUocmF3LCBob3NwaXRhbCk7XHJcbiAgICBpZiAoc2NvcmUgPiBiZXN0TWF0Y2guc2NvcmUpIHtcclxuICAgICAgYmVzdE1hdGNoID0geyB2YWx1ZTogaG9zcGl0YWwsIHNjb3JlIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoYmVzdE1hdGNoLnNjb3JlIDwgTUlOX0hPU1BJVEFMX1NDT1JFKSB7XHJcbiAgICByZXR1cm4geyB2YWx1ZTogbnVsbCwgc2NvcmU6IGJlc3RNYXRjaC5zY29yZSB9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGJlc3RNYXRjaDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIGZ1enp5LW1hdGNoIGEgcmF3IHRyZWF0bWVudCBuYW1lIHN0cmluZyBhZ2FpbnN0XHJcbiAqIHRoZSBrbm93biBzZXQgb2YgdHJlYXRtZW50IG5hbWVzIGZyb20gQlVMS19DU1ZfVVBMT0FEX0dVSURFLm1kLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoVHJlYXRtZW50TmFtZShyYXc6IHN0cmluZyk6IHsgdmFsdWU6IHN0cmluZyB8IG51bGw7IHNjb3JlOiBudW1iZXIgfSB7XHJcbiAgaWYgKCFyYXc/LnRyaW0oKSkge1xyXG4gICAgcmV0dXJuIHsgdmFsdWU6IG51bGwsIHNjb3JlOiAwIH07XHJcbiAgfVxyXG5cclxuICBsZXQgYmVzdE1hdGNoOiB7IHZhbHVlOiBzdHJpbmcgfCBudWxsOyBzY29yZTogbnVtYmVyIH0gPSB7IHZhbHVlOiBudWxsLCBzY29yZTogMCB9O1xyXG5cclxuICBmb3IgKGNvbnN0IHRyZWF0bWVudCBvZiBUUkVBVE1FTlRfTkFNRVMpIHtcclxuICAgIGNvbnN0IHNjb3JlID0gc2ltaWxhcml0eVNjb3JlKHJhdywgdHJlYXRtZW50KTtcclxuICAgIGlmIChzY29yZSA+IGJlc3RNYXRjaC5zY29yZSkge1xyXG4gICAgICBiZXN0TWF0Y2ggPSB7IHZhbHVlOiB0cmVhdG1lbnQsIHNjb3JlIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoYmVzdE1hdGNoLnNjb3JlIDwgTUlOX1RSRUFUTUVOVF9TQ09SRSkge1xyXG4gICAgcmV0dXJuIHsgdmFsdWU6IG51bGwsIHNjb3JlOiBiZXN0TWF0Y2guc2NvcmUgfTtcclxuICB9XHJcblxyXG4gIHJldHVybiBiZXN0TWF0Y2g7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtYXRjaGluZ1JlZmVyZW5jZURhdGEgPSB7XHJcbiAgaG9zcGl0YWxzOiBIT1NQSVRBTF9OQU1FUyxcclxuICB0cmVhdG1lbnRzOiBUUkVBVE1FTlRfTkFNRVMsXHJcbn07XHJcblxyXG4iXSwibmFtZXMiOlsiSE9TUElUQUxfTkFNRVMiLCJUUkVBVE1FTlRfTkFNRVMiLCJNSU5fSE9TUElUQUxfU0NPUkUiLCJNSU5fVFJFQVRNRU5UX1NDT1JFIiwibm9ybWFsaXplIiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ0cmltIiwibGV2ZW5zaHRlaW4iLCJhIiwiYiIsImxlbmd0aCIsIm1hdHJpeCIsIkFycmF5IiwiZnJvbSIsIl8iLCJpIiwiaiIsIk1hdGgiLCJtaW4iLCJzaW1pbGFyaXR5U2NvcmUiLCJzb3VyY2UiLCJjYW5kaWRhdGUiLCJub3JtYWxpemVkU291cmNlIiwibm9ybWFsaXplZENhbmRpZGF0ZSIsImRpc3RhbmNlIiwibG9uZ2VzdCIsIm1heCIsIm1hdGNoSG9zcGl0YWxOYW1lIiwicmF3Iiwic2NvcmUiLCJiZXN0TWF0Y2giLCJob3NwaXRhbCIsIm1hdGNoVHJlYXRtZW50TmFtZSIsInRyZWF0bWVudCIsIm1hdGNoaW5nUmVmZXJlbmNlRGF0YSIsImhvc3BpdGFscyIsInRyZWF0bWVudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/matching.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/aiExtractor.ts":
/*!*************************************!*\
  !*** ./src/services/aiExtractor.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractPackagesFromOcrText: () => (/* binding */ extractPackagesFromOcrText)\n/* harmony export */ });\n/* harmony import */ var _bedrockClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bedrockClient */ \"(rsc)/./src/services/bedrockClient.ts\");\n/* harmony import */ var _normalizer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./normalizer */ \"(rsc)/./src/services/normalizer.ts\");\n\n\n/**\r\n * extractPackagesFromOcrText\r\n * --------------------------\r\n * Builds a structured prompt from OCR output, invokes Claude via Bedrock,\r\n * and returns normalized PackageRow objects ready for CSV serialization.\r\n */ async function extractPackagesFromOcrText(ocrPages) {\n    if (!ocrPages.length) {\n        return [];\n    }\n    const prompt = buildPrompt(ocrPages);\n    const response = await (0,_bedrockClient__WEBPACK_IMPORTED_MODULE_0__.callBedrockForExtraction)(prompt, {\n        maxTokens: 6000,\n        temperature: 0.1\n    });\n    const cleaned = sanitizeModelResponse(response);\n    const parsed = JSON.parse(cleaned || \"{}\");\n    const packages = Array.isArray(parsed?.packages) ? parsed.packages : [];\n    return packages.map((row)=>(0,_normalizer__WEBPACK_IMPORTED_MODULE_1__.normalizePackageRow)(row));\n}\nfunction buildPrompt(pages) {\n    const ordered = [\n        ...pages\n    ].sort((a, b)=>{\n        if (a.fileId === b.fileId) {\n            return a.pageNumber - b.pageNumber;\n        }\n        return a.fileId.localeCompare(b.fileId);\n    });\n    const joinedPages = ordered.map((page)=>`--- PAGE ${page.pageNumber} (${page.fileName}) ---\\n${page.rawText}\\n`).join(\"\\n\");\n    return `\r\nYou are an expert medical-tourism operations assistant.\r\nConvert the noisy OCR snippets below into structured clinic packages.\r\n\r\nRules:\r\n- Respond with valid JSON only (no markdown fences).\r\n- Your JSON must have { \"packages\": [ ... ] }.\r\n- Every package must contain the following keys: title, hospital_name, treatment_name, price, currency, featured, status, is_le_package, _meta.\r\n- Price, original_price, and commission must be numbers or null.\r\n- Currency must be one of: USD, THB, EUR, GBP, SGD, MYR, KRW. Guess based on context if missing.\r\n- Featured defaults to false, status defaults to \"active\", is_le_package defaults to false.\r\n- Sub treatments map to the \"Sub Treatments\" CSV column. Provide comma-separated values if more than one.\r\n- Includes should describe inclusions like accommodations, transfers, consultations, etc.\r\n- Duration describes stays or treatment length using readable text (e.g., \"5 nights\", \"3-4 hours\").\r\n- Hospital and treatment names should reuse the clinic wording when obvious.\r\n- _meta must include { \"source_file\": \"<filename>\", \"source_page\": <pageNumber>, \"confidence_score\": 0.0-1.0 }.\r\n\r\nCSV header order for reference:\r\ntitle,description,details,hospital_name,treatment_name,Sub Treatments,price,original_price,currency,duration,treatment_category,anaesthesia,commission,featured,status,doctor_name,is_le_package,includes,image_file_id,hospital_location,category,hospital_country,translation_title,translation_description,translation_details,translation\r\n\r\nOCR INPUT:\r\n${joinedPages}\r\n`;\n}\nfunction sanitizeModelResponse(value) {\n    return value.trim().replace(/^```json/i, \"\").replace(/^```/, \"\").replace(/```$/, \"\").trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvYWlFeHRyYWN0b3IudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQzJEO0FBQ1I7QUFFbkQ7Ozs7O0NBS0MsR0FDTSxlQUFlRSwyQkFDcEJDLFFBQW1CO0lBRW5CLElBQUksQ0FBQ0EsU0FBU0MsTUFBTSxFQUFFO1FBQ3BCLE9BQU8sRUFBRTtJQUNYO0lBRUEsTUFBTUMsU0FBU0MsWUFBWUg7SUFDM0IsTUFBTUksV0FBVyxNQUFNUCx3RUFBd0JBLENBQUNLLFFBQVE7UUFDdERHLFdBQVc7UUFDWEMsYUFBYTtJQUNmO0lBRUEsTUFBTUMsVUFBVUMsc0JBQXNCSjtJQUN0QyxNQUFNSyxTQUFTQyxLQUFLQyxLQUFLLENBQUNKLFdBQVc7SUFDckMsTUFBTUssV0FBa0JDLE1BQU1DLE9BQU8sQ0FBQ0wsUUFBUUcsWUFBWUgsT0FBT0csUUFBUSxHQUFHLEVBQUU7SUFFOUUsT0FBT0EsU0FBU0csR0FBRyxDQUFDLENBQUNDLE1BQVFsQixnRUFBbUJBLENBQUNrQjtBQUNuRDtBQUVBLFNBQVNiLFlBQVljLEtBQWdCO0lBQ25DLE1BQU1DLFVBQVU7V0FBSUQ7S0FBTSxDQUFDRSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0M7UUFDbEMsSUFBSUQsRUFBRUUsTUFBTSxLQUFLRCxFQUFFQyxNQUFNLEVBQUU7WUFDekIsT0FBT0YsRUFBRUcsVUFBVSxHQUFHRixFQUFFRSxVQUFVO1FBQ3BDO1FBQ0EsT0FBT0gsRUFBRUUsTUFBTSxDQUFDRSxhQUFhLENBQUNILEVBQUVDLE1BQU07SUFDeEM7SUFFQSxNQUFNRyxjQUFjUCxRQUNqQkgsR0FBRyxDQUNGLENBQUNXLE9BQ0MsQ0FBQyxTQUFTLEVBQUVBLEtBQUtILFVBQVUsQ0FBQyxFQUFFLEVBQUVHLEtBQUtDLFFBQVEsQ0FBQyxPQUFPLEVBQUVELEtBQUtFLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFFMUVDLElBQUksQ0FBQztJQUVSLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUJWLEVBQUVKLFlBQVk7QUFDZCxDQUFDO0FBQ0Q7QUFFQSxTQUFTakIsc0JBQXNCc0IsS0FBYTtJQUMxQyxPQUFPQSxNQUNKQyxJQUFJLEdBQ0pDLE9BQU8sQ0FBQyxhQUFhLElBQ3JCQSxPQUFPLENBQUMsUUFBUSxJQUNoQkEsT0FBTyxDQUFDLFFBQVEsSUFDaEJELElBQUk7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2xlbWVkaWNhLWNsaW5pYy1vY3IvLi9zcmMvc2VydmljZXMvYWlFeHRyYWN0b3IudHM/ZmY2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPY3JQYWdlLCBQYWNrYWdlUm93IH0gZnJvbSBcIi4uL3R5cGVzL3BhY2thZ2VzXCI7XHJcbmltcG9ydCB7IGNhbGxCZWRyb2NrRm9yRXh0cmFjdGlvbiB9IGZyb20gXCIuL2JlZHJvY2tDbGllbnRcIjtcclxuaW1wb3J0IHsgbm9ybWFsaXplUGFja2FnZVJvdyB9IGZyb20gXCIuL25vcm1hbGl6ZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBleHRyYWN0UGFja2FnZXNGcm9tT2NyVGV4dFxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBCdWlsZHMgYSBzdHJ1Y3R1cmVkIHByb21wdCBmcm9tIE9DUiBvdXRwdXQsIGludm9rZXMgQ2xhdWRlIHZpYSBCZWRyb2NrLFxyXG4gKiBhbmQgcmV0dXJucyBub3JtYWxpemVkIFBhY2thZ2VSb3cgb2JqZWN0cyByZWFkeSBmb3IgQ1NWIHNlcmlhbGl6YXRpb24uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdFBhY2thZ2VzRnJvbU9jclRleHQoXHJcbiAgb2NyUGFnZXM6IE9jclBhZ2VbXVxyXG4pOiBQcm9taXNlPFBhY2thZ2VSb3dbXT4ge1xyXG4gIGlmICghb2NyUGFnZXMubGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG5cclxuICBjb25zdCBwcm9tcHQgPSBidWlsZFByb21wdChvY3JQYWdlcyk7XHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsQmVkcm9ja0ZvckV4dHJhY3Rpb24ocHJvbXB0LCB7XHJcbiAgICBtYXhUb2tlbnM6IDYwMDAsXHJcbiAgICB0ZW1wZXJhdHVyZTogMC4xLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBjbGVhbmVkID0gc2FuaXRpemVNb2RlbFJlc3BvbnNlKHJlc3BvbnNlKTtcclxuICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGNsZWFuZWQgfHwgXCJ7fVwiKTtcclxuICBjb25zdCBwYWNrYWdlczogYW55W10gPSBBcnJheS5pc0FycmF5KHBhcnNlZD8ucGFja2FnZXMpID8gcGFyc2VkLnBhY2thZ2VzIDogW107XHJcblxyXG4gIHJldHVybiBwYWNrYWdlcy5tYXAoKHJvdykgPT4gbm9ybWFsaXplUGFja2FnZVJvdyhyb3cpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRQcm9tcHQocGFnZXM6IE9jclBhZ2VbXSk6IHN0cmluZyB7XHJcbiAgY29uc3Qgb3JkZXJlZCA9IFsuLi5wYWdlc10uc29ydCgoYSwgYikgPT4ge1xyXG4gICAgaWYgKGEuZmlsZUlkID09PSBiLmZpbGVJZCkge1xyXG4gICAgICByZXR1cm4gYS5wYWdlTnVtYmVyIC0gYi5wYWdlTnVtYmVyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGEuZmlsZUlkLmxvY2FsZUNvbXBhcmUoYi5maWxlSWQpO1xyXG4gIH0pO1xyXG5cclxuICBjb25zdCBqb2luZWRQYWdlcyA9IG9yZGVyZWRcclxuICAgIC5tYXAoXHJcbiAgICAgIChwYWdlKSA9PlxyXG4gICAgICAgIGAtLS0gUEFHRSAke3BhZ2UucGFnZU51bWJlcn0gKCR7cGFnZS5maWxlTmFtZX0pIC0tLVxcbiR7cGFnZS5yYXdUZXh0fVxcbmBcclxuICAgIClcclxuICAgIC5qb2luKFwiXFxuXCIpO1xyXG5cclxuICByZXR1cm4gYFxyXG5Zb3UgYXJlIGFuIGV4cGVydCBtZWRpY2FsLXRvdXJpc20gb3BlcmF0aW9ucyBhc3Npc3RhbnQuXHJcbkNvbnZlcnQgdGhlIG5vaXN5IE9DUiBzbmlwcGV0cyBiZWxvdyBpbnRvIHN0cnVjdHVyZWQgY2xpbmljIHBhY2thZ2VzLlxyXG5cclxuUnVsZXM6XHJcbi0gUmVzcG9uZCB3aXRoIHZhbGlkIEpTT04gb25seSAobm8gbWFya2Rvd24gZmVuY2VzKS5cclxuLSBZb3VyIEpTT04gbXVzdCBoYXZlIHsgXCJwYWNrYWdlc1wiOiBbIC4uLiBdIH0uXHJcbi0gRXZlcnkgcGFja2FnZSBtdXN0IGNvbnRhaW4gdGhlIGZvbGxvd2luZyBrZXlzOiB0aXRsZSwgaG9zcGl0YWxfbmFtZSwgdHJlYXRtZW50X25hbWUsIHByaWNlLCBjdXJyZW5jeSwgZmVhdHVyZWQsIHN0YXR1cywgaXNfbGVfcGFja2FnZSwgX21ldGEuXHJcbi0gUHJpY2UsIG9yaWdpbmFsX3ByaWNlLCBhbmQgY29tbWlzc2lvbiBtdXN0IGJlIG51bWJlcnMgb3IgbnVsbC5cclxuLSBDdXJyZW5jeSBtdXN0IGJlIG9uZSBvZjogVVNELCBUSEIsIEVVUiwgR0JQLCBTR0QsIE1ZUiwgS1JXLiBHdWVzcyBiYXNlZCBvbiBjb250ZXh0IGlmIG1pc3NpbmcuXHJcbi0gRmVhdHVyZWQgZGVmYXVsdHMgdG8gZmFsc2UsIHN0YXR1cyBkZWZhdWx0cyB0byBcImFjdGl2ZVwiLCBpc19sZV9wYWNrYWdlIGRlZmF1bHRzIHRvIGZhbHNlLlxyXG4tIFN1YiB0cmVhdG1lbnRzIG1hcCB0byB0aGUgXCJTdWIgVHJlYXRtZW50c1wiIENTViBjb2x1bW4uIFByb3ZpZGUgY29tbWEtc2VwYXJhdGVkIHZhbHVlcyBpZiBtb3JlIHRoYW4gb25lLlxyXG4tIEluY2x1ZGVzIHNob3VsZCBkZXNjcmliZSBpbmNsdXNpb25zIGxpa2UgYWNjb21tb2RhdGlvbnMsIHRyYW5zZmVycywgY29uc3VsdGF0aW9ucywgZXRjLlxyXG4tIER1cmF0aW9uIGRlc2NyaWJlcyBzdGF5cyBvciB0cmVhdG1lbnQgbGVuZ3RoIHVzaW5nIHJlYWRhYmxlIHRleHQgKGUuZy4sIFwiNSBuaWdodHNcIiwgXCIzLTQgaG91cnNcIikuXHJcbi0gSG9zcGl0YWwgYW5kIHRyZWF0bWVudCBuYW1lcyBzaG91bGQgcmV1c2UgdGhlIGNsaW5pYyB3b3JkaW5nIHdoZW4gb2J2aW91cy5cclxuLSBfbWV0YSBtdXN0IGluY2x1ZGUgeyBcInNvdXJjZV9maWxlXCI6IFwiPGZpbGVuYW1lPlwiLCBcInNvdXJjZV9wYWdlXCI6IDxwYWdlTnVtYmVyPiwgXCJjb25maWRlbmNlX3Njb3JlXCI6IDAuMC0xLjAgfS5cclxuXHJcbkNTViBoZWFkZXIgb3JkZXIgZm9yIHJlZmVyZW5jZTpcclxudGl0bGUsZGVzY3JpcHRpb24sZGV0YWlscyxob3NwaXRhbF9uYW1lLHRyZWF0bWVudF9uYW1lLFN1YiBUcmVhdG1lbnRzLHByaWNlLG9yaWdpbmFsX3ByaWNlLGN1cnJlbmN5LGR1cmF0aW9uLHRyZWF0bWVudF9jYXRlZ29yeSxhbmFlc3RoZXNpYSxjb21taXNzaW9uLGZlYXR1cmVkLHN0YXR1cyxkb2N0b3JfbmFtZSxpc19sZV9wYWNrYWdlLGluY2x1ZGVzLGltYWdlX2ZpbGVfaWQsaG9zcGl0YWxfbG9jYXRpb24sY2F0ZWdvcnksaG9zcGl0YWxfY291bnRyeSx0cmFuc2xhdGlvbl90aXRsZSx0cmFuc2xhdGlvbl9kZXNjcmlwdGlvbix0cmFuc2xhdGlvbl9kZXRhaWxzLHRyYW5zbGF0aW9uXHJcblxyXG5PQ1IgSU5QVVQ6XHJcbiR7am9pbmVkUGFnZXN9XHJcbmA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhbml0aXplTW9kZWxSZXNwb25zZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gdmFsdWVcclxuICAgIC50cmltKClcclxuICAgIC5yZXBsYWNlKC9eYGBganNvbi9pLCBcIlwiKVxyXG4gICAgLnJlcGxhY2UoL15gYGAvLCBcIlwiKVxyXG4gICAgLnJlcGxhY2UoL2BgYCQvLCBcIlwiKVxyXG4gICAgLnRyaW0oKTtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbImNhbGxCZWRyb2NrRm9yRXh0cmFjdGlvbiIsIm5vcm1hbGl6ZVBhY2thZ2VSb3ciLCJleHRyYWN0UGFja2FnZXNGcm9tT2NyVGV4dCIsIm9jclBhZ2VzIiwibGVuZ3RoIiwicHJvbXB0IiwiYnVpbGRQcm9tcHQiLCJyZXNwb25zZSIsIm1heFRva2VucyIsInRlbXBlcmF0dXJlIiwiY2xlYW5lZCIsInNhbml0aXplTW9kZWxSZXNwb25zZSIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsInBhY2thZ2VzIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwicm93IiwicGFnZXMiLCJvcmRlcmVkIiwic29ydCIsImEiLCJiIiwiZmlsZUlkIiwicGFnZU51bWJlciIsImxvY2FsZUNvbXBhcmUiLCJqb2luZWRQYWdlcyIsInBhZ2UiLCJmaWxlTmFtZSIsInJhd1RleHQiLCJqb2luIiwidmFsdWUiLCJ0cmltIiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/aiExtractor.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/bedrockClient.ts":
/*!***************************************!*\
  !*** ./src/services/bedrockClient.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callBedrockForExtraction: () => (/* binding */ callBedrockForExtraction)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-bedrock-runtime */ \"(rsc)/./node_modules/@aws-sdk/client-bedrock-runtime/dist-es/commands/InvokeModelCommand.js\");\n/* harmony import */ var _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../bedrock-config.ts/bedrock-config */ \"(rsc)/./bedrock-config.ts/bedrock-config.ts\");\n\n\n/**\r\n * Default model ID resolution (matches bedrock-config.ts pattern)\r\n * Falls back to CLAUDE_SONNET_MODEL_ID if no env var is set\r\n */ const DEFAULT_MODEL_ID = process.env.BEDROCK_LIGHT_MODEL_ID || process.env.BEDROCK_MODEL_ID || _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__.CLAUDE_SONNET_MODEL_ID;\n/**\r\n * Extracts region from an AWS ARN or returns the configured region\r\n */ function getRegionFromArn(arn) {\n    const match = arn.match(/arn:aws:bedrock:([^:]+):/);\n    return match ? match[1] : null;\n}\n/**\r\n * resolveModelId\r\n * --------------\r\n * Resolves the model identifier, applying inference profile ARN mapping\r\n * when appropriate. Matches the pattern used in processMedicalRecordWithClaude.\r\n * \r\n * If DEFAULT_MODEL_ID is already an ARN, it will be used directly.\r\n * If it's a plain model ID, it will be mapped to a profile ARN if available.\r\n */ function resolveModelId(preferred) {\n    const configuredRegion = process.env.AWS_REGION || process.env.AWS_BEDROCK_REGION || \"us-east-1\";\n    let modelId = preferred || DEFAULT_MODEL_ID;\n    // If DEFAULT_MODEL_ID is already an ARN (starts with \"arn:aws:bedrock:\"), use it directly\n    const isAlreadyArn = modelId.startsWith(\"arn:aws:bedrock:\");\n    if (isAlreadyArn) {\n        // Validate that ARN region matches configured region\n        const arnRegion = getRegionFromArn(modelId);\n        if (arnRegion && arnRegion !== configuredRegion) {\n            console.error(`\\n[Bedrock OCR] âŒ REGION MISMATCH DETECTED:\\n` + `  â€¢ Your AWS_REGION is set to: ${configuredRegion}\\n` + `  â€¢ But your inference profile ARN is for region: ${arnRegion}\\n` + `  â€¢ This WILL cause \"model identifier invalid\" errors.\\n\\n` + `SOLUTION: Change AWS_REGION in .env.local to match the ARN region:\\n` + `  AWS_REGION=${arnRegion}\\n\\n` + `Or create new inference profiles in ${configuredRegion} and update your ARNs.\\n`);\n        }\n        console.log(\"[Bedrock OCR] Using inference profile ARN:\", modelId.substring(0, 80) + \"...\");\n        return modelId;\n    }\n    // Map plain model ID â†’ inference profile ARN when appropriate (same logic as bedrock-config.ts)\n    const resolvedModelId = modelId === _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__.CLAUDE_SONNET_MODEL_ID && _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__.CLAUDE_SONNET_PROFILE_ARN ? _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__.CLAUDE_SONNET_PROFILE_ARN : modelId === _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__.CLAUDE_OPUS_MODEL_ID && _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__.CLAUDE_OPUS_PROFILE_ARN ? _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__.CLAUDE_OPUS_PROFILE_ARN : modelId;\n    // If resolved to an ARN, check region match\n    if (resolvedModelId.startsWith(\"arn:aws:bedrock:\")) {\n        const arnRegion = getRegionFromArn(resolvedModelId);\n        if (arnRegion && arnRegion !== configuredRegion) {\n            console.error(`\\n[Bedrock OCR] âŒ REGION MISMATCH DETECTED:\\n` + `  â€¢ Your AWS_REGION is set to: ${configuredRegion}\\n` + `  â€¢ But your profile ARN (from BEDROCK_PROFILE_ARN) is for region: ${arnRegion}\\n` + `  â€¢ This WILL cause \"model identifier invalid\" errors.\\n\\n` + `SOLUTION: Change AWS_REGION in .env.local to match the ARN region:\\n` + `  AWS_REGION=${arnRegion}\\n\\n` + `Or create new inference profiles in ${configuredRegion} and update your ARNs.\\n`);\n        }\n    }\n    if (!resolvedModelId || resolvedModelId.trim() === \"\") {\n        throw new Error(\"No Bedrock model configured. Set BEDROCK_LIGHT_MODEL_ID or BEDROCK_MODEL_ID in .env.local.\");\n    }\n    console.log(\"[Bedrock OCR] Using model:\", resolvedModelId);\n    return resolvedModelId;\n}\n/**\r\n * callBedrockForExtraction\r\n * ------------------------\r\n * Invokes Claude on AWS Bedrock with the provided prompt and returns\r\n * the plain-text response body. Uses the shared bedrockClient from\r\n * bedrock-config.ts to ensure region and credentials match the working\r\n * medical records processing code.\r\n *\r\n * Matches the Anthropic payload format and model resolution pattern\r\n * from processMedicalRecordWithClaude.\r\n */ async function callBedrockForExtraction(prompt, options) {\n    let resolvedModelId;\n    try {\n        // Resolve model ID first (throws if missing)\n        resolvedModelId = resolveModelId(options?.modelId);\n        const maxTokens = options?.maxTokens ?? 4000;\n        const temperature = options?.temperature ?? 0.2;\n        const input = {\n            modelId: resolvedModelId,\n            contentType: \"application/json\",\n            accept: \"application/json\",\n            body: JSON.stringify({\n                anthropic_version: \"bedrock-2023-05-31\",\n                max_tokens: maxTokens,\n                temperature,\n                messages: [\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ]\n            })\n        };\n        const command = new _aws_sdk_client_bedrock_runtime__WEBPACK_IMPORTED_MODULE_1__.InvokeModelCommand(input);\n        const response = await _bedrock_config_ts_bedrock_config__WEBPACK_IMPORTED_MODULE_0__.bedrockClient.send(command);\n        // Convert raw response into text (same pattern as bedrock-config.ts)\n        const rawText = await (async ()=>{\n            const body = response.body;\n            if (typeof body?.transformToByteArray === \"function\") {\n                return new TextDecoder().decode(await body.transformToByteArray());\n            }\n            if (body instanceof Uint8Array) {\n                return new TextDecoder().decode(body);\n            }\n            return String(body ?? \"\");\n        })();\n        const responseBody = JSON.parse(rawText || \"{}\");\n        const claudeText = responseBody?.content?.[0]?.text || \"\";\n        return claudeText;\n    } catch (error) {\n        const msg = error instanceof Error ? error.message : \"Unknown error\";\n        // Include resolved model ID in validation error logs for debugging\n        if (msg.includes(\"ValidationException\")) {\n            console.error(\"[Bedrock OCR] Validation error for model:\", resolvedModelId || \"unknown\", error);\n        }\n        // Re-throw with context (matches bedrock-config.ts error handling)\n        if (msg.includes(\"UnrecognizedClientException\") || msg.includes(\"InvalidSignatureException\")) {\n            throw new Error(\"AWS Bedrock authentication failed.\");\n        }\n        if (msg.includes(\"ValidationException\")) {\n            throw new Error(\"AWS Bedrock validation error: \" + msg);\n        }\n        if (msg.includes(\"ModelNotReadyException\") || msg.includes(\"ThrottlingException\")) {\n            throw new Error(\"AWS Bedrock temporarily unavailable.\");\n        }\n        if (msg.includes(\"AccessDeniedException\")) {\n            throw new Error(\"Permission denied for AWS Bedrock.\");\n        }\n        throw new Error(\"Bedrock extraction failed: \" + msg);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LDZCQUE2QkYsSUFBSUUsUUFBUSxDQUFDLHdCQUF3QjtZQUNqRixNQUFNLElBQUloQyxNQUFNO1FBQ2xCO1FBQ0EsSUFBSThCLElBQUlFLFFBQVEsQ0FBQywwQkFBMEI7WUFDekMsTUFBTSxJQUFJaEMsTUFBTTtRQUNsQjtRQUVBLE1BQU0sSUFBSUEsTUFBTSxnQ0FBZ0M4QjtJQUNsRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVtZWRpY2EtY2xpbmljLW9jci8uL3NyYy9zZXJ2aWNlcy9iZWRyb2NrQ2xpZW50LnRzPzA3YTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW52b2tlTW9kZWxDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1iZWRyb2NrLXJ1bnRpbWVcIjtcclxuaW1wb3J0IHtcclxuICBiZWRyb2NrQ2xpZW50LFxyXG4gIENMQVVERV9PUFVTX01PREVMX0lELFxyXG4gIENMQVVERV9TT05ORVRfTU9ERUxfSUQsXHJcbiAgQ0xBVURFX09QVVNfUFJPRklMRV9BUk4sXHJcbiAgQ0xBVURFX1NPTk5FVF9QUk9GSUxFX0FSTixcclxufSBmcm9tIFwiLi4vLi4vYmVkcm9jay1jb25maWcudHMvYmVkcm9jay1jb25maWdcIjtcclxuXHJcbi8qKlxyXG4gKiBEZWZhdWx0IG1vZGVsIElEIHJlc29sdXRpb24gKG1hdGNoZXMgYmVkcm9jay1jb25maWcudHMgcGF0dGVybilcclxuICogRmFsbHMgYmFjayB0byBDTEFVREVfU09OTkVUX01PREVMX0lEIGlmIG5vIGVudiB2YXIgaXMgc2V0XHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX01PREVMX0lEID1cclxuICBwcm9jZXNzLmVudi5CRURST0NLX0xJR0hUX01PREVMX0lEIHx8XHJcbiAgcHJvY2Vzcy5lbnYuQkVEUk9DS19NT0RFTF9JRCB8fFxyXG4gIENMQVVERV9TT05ORVRfTU9ERUxfSUQ7XHJcblxyXG4vKipcclxuICogRXh0cmFjdHMgcmVnaW9uIGZyb20gYW4gQVdTIEFSTiBvciByZXR1cm5zIHRoZSBjb25maWd1cmVkIHJlZ2lvblxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0UmVnaW9uRnJvbUFybihhcm46IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IG1hdGNoID0gYXJuLm1hdGNoKC9hcm46YXdzOmJlZHJvY2s6KFteOl0rKTovKTtcclxuICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiByZXNvbHZlTW9kZWxJZFxyXG4gKiAtLS0tLS0tLS0tLS0tLVxyXG4gKiBSZXNvbHZlcyB0aGUgbW9kZWwgaWRlbnRpZmllciwgYXBwbHlpbmcgaW5mZXJlbmNlIHByb2ZpbGUgQVJOIG1hcHBpbmdcclxuICogd2hlbiBhcHByb3ByaWF0ZS4gTWF0Y2hlcyB0aGUgcGF0dGVybiB1c2VkIGluIHByb2Nlc3NNZWRpY2FsUmVjb3JkV2l0aENsYXVkZS5cclxuICogXHJcbiAqIElmIERFRkFVTFRfTU9ERUxfSUQgaXMgYWxyZWFkeSBhbiBBUk4sIGl0IHdpbGwgYmUgdXNlZCBkaXJlY3RseS5cclxuICogSWYgaXQncyBhIHBsYWluIG1vZGVsIElELCBpdCB3aWxsIGJlIG1hcHBlZCB0byBhIHByb2ZpbGUgQVJOIGlmIGF2YWlsYWJsZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlc29sdmVNb2RlbElkKHByZWZlcnJlZD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgY29uZmlndXJlZFJlZ2lvbiA9IHByb2Nlc3MuZW52LkFXU19SRUdJT04gfHwgcHJvY2Vzcy5lbnYuQVdTX0JFRFJPQ0tfUkVHSU9OIHx8IFwidXMtZWFzdC0xXCI7XHJcbiAgbGV0IG1vZGVsSWQgPSBwcmVmZXJyZWQgfHwgREVGQVVMVF9NT0RFTF9JRDtcclxuXHJcbiAgLy8gSWYgREVGQVVMVF9NT0RFTF9JRCBpcyBhbHJlYWR5IGFuIEFSTiAoc3RhcnRzIHdpdGggXCJhcm46YXdzOmJlZHJvY2s6XCIpLCB1c2UgaXQgZGlyZWN0bHlcclxuICBjb25zdCBpc0FscmVhZHlBcm4gPSBtb2RlbElkLnN0YXJ0c1dpdGgoXCJhcm46YXdzOmJlZHJvY2s6XCIpO1xyXG5cclxuICBpZiAoaXNBbHJlYWR5QXJuKSB7XHJcbiAgICAvLyBWYWxpZGF0ZSB0aGF0IEFSTiByZWdpb24gbWF0Y2hlcyBjb25maWd1cmVkIHJlZ2lvblxyXG4gICAgY29uc3QgYXJuUmVnaW9uID0gZ2V0UmVnaW9uRnJvbUFybihtb2RlbElkKTtcclxuICAgIGlmIChhcm5SZWdpb24gJiYgYXJuUmVnaW9uICE9PSBjb25maWd1cmVkUmVnaW9uKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgYFxcbltCZWRyb2NrIE9DUl0g4p2MIFJFR0lPTiBNSVNNQVRDSCBERVRFQ1RFRDpcXG5gICtcclxuICAgICAgICBgICDigKIgWW91ciBBV1NfUkVHSU9OIGlzIHNldCB0bzogJHtjb25maWd1cmVkUmVnaW9ufVxcbmAgK1xyXG4gICAgICAgIGAgIOKAoiBCdXQgeW91ciBpbmZlcmVuY2UgcHJvZmlsZSBBUk4gaXMgZm9yIHJlZ2lvbjogJHthcm5SZWdpb259XFxuYCArXHJcbiAgICAgICAgYCAg4oCiIFRoaXMgV0lMTCBjYXVzZSBcIm1vZGVsIGlkZW50aWZpZXIgaW52YWxpZFwiIGVycm9ycy5cXG5cXG5gICtcclxuICAgICAgICBgU09MVVRJT046IENoYW5nZSBBV1NfUkVHSU9OIGluIC5lbnYubG9jYWwgdG8gbWF0Y2ggdGhlIEFSTiByZWdpb246XFxuYCArXHJcbiAgICAgICAgYCAgQVdTX1JFR0lPTj0ke2FyblJlZ2lvbn1cXG5cXG5gICtcclxuICAgICAgICBgT3IgY3JlYXRlIG5ldyBpbmZlcmVuY2UgcHJvZmlsZXMgaW4gJHtjb25maWd1cmVkUmVnaW9ufSBhbmQgdXBkYXRlIHlvdXIgQVJOcy5cXG5gXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhcIltCZWRyb2NrIE9DUl0gVXNpbmcgaW5mZXJlbmNlIHByb2ZpbGUgQVJOOlwiLCBtb2RlbElkLnN1YnN0cmluZygwLCA4MCkgKyBcIi4uLlwiKTtcclxuICAgIHJldHVybiBtb2RlbElkO1xyXG4gIH1cclxuXHJcbiAgLy8gTWFwIHBsYWluIG1vZGVsIElEIOKGkiBpbmZlcmVuY2UgcHJvZmlsZSBBUk4gd2hlbiBhcHByb3ByaWF0ZSAoc2FtZSBsb2dpYyBhcyBiZWRyb2NrLWNvbmZpZy50cylcclxuICBjb25zdCByZXNvbHZlZE1vZGVsSWQgPVxyXG4gICAgbW9kZWxJZCA9PT0gQ0xBVURFX1NPTk5FVF9NT0RFTF9JRCAmJiBDTEFVREVfU09OTkVUX1BST0ZJTEVfQVJOXHJcbiAgICAgID8gQ0xBVURFX1NPTk5FVF9QUk9GSUxFX0FSTlxyXG4gICAgICA6IG1vZGVsSWQgPT09IENMQVVERV9PUFVTX01PREVMX0lEICYmIENMQVVERV9PUFVTX1BST0ZJTEVfQVJOXHJcbiAgICAgID8gQ0xBVURFX09QVVNfUFJPRklMRV9BUk5cclxuICAgICAgOiBtb2RlbElkO1xyXG5cclxuICAvLyBJZiByZXNvbHZlZCB0byBhbiBBUk4sIGNoZWNrIHJlZ2lvbiBtYXRjaFxyXG4gIGlmIChyZXNvbHZlZE1vZGVsSWQuc3RhcnRzV2l0aChcImFybjphd3M6YmVkcm9jazpcIikpIHtcclxuICAgIGNvbnN0IGFyblJlZ2lvbiA9IGdldFJlZ2lvbkZyb21Bcm4ocmVzb2x2ZWRNb2RlbElkKTtcclxuICAgIGlmIChhcm5SZWdpb24gJiYgYXJuUmVnaW9uICE9PSBjb25maWd1cmVkUmVnaW9uKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgYFxcbltCZWRyb2NrIE9DUl0g4p2MIFJFR0lPTiBNSVNNQVRDSCBERVRFQ1RFRDpcXG5gICtcclxuICAgICAgICBgICDigKIgWW91ciBBV1NfUkVHSU9OIGlzIHNldCB0bzogJHtjb25maWd1cmVkUmVnaW9ufVxcbmAgK1xyXG4gICAgICAgIGAgIOKAoiBCdXQgeW91ciBwcm9maWxlIEFSTiAoZnJvbSBCRURST0NLX1BST0ZJTEVfQVJOKSBpcyBmb3IgcmVnaW9uOiAke2FyblJlZ2lvbn1cXG5gICtcclxuICAgICAgICBgICDigKIgVGhpcyBXSUxMIGNhdXNlIFwibW9kZWwgaWRlbnRpZmllciBpbnZhbGlkXCIgZXJyb3JzLlxcblxcbmAgK1xyXG4gICAgICAgIGBTT0xVVElPTjogQ2hhbmdlIEFXU19SRUdJT04gaW4gLmVudi5sb2NhbCB0byBtYXRjaCB0aGUgQVJOIHJlZ2lvbjpcXG5gICtcclxuICAgICAgICBgICBBV1NfUkVHSU9OPSR7YXJuUmVnaW9ufVxcblxcbmAgK1xyXG4gICAgICAgIGBPciBjcmVhdGUgbmV3IGluZmVyZW5jZSBwcm9maWxlcyBpbiAke2NvbmZpZ3VyZWRSZWdpb259IGFuZCB1cGRhdGUgeW91ciBBUk5zLlxcbmBcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmICghcmVzb2x2ZWRNb2RlbElkIHx8IHJlc29sdmVkTW9kZWxJZC50cmltKCkgPT09IFwiXCIpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgXCJObyBCZWRyb2NrIG1vZGVsIGNvbmZpZ3VyZWQuIFNldCBCRURST0NLX0xJR0hUX01PREVMX0lEIG9yIEJFRFJPQ0tfTU9ERUxfSUQgaW4gLmVudi5sb2NhbC5cIlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiW0JlZHJvY2sgT0NSXSBVc2luZyBtb2RlbDpcIiwgcmVzb2x2ZWRNb2RlbElkKTtcclxuICByZXR1cm4gcmVzb2x2ZWRNb2RlbElkO1xyXG59XHJcblxyXG4vKipcclxuICogY2FsbEJlZHJvY2tGb3JFeHRyYWN0aW9uXHJcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBJbnZva2VzIENsYXVkZSBvbiBBV1MgQmVkcm9jayB3aXRoIHRoZSBwcm92aWRlZCBwcm9tcHQgYW5kIHJldHVybnNcclxuICogdGhlIHBsYWluLXRleHQgcmVzcG9uc2UgYm9keS4gVXNlcyB0aGUgc2hhcmVkIGJlZHJvY2tDbGllbnQgZnJvbVxyXG4gKiBiZWRyb2NrLWNvbmZpZy50cyB0byBlbnN1cmUgcmVnaW9uIGFuZCBjcmVkZW50aWFscyBtYXRjaCB0aGUgd29ya2luZ1xyXG4gKiBtZWRpY2FsIHJlY29yZHMgcHJvY2Vzc2luZyBjb2RlLlxyXG4gKlxyXG4gKiBNYXRjaGVzIHRoZSBBbnRocm9waWMgcGF5bG9hZCBmb3JtYXQgYW5kIG1vZGVsIHJlc29sdXRpb24gcGF0dGVyblxyXG4gKiBmcm9tIHByb2Nlc3NNZWRpY2FsUmVjb3JkV2l0aENsYXVkZS5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxsQmVkcm9ja0ZvckV4dHJhY3Rpb24oXHJcbiAgcHJvbXB0OiBzdHJpbmcsXHJcbiAgb3B0aW9ucz86IHsgbW9kZWxJZD86IHN0cmluZzsgbWF4VG9rZW5zPzogbnVtYmVyOyB0ZW1wZXJhdHVyZT86IG51bWJlciB9XHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgbGV0IHJlc29sdmVkTW9kZWxJZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBSZXNvbHZlIG1vZGVsIElEIGZpcnN0ICh0aHJvd3MgaWYgbWlzc2luZylcclxuICAgIHJlc29sdmVkTW9kZWxJZCA9IHJlc29sdmVNb2RlbElkKG9wdGlvbnM/Lm1vZGVsSWQpO1xyXG4gICAgY29uc3QgbWF4VG9rZW5zID0gb3B0aW9ucz8ubWF4VG9rZW5zID8/IDQwMDA7XHJcbiAgICBjb25zdCB0ZW1wZXJhdHVyZSA9IG9wdGlvbnM/LnRlbXBlcmF0dXJlID8/IDAuMjtcclxuXHJcbiAgICBjb25zdCBpbnB1dCA9IHtcclxuICAgICAgbW9kZWxJZDogcmVzb2x2ZWRNb2RlbElkLFxyXG4gICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIGFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhbnRocm9waWNfdmVyc2lvbjogXCJiZWRyb2NrLTIwMjMtMDUtMzFcIixcclxuICAgICAgICBtYXhfdG9rZW5zOiBtYXhUb2tlbnMsXHJcbiAgICAgICAgdGVtcGVyYXR1cmUsXHJcbiAgICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBwcm9tcHQgfV0sXHJcbiAgICAgIH0pLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IEludm9rZU1vZGVsQ29tbWFuZChpbnB1dCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGJlZHJvY2tDbGllbnQuc2VuZChjb21tYW5kKTtcclxuXHJcbiAgICAvLyBDb252ZXJ0IHJhdyByZXNwb25zZSBpbnRvIHRleHQgKHNhbWUgcGF0dGVybiBhcyBiZWRyb2NrLWNvbmZpZy50cylcclxuICAgIGNvbnN0IHJhd1RleHQgPSBhd2FpdCAoYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBib2R5OiBhbnkgPSAocmVzcG9uc2UgYXMgYW55KS5ib2R5O1xyXG4gICAgICBpZiAodHlwZW9mIGJvZHk/LnRyYW5zZm9ybVRvQnl0ZUFycmF5ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGF3YWl0IGJvZHkudHJhbnNmb3JtVG9CeXRlQXJyYXkoKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShib2R5KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gU3RyaW5nKGJvZHkgPz8gXCJcIik7XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlQm9keSA9IEpTT04ucGFyc2UocmF3VGV4dCB8fCBcInt9XCIpO1xyXG4gICAgY29uc3QgY2xhdWRlVGV4dCA9IHJlc3BvbnNlQm9keT8uY29udGVudD8uWzBdPy50ZXh0IHx8IFwiXCI7XHJcblxyXG4gICAgcmV0dXJuIGNsYXVkZVRleHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnN0IG1zZyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCI7XHJcbiAgICBcclxuICAgIC8vIEluY2x1ZGUgcmVzb2x2ZWQgbW9kZWwgSUQgaW4gdmFsaWRhdGlvbiBlcnJvciBsb2dzIGZvciBkZWJ1Z2dpbmdcclxuICAgIGlmIChtc2cuaW5jbHVkZXMoXCJWYWxpZGF0aW9uRXhjZXB0aW9uXCIpKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbQmVkcm9jayBPQ1JdIFZhbGlkYXRpb24gZXJyb3IgZm9yIG1vZGVsOlwiLCByZXNvbHZlZE1vZGVsSWQgfHwgXCJ1bmtub3duXCIsIGVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZS10aHJvdyB3aXRoIGNvbnRleHQgKG1hdGNoZXMgYmVkcm9jay1jb25maWcudHMgZXJyb3IgaGFuZGxpbmcpXHJcbiAgICBpZiAobXNnLmluY2x1ZGVzKFwiVW5yZWNvZ25pemVkQ2xpZW50RXhjZXB0aW9uXCIpIHx8IG1zZy5pbmNsdWRlcyhcIkludmFsaWRTaWduYXR1cmVFeGNlcHRpb25cIikpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVdTIEJlZHJvY2sgYXV0aGVudGljYXRpb24gZmFpbGVkLlwiKTtcclxuICAgIH1cclxuICAgIGlmIChtc2cuaW5jbHVkZXMoXCJWYWxpZGF0aW9uRXhjZXB0aW9uXCIpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFXUyBCZWRyb2NrIHZhbGlkYXRpb24gZXJyb3I6IFwiICsgbXNnKTtcclxuICAgIH1cclxuICAgIGlmIChtc2cuaW5jbHVkZXMoXCJNb2RlbE5vdFJlYWR5RXhjZXB0aW9uXCIpIHx8IG1zZy5pbmNsdWRlcyhcIlRocm90dGxpbmdFeGNlcHRpb25cIikpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVdTIEJlZHJvY2sgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1zZy5pbmNsdWRlcyhcIkFjY2Vzc0RlbmllZEV4Y2VwdGlvblwiKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQZXJtaXNzaW9uIGRlbmllZCBmb3IgQVdTIEJlZHJvY2suXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcihcIkJlZHJvY2sgZXh0cmFjdGlvbiBmYWlsZWQ6IFwiICsgbXNnKTtcclxuICB9XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJJbnZva2VNb2RlbENvbW1hbmQiLCJiZWRyb2NrQ2xpZW50IiwiQ0xBVURFX09QVVNfTU9ERUxfSUQiLCJDTEFVREVfU09OTkVUX01PREVMX0lEIiwiQ0xBVURFX09QVVNfUFJPRklMRV9BUk4iLCJDTEFVREVfU09OTkVUX1BST0ZJTEVfQVJOIiwiREVGQVVMVF9NT0RFTF9JRCIsInByb2Nlc3MiLCJlbnYiLCJCRURST0NLX0xJR0hUX01PREVMX0lEIiwiQkVEUk9DS19NT0RFTF9JRCIsImdldFJlZ2lvbkZyb21Bcm4iLCJhcm4iLCJtYXRjaCIsInJlc29sdmVNb2RlbElkIiwicHJlZmVycmVkIiwiY29uZmlndXJlZFJlZ2lvbiIsIkFXU19SRUdJT04iLCJBV1NfQkVEUk9DS19SRUdJT04iLCJtb2RlbElkIiwiaXNBbHJlYWR5QXJuIiwic3RhcnRzV2l0aCIsImFyblJlZ2lvbiIsImNvbnNvbGUiLCJlcnJvciIsImxvZyIsInN1YnN0cmluZyIsInJlc29sdmVkTW9kZWxJZCIsInRyaW0iLCJFcnJvciIsImNhbGxCZWRyb2NrRm9yRXh0cmFjdGlvbiIsInByb21wdCIsIm9wdGlvbnMiLCJtYXhUb2tlbnMiLCJ0ZW1wZXJhdHVyZSIsImlucHV0IiwiY29udGVudFR5cGUiLCJhY2NlcHQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFudGhyb3BpY192ZXJzaW9uIiwibWF4X3Rva2VucyIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJjb21tYW5kIiwicmVzcG9uc2UiLCJzZW5kIiwicmF3VGV4dCIsInRyYW5zZm9ybVRvQnl0ZUFycmF5IiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJVaW50OEFycmF5IiwiU3RyaW5nIiwicmVzcG9uc2VCb2R5IiwicGFyc2UiLCJjbGF1ZGVUZXh0IiwidGV4dCIsIm1zZyIsIm1lc3NhZ2UiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/bedrockClient.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/normalizer.ts":
/*!************************************!*\
  !*** ./src/services/normalizer.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   normalizePackageRow: () => (/* binding */ normalizePackageRow),\n/* harmony export */   validatePackageBatch: () => (/* binding */ validatePackageBatch)\n/* harmony export */ });\n/* harmony import */ var _lib_matching__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/matching */ \"(rsc)/./src/lib/matching.ts\");\n\nconst REQUIRED_FIELDS = [\n    \"title\",\n    \"hospital_name\",\n    \"treatment_name\",\n    \"price\",\n    \"currency\"\n];\nconst ALLOWED_CURRENCIES = [\n    \"USD\",\n    \"THB\",\n    \"EUR\",\n    \"GBP\",\n    \"SGD\",\n    \"MYR\",\n    \"KRW\"\n];\n/**\r\n * normalizePackageRow\r\n * -------------------\r\n * Cleans and normalizes a partially filled PackageRow object.\r\n * - Trims string fields and normalizes currency codes\r\n * - Parses numeric fields (price, original_price, commission)\r\n * - Applies default booleans/status values\r\n * - Runs fuzzy matching helpers and captures warnings\r\n */ function normalizePackageRow(row) {\n    const warnings = [\n        ...row._meta?.warnings ?? []\n    ];\n    const matcher = {\n        ...row._meta?.matcher ?? {}\n    };\n    const sanitized = {\n        title: normalizeString(row.title),\n        description: normalizeOptional(row.description),\n        details: normalizeOptional(row.details),\n        hospital_name: normalizeString(row.hospital_name),\n        treatment_name: normalizeString(row.treatment_name),\n        sub_treatments: normalizeOptional(row.sub_treatments),\n        price: parseNumber(row.price, \"price\", warnings),\n        original_price: parseOptionalNumber(row.original_price, \"original_price\", warnings),\n        currency: normalizeCurrency(row.currency, warnings),\n        duration: normalizeOptional(row.duration),\n        treatment_category: normalizeOptional(row.treatment_category),\n        anaesthesia: normalizeOptional(row.anaesthesia),\n        commission: parseOptionalNumber(row.commission, \"commission\", warnings),\n        featured: normalizeBoolean(row.featured, false),\n        status: normalizeStatus(row.status, warnings),\n        doctor_name: normalizeOptional(row.doctor_name),\n        is_le_package: normalizeBoolean(row.is_le_package, false),\n        includes: normalizeOptional(row.includes),\n        image_file_id: normalizeOptional(row.image_file_id),\n        hospital_location: normalizeOptional(row.hospital_location),\n        category: normalizeOptional(row.category),\n        hospital_country: normalizeOptional(row.hospital_country),\n        translation_title: normalizeOptional(row.translation_title),\n        translation_description: normalizeOptional(row.translation_description),\n        translation_details: normalizeOptional(row.translation_details),\n        translation: normalizeOptional(row.translation),\n        _meta: {\n            ...row._meta,\n            warnings,\n            matcher\n        }\n    };\n    applyMatching(\"hospital\", sanitized, matcher, warnings);\n    applyMatching(\"treatment\", sanitized, matcher, warnings);\n    return sanitized;\n}\n/**\r\n * validatePackageBatch\r\n * --------------------\r\n * Splits a list of PackageRow objects into valid / warning / invalid buckets.\r\n */ function validatePackageBatch(rows) {\n    const validPackages = [];\n    const packagesWithWarnings = [];\n    const invalidPackages = [];\n    for (const row of rows){\n        const missingRequired = REQUIRED_FIELDS.filter((field)=>{\n            if (field === \"price\") {\n                return row.price === null || row.price === undefined;\n            }\n            return !row[field]?.toString().trim();\n        });\n        if (missingRequired.length) {\n            row._meta = {\n                ...row._meta,\n                warnings: [\n                    ...row._meta?.warnings ?? [],\n                    `Missing required fields: ${missingRequired.join(\", \")}`\n                ]\n            };\n            invalidPackages.push(row);\n            continue;\n        }\n        const hasWarnings = (row._meta?.warnings ?? []).length > 0;\n        if (hasWarnings) {\n            packagesWithWarnings.push(row);\n        } else {\n            validPackages.push(row);\n        }\n    }\n    return {\n        validPackages,\n        packagesWithWarnings,\n        invalidPackages\n    };\n}\nfunction normalizeString(value) {\n    return (value ?? \"\").trim();\n}\nfunction normalizeOptional(value) {\n    const trimmed = (value ?? \"\").trim();\n    return trimmed.length ? trimmed : undefined;\n}\nfunction parseNumber(value, field, warnings) {\n    if (value === null || value === undefined || value === \"\") {\n        warnings.push(`${field} missing; set to null`);\n        return null;\n    }\n    const parsed = Number(value);\n    if (Number.isNaN(parsed)) {\n        warnings.push(`${field} is not a number; set to null`);\n        return null;\n    }\n    return parsed;\n}\nfunction parseOptionalNumber(value, field, warnings) {\n    if (value === null || value === undefined || value === \"\") {\n        return undefined;\n    }\n    const parsed = Number(value);\n    if (Number.isNaN(parsed)) {\n        warnings.push(`${field} is not a number; set to null`);\n        return null;\n    }\n    return parsed;\n}\nfunction normalizeCurrency(value, warnings) {\n    if (!value) {\n        warnings.push(\"currency missing; defaulting to USD\");\n        return \"USD\";\n    }\n    const upper = value.trim().toUpperCase().replace(\"à¸¿\", \"THB\");\n    if (!ALLOWED_CURRENCIES.includes(upper)) {\n        warnings.push(`currency ${value} not supported; defaulting to USD`);\n        return \"USD\";\n    }\n    return upper;\n}\nfunction normalizeBoolean(value, fallback) {\n    if (typeof value === \"boolean\") return value;\n    if (typeof value === \"string\") {\n        const normalized = value.toLowerCase();\n        if ([\n            \"true\",\n            \"1\",\n            \"yes\"\n        ].includes(normalized)) return true;\n        if ([\n            \"false\",\n            \"0\",\n            \"no\"\n        ].includes(normalized)) return false;\n    }\n    if (typeof value === \"number\") {\n        return value === 1;\n    }\n    return fallback;\n}\nfunction normalizeStatus(value, warnings) {\n    if (value === \"active\" || value === \"inactive\") {\n        return value;\n    }\n    warnings.push(\"status missing; defaulting to active\");\n    return \"active\";\n}\nfunction applyMatching(type, row, matcher, warnings) {\n    if (type === \"hospital\" && row.hospital_name) {\n        const result = (0,_lib_matching__WEBPACK_IMPORTED_MODULE_0__.matchHospitalName)(row.hospital_name);\n        matcher.hospitalScore = result.score;\n        if (result.value) {\n            row.hospital_name = result.value;\n        } else if (row.hospital_name) {\n            warnings.push(`Hospital not recognized: ${row.hospital_name}`);\n        }\n    }\n    if (type === \"treatment\" && row.treatment_name) {\n        const result = (0,_lib_matching__WEBPACK_IMPORTED_MODULE_0__.matchTreatmentName)(row.treatment_name);\n        matcher.treatmentScore = result.score;\n        if (result.value) {\n            row.treatment_name = result.value;\n        } else {\n            warnings.push(`Treatment not recognized: ${row.treatment_name}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBa0I7SUFDckQsSUFBSXFELFVBQVUsWUFBWUEsVUFBVSxZQUFZO1FBQzlDLE9BQU9BO0lBQ1Q7SUFDQXJELFNBQVNtRCxJQUFJLENBQUM7SUFDZCxPQUFPO0FBQ1Q7QUFFQSxTQUFTZCxjQUNQMkIsSUFBOEIsRUFDOUJqRSxHQUFlLEVBQ2ZHLE9BQWtELEVBQ2xERixRQUFrQjtJQUVsQixJQUFJZ0UsU0FBUyxjQUFjakUsSUFBSVUsYUFBYSxFQUFFO1FBQzVDLE1BQU13RCxTQUFTdkUsZ0VBQWlCQSxDQUFDSyxJQUFJVSxhQUFhO1FBQ2xEUCxRQUFRZ0UsYUFBYSxHQUFHRCxPQUFPRSxLQUFLO1FBQ3BDLElBQUlGLE9BQU9aLEtBQUssRUFBRTtZQUNoQnRELElBQUlVLGFBQWEsR0FBR3dELE9BQU9aLEtBQUs7UUFDbEMsT0FBTyxJQUFJdEQsSUFBSVUsYUFBYSxFQUFFO1lBQzVCVCxTQUFTbUQsSUFBSSxDQUFDLENBQUMseUJBQXlCLEVBQUVwRCxJQUFJVSxhQUFhLENBQUMsQ0FBQztRQUMvRDtJQUNGO0lBRUEsSUFBSXVELFNBQVMsZUFBZWpFLElBQUlXLGNBQWMsRUFBRTtRQUM5QyxNQUFNdUQsU0FBU3RFLGlFQUFrQkEsQ0FBQ0ksSUFBSVcsY0FBYztRQUNwRFIsUUFBUWtFLGNBQWMsR0FBR0gsT0FBT0UsS0FBSztRQUNyQyxJQUFJRixPQUFPWixLQUFLLEVBQUU7WUFDaEJ0RCxJQUFJVyxjQUFjLEdBQUd1RCxPQUFPWixLQUFLO1FBQ25DLE9BQU87WUFDTHJELFNBQVNtRCxJQUFJLENBQUMsQ0FBQywwQkFBMEIsRUFBRXBELElBQUlXLGNBQWMsQ0FBQyxDQUFDO1FBQ2pFO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2xlbWVkaWNhLWNsaW5pYy1vY3IvLi9zcmMvc2VydmljZXMvbm9ybWFsaXplci50cz8yNGRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhY2thZ2VSb3cgfSBmcm9tIFwiLi4vdHlwZXMvcGFja2FnZXNcIjtcclxuaW1wb3J0IHsgbWF0Y2hIb3NwaXRhbE5hbWUsIG1hdGNoVHJlYXRtZW50TmFtZSB9IGZyb20gXCIuLi9saWIvbWF0Y2hpbmdcIjtcclxuXHJcbmNvbnN0IFJFUVVJUkVEX0ZJRUxEUzogQXJyYXk8a2V5b2YgUGFja2FnZVJvdz4gPSBbXHJcbiAgXCJ0aXRsZVwiLFxyXG4gIFwiaG9zcGl0YWxfbmFtZVwiLFxyXG4gIFwidHJlYXRtZW50X25hbWVcIixcclxuICBcInByaWNlXCIsXHJcbiAgXCJjdXJyZW5jeVwiLFxyXG5dO1xyXG5cclxuY29uc3QgQUxMT1dFRF9DVVJSRU5DSUVTID0gW1wiVVNEXCIsIFwiVEhCXCIsIFwiRVVSXCIsIFwiR0JQXCIsIFwiU0dEXCIsIFwiTVlSXCIsIFwiS1JXXCJdO1xyXG5cclxuLyoqXHJcbiAqIG5vcm1hbGl6ZVBhY2thZ2VSb3dcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBDbGVhbnMgYW5kIG5vcm1hbGl6ZXMgYSBwYXJ0aWFsbHkgZmlsbGVkIFBhY2thZ2VSb3cgb2JqZWN0LlxyXG4gKiAtIFRyaW1zIHN0cmluZyBmaWVsZHMgYW5kIG5vcm1hbGl6ZXMgY3VycmVuY3kgY29kZXNcclxuICogLSBQYXJzZXMgbnVtZXJpYyBmaWVsZHMgKHByaWNlLCBvcmlnaW5hbF9wcmljZSwgY29tbWlzc2lvbilcclxuICogLSBBcHBsaWVzIGRlZmF1bHQgYm9vbGVhbnMvc3RhdHVzIHZhbHVlc1xyXG4gKiAtIFJ1bnMgZnV6enkgbWF0Y2hpbmcgaGVscGVycyBhbmQgY2FwdHVyZXMgd2FybmluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVQYWNrYWdlUm93KHJvdzogUGFydGlhbDxQYWNrYWdlUm93Pik6IFBhY2thZ2VSb3cge1xyXG4gIGNvbnN0IHdhcm5pbmdzID0gWy4uLihyb3cuX21ldGE/Lndhcm5pbmdzID8/IFtdKV07XHJcbiAgY29uc3QgbWF0Y2hlciA9IHsgLi4uKHJvdy5fbWV0YT8ubWF0Y2hlciA/PyB7fSkgfTtcclxuXHJcbiAgY29uc3Qgc2FuaXRpemVkOiBQYWNrYWdlUm93ID0ge1xyXG4gICAgdGl0bGU6IG5vcm1hbGl6ZVN0cmluZyhyb3cudGl0bGUpLFxyXG4gICAgZGVzY3JpcHRpb246IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy5kZXNjcmlwdGlvbiksXHJcbiAgICBkZXRhaWxzOiBub3JtYWxpemVPcHRpb25hbChyb3cuZGV0YWlscyksXHJcbiAgICBob3NwaXRhbF9uYW1lOiBub3JtYWxpemVTdHJpbmcocm93Lmhvc3BpdGFsX25hbWUpLFxyXG4gICAgdHJlYXRtZW50X25hbWU6IG5vcm1hbGl6ZVN0cmluZyhyb3cudHJlYXRtZW50X25hbWUpLFxyXG4gICAgc3ViX3RyZWF0bWVudHM6IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy5zdWJfdHJlYXRtZW50cyksXHJcbiAgICBwcmljZTogcGFyc2VOdW1iZXIocm93LnByaWNlLCBcInByaWNlXCIsIHdhcm5pbmdzKSxcclxuICAgIG9yaWdpbmFsX3ByaWNlOiBwYXJzZU9wdGlvbmFsTnVtYmVyKHJvdy5vcmlnaW5hbF9wcmljZSwgXCJvcmlnaW5hbF9wcmljZVwiLCB3YXJuaW5ncyksXHJcbiAgICBjdXJyZW5jeTogbm9ybWFsaXplQ3VycmVuY3kocm93LmN1cnJlbmN5LCB3YXJuaW5ncyksXHJcbiAgICBkdXJhdGlvbjogbm9ybWFsaXplT3B0aW9uYWwocm93LmR1cmF0aW9uKSxcclxuICAgIHRyZWF0bWVudF9jYXRlZ29yeTogbm9ybWFsaXplT3B0aW9uYWwocm93LnRyZWF0bWVudF9jYXRlZ29yeSksXHJcbiAgICBhbmFlc3RoZXNpYTogbm9ybWFsaXplT3B0aW9uYWwocm93LmFuYWVzdGhlc2lhKSxcclxuICAgIGNvbW1pc3Npb246IHBhcnNlT3B0aW9uYWxOdW1iZXIocm93LmNvbW1pc3Npb24sIFwiY29tbWlzc2lvblwiLCB3YXJuaW5ncyksXHJcbiAgICBmZWF0dXJlZDogbm9ybWFsaXplQm9vbGVhbihyb3cuZmVhdHVyZWQsIGZhbHNlKSxcclxuICAgIHN0YXR1czogbm9ybWFsaXplU3RhdHVzKHJvdy5zdGF0dXMsIHdhcm5pbmdzKSxcclxuICAgIGRvY3Rvcl9uYW1lOiBub3JtYWxpemVPcHRpb25hbChyb3cuZG9jdG9yX25hbWUpLFxyXG4gICAgaXNfbGVfcGFja2FnZTogbm9ybWFsaXplQm9vbGVhbihyb3cuaXNfbGVfcGFja2FnZSwgZmFsc2UpLFxyXG4gICAgaW5jbHVkZXM6IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy5pbmNsdWRlcyksXHJcbiAgICBpbWFnZV9maWxlX2lkOiBub3JtYWxpemVPcHRpb25hbChyb3cuaW1hZ2VfZmlsZV9pZCksXHJcbiAgICBob3NwaXRhbF9sb2NhdGlvbjogbm9ybWFsaXplT3B0aW9uYWwocm93Lmhvc3BpdGFsX2xvY2F0aW9uKSxcclxuICAgIGNhdGVnb3J5OiBub3JtYWxpemVPcHRpb25hbChyb3cuY2F0ZWdvcnkpLFxyXG4gICAgaG9zcGl0YWxfY291bnRyeTogbm9ybWFsaXplT3B0aW9uYWwocm93Lmhvc3BpdGFsX2NvdW50cnkpLFxyXG4gICAgdHJhbnNsYXRpb25fdGl0bGU6IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy50cmFuc2xhdGlvbl90aXRsZSksXHJcbiAgICB0cmFuc2xhdGlvbl9kZXNjcmlwdGlvbjogbm9ybWFsaXplT3B0aW9uYWwocm93LnRyYW5zbGF0aW9uX2Rlc2NyaXB0aW9uKSxcclxuICAgIHRyYW5zbGF0aW9uX2RldGFpbHM6IG5vcm1hbGl6ZU9wdGlvbmFsKHJvdy50cmFuc2xhdGlvbl9kZXRhaWxzKSxcclxuICAgIHRyYW5zbGF0aW9uOiBub3JtYWxpemVPcHRpb25hbChyb3cudHJhbnNsYXRpb24pLFxyXG4gICAgX21ldGE6IHtcclxuICAgICAgLi4ucm93Ll9tZXRhLFxyXG4gICAgICB3YXJuaW5ncyxcclxuICAgICAgbWF0Y2hlcixcclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbiAgYXBwbHlNYXRjaGluZyhcImhvc3BpdGFsXCIsIHNhbml0aXplZCwgbWF0Y2hlciwgd2FybmluZ3MpO1xyXG4gIGFwcGx5TWF0Y2hpbmcoXCJ0cmVhdG1lbnRcIiwgc2FuaXRpemVkLCBtYXRjaGVyLCB3YXJuaW5ncyk7XHJcblxyXG4gIHJldHVybiBzYW5pdGl6ZWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiB2YWxpZGF0ZVBhY2thZ2VCYXRjaFxyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBTcGxpdHMgYSBsaXN0IG9mIFBhY2thZ2VSb3cgb2JqZWN0cyBpbnRvIHZhbGlkIC8gd2FybmluZyAvIGludmFsaWQgYnVja2V0cy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBhY2thZ2VCYXRjaChyb3dzOiBQYWNrYWdlUm93W10pOiB7XHJcbiAgdmFsaWRQYWNrYWdlczogUGFja2FnZVJvd1tdO1xyXG4gIHBhY2thZ2VzV2l0aFdhcm5pbmdzOiBQYWNrYWdlUm93W107XHJcbiAgaW52YWxpZFBhY2thZ2VzOiBQYWNrYWdlUm93W107XHJcbn0ge1xyXG4gIGNvbnN0IHZhbGlkUGFja2FnZXM6IFBhY2thZ2VSb3dbXSA9IFtdO1xyXG4gIGNvbnN0IHBhY2thZ2VzV2l0aFdhcm5pbmdzOiBQYWNrYWdlUm93W10gPSBbXTtcclxuICBjb25zdCBpbnZhbGlkUGFja2FnZXM6IFBhY2thZ2VSb3dbXSA9IFtdO1xyXG5cclxuICBmb3IgKGNvbnN0IHJvdyBvZiByb3dzKSB7XHJcbiAgICBjb25zdCBtaXNzaW5nUmVxdWlyZWQgPSBSRVFVSVJFRF9GSUVMRFMuZmlsdGVyKChmaWVsZCkgPT4ge1xyXG4gICAgICBpZiAoZmllbGQgPT09IFwicHJpY2VcIikge1xyXG4gICAgICAgIHJldHVybiByb3cucHJpY2UgPT09IG51bGwgfHwgcm93LnByaWNlID09PSB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuICFyb3dbZmllbGRdPy50b1N0cmluZygpLnRyaW0oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChtaXNzaW5nUmVxdWlyZWQubGVuZ3RoKSB7XHJcbiAgICAgIHJvdy5fbWV0YSA9IHtcclxuICAgICAgICAuLi5yb3cuX21ldGEsXHJcbiAgICAgICAgd2FybmluZ3M6IFtcclxuICAgICAgICAgIC4uLihyb3cuX21ldGE/Lndhcm5pbmdzID8/IFtdKSxcclxuICAgICAgICAgIGBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogJHttaXNzaW5nUmVxdWlyZWQuam9pbihcIiwgXCIpfWAsXHJcbiAgICAgICAgXSxcclxuICAgICAgfTtcclxuICAgICAgaW52YWxpZFBhY2thZ2VzLnB1c2gocm93KTtcclxuICAgICAgY29udGludWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaGFzV2FybmluZ3MgPSAocm93Ll9tZXRhPy53YXJuaW5ncyA/PyBbXSkubGVuZ3RoID4gMDtcclxuICAgIGlmIChoYXNXYXJuaW5ncykge1xyXG4gICAgICBwYWNrYWdlc1dpdGhXYXJuaW5ncy5wdXNoKHJvdyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWxpZFBhY2thZ2VzLnB1c2gocm93KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7IHZhbGlkUGFja2FnZXMsIHBhY2thZ2VzV2l0aFdhcm5pbmdzLCBpbnZhbGlkUGFja2FnZXMgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplU3RyaW5nKHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xyXG4gIHJldHVybiAodmFsdWUgPz8gXCJcIikudHJpbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3JtYWxpemVPcHRpb25hbCh2YWx1ZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XHJcbiAgY29uc3QgdHJpbW1lZCA9ICh2YWx1ZSA/PyBcIlwiKS50cmltKCk7XHJcbiAgcmV0dXJuIHRyaW1tZWQubGVuZ3RoID8gdHJpbW1lZCA6IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VOdW1iZXIodmFsdWU6IGFueSwgZmllbGQ6IHN0cmluZywgd2FybmluZ3M6IHN0cmluZ1tdKTogbnVtYmVyIHwgbnVsbCB7XHJcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IFwiXCIpIHtcclxuICAgIHdhcm5pbmdzLnB1c2goYCR7ZmllbGR9IG1pc3Npbmc7IHNldCB0byBudWxsYCk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgY29uc3QgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcclxuICBpZiAoTnVtYmVyLmlzTmFOKHBhcnNlZCkpIHtcclxuICAgIHdhcm5pbmdzLnB1c2goYCR7ZmllbGR9IGlzIG5vdCBhIG51bWJlcjsgc2V0IHRvIG51bGxgKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICByZXR1cm4gcGFyc2VkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZU9wdGlvbmFsTnVtYmVyKFxyXG4gIHZhbHVlOiBhbnksXHJcbiAgZmllbGQ6IHN0cmluZyxcclxuICB3YXJuaW5nczogc3RyaW5nW11cclxuKTogbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZCB7XHJcbiAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IFwiXCIpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG4gIGNvbnN0IHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XHJcbiAgaWYgKE51bWJlci5pc05hTihwYXJzZWQpKSB7XHJcbiAgICB3YXJuaW5ncy5wdXNoKGAke2ZpZWxkfSBpcyBub3QgYSBudW1iZXI7IHNldCB0byBudWxsYCk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgcmV0dXJuIHBhcnNlZDtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplQ3VycmVuY3kodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCwgd2FybmluZ3M6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICBpZiAoIXZhbHVlKSB7XHJcbiAgICB3YXJuaW5ncy5wdXNoKFwiY3VycmVuY3kgbWlzc2luZzsgZGVmYXVsdGluZyB0byBVU0RcIik7XHJcbiAgICByZXR1cm4gXCJVU0RcIjtcclxuICB9XHJcbiAgY29uc3QgdXBwZXIgPSB2YWx1ZS50cmltKCkudG9VcHBlckNhc2UoKS5yZXBsYWNlKFwi4Li/XCIsIFwiVEhCXCIpO1xyXG4gIGlmICghQUxMT1dFRF9DVVJSRU5DSUVTLmluY2x1ZGVzKHVwcGVyKSkge1xyXG4gICAgd2FybmluZ3MucHVzaChgY3VycmVuY3kgJHt2YWx1ZX0gbm90IHN1cHBvcnRlZDsgZGVmYXVsdGluZyB0byBVU0RgKTtcclxuICAgIHJldHVybiBcIlVTRFwiO1xyXG4gIH1cclxuICByZXR1cm4gdXBwZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUJvb2xlYW4odmFsdWU6IGFueSwgZmFsbGJhY2s6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikgcmV0dXJuIHZhbHVlO1xyXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKFtcInRydWVcIiwgXCIxXCIsIFwieWVzXCJdLmluY2x1ZGVzKG5vcm1hbGl6ZWQpKSByZXR1cm4gdHJ1ZTtcclxuICAgIGlmIChbXCJmYWxzZVwiLCBcIjBcIiwgXCJub1wiXS5pbmNsdWRlcyhub3JtYWxpemVkKSkgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IDE7XHJcbiAgfVxyXG4gIHJldHVybiBmYWxsYmFjaztcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplU3RhdHVzKHZhbHVlOiBhbnksIHdhcm5pbmdzOiBzdHJpbmdbXSk6IFwiYWN0aXZlXCIgfCBcImluYWN0aXZlXCIge1xyXG4gIGlmICh2YWx1ZSA9PT0gXCJhY3RpdmVcIiB8fCB2YWx1ZSA9PT0gXCJpbmFjdGl2ZVwiKSB7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfVxyXG4gIHdhcm5pbmdzLnB1c2goXCJzdGF0dXMgbWlzc2luZzsgZGVmYXVsdGluZyB0byBhY3RpdmVcIik7XHJcbiAgcmV0dXJuIFwiYWN0aXZlXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwcGx5TWF0Y2hpbmcoXHJcbiAgdHlwZTogXCJob3NwaXRhbFwiIHwgXCJ0cmVhdG1lbnRcIixcclxuICByb3c6IFBhY2thZ2VSb3csXHJcbiAgbWF0Y2hlcjogUmVjb3JkPHN0cmluZywgbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZD4sXHJcbiAgd2FybmluZ3M6IHN0cmluZ1tdXHJcbikge1xyXG4gIGlmICh0eXBlID09PSBcImhvc3BpdGFsXCIgJiYgcm93Lmhvc3BpdGFsX25hbWUpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IG1hdGNoSG9zcGl0YWxOYW1lKHJvdy5ob3NwaXRhbF9uYW1lKTtcclxuICAgIG1hdGNoZXIuaG9zcGl0YWxTY29yZSA9IHJlc3VsdC5zY29yZTtcclxuICAgIGlmIChyZXN1bHQudmFsdWUpIHtcclxuICAgICAgcm93Lmhvc3BpdGFsX25hbWUgPSByZXN1bHQudmFsdWU7XHJcbiAgICB9IGVsc2UgaWYgKHJvdy5ob3NwaXRhbF9uYW1lKSB7XHJcbiAgICAgIHdhcm5pbmdzLnB1c2goYEhvc3BpdGFsIG5vdCByZWNvZ25pemVkOiAke3Jvdy5ob3NwaXRhbF9uYW1lfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKHR5cGUgPT09IFwidHJlYXRtZW50XCIgJiYgcm93LnRyZWF0bWVudF9uYW1lKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBtYXRjaFRyZWF0bWVudE5hbWUocm93LnRyZWF0bWVudF9uYW1lKTtcclxuICAgIG1hdGNoZXIudHJlYXRtZW50U2NvcmUgPSByZXN1bHQuc2NvcmU7XHJcbiAgICBpZiAocmVzdWx0LnZhbHVlKSB7XHJcbiAgICAgIHJvdy50cmVhdG1lbnRfbmFtZSA9IHJlc3VsdC52YWx1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdhcm5pbmdzLnB1c2goYFRyZWF0bWVudCBub3QgcmVjb2duaXplZDogJHtyb3cudHJlYXRtZW50X25hbWV9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4iXSwibmFtZXMiOlsibWF0Y2hIb3NwaXRhbE5hbWUiLCJtYXRjaFRyZWF0bWVudE5hbWUiLCJSRVFVSVJFRF9GSUVMRFMiLCJBTExPV0VEX0NVUlJFTkNJRVMiLCJub3JtYWxpemVQYWNrYWdlUm93Iiwicm93Iiwid2FybmluZ3MiLCJfbWV0YSIsIm1hdGNoZXIiLCJzYW5pdGl6ZWQiLCJ0aXRsZSIsIm5vcm1hbGl6ZVN0cmluZyIsImRlc2NyaXB0aW9uIiwibm9ybWFsaXplT3B0aW9uYWwiLCJkZXRhaWxzIiwiaG9zcGl0YWxfbmFtZSIsInRyZWF0bWVudF9uYW1lIiwic3ViX3RyZWF0bWVudHMiLCJwcmljZSIsInBhcnNlTnVtYmVyIiwib3JpZ2luYWxfcHJpY2UiLCJwYXJzZU9wdGlvbmFsTnVtYmVyIiwiY3VycmVuY3kiLCJub3JtYWxpemVDdXJyZW5jeSIsImR1cmF0aW9uIiwidHJlYXRtZW50X2NhdGVnb3J5IiwiYW5hZXN0aGVzaWEiLCJjb21taXNzaW9uIiwiZmVhdHVyZWQiLCJub3JtYWxpemVCb29sZWFuIiwic3RhdHVzIiwibm9ybWFsaXplU3RhdHVzIiwiZG9jdG9yX25hbWUiLCJpc19sZV9wYWNrYWdlIiwiaW5jbHVkZXMiLCJpbWFnZV9maWxlX2lkIiwiaG9zcGl0YWxfbG9jYXRpb24iLCJjYXRlZ29yeSIsImhvc3BpdGFsX2NvdW50cnkiLCJ0cmFuc2xhdGlvbl90aXRsZSIsInRyYW5zbGF0aW9uX2Rlc2NyaXB0aW9uIiwidHJhbnNsYXRpb25fZGV0YWlscyIsInRyYW5zbGF0aW9uIiwiYXBwbHlNYXRjaGluZyIsInZhbGlkYXRlUGFja2FnZUJhdGNoIiwicm93cyIsInZhbGlkUGFja2FnZXMiLCJwYWNrYWdlc1dpdGhXYXJuaW5ncyIsImludmFsaWRQYWNrYWdlcyIsIm1pc3NpbmdSZXF1aXJlZCIsImZpbHRlciIsImZpZWxkIiwidW5kZWZpbmVkIiwidG9TdHJpbmciLCJ0cmltIiwibGVuZ3RoIiwiam9pbiIsInB1c2giLCJoYXNXYXJuaW5ncyIsInZhbHVlIiwidHJpbW1lZCIsInBhcnNlZCIsIk51bWJlciIsImlzTmFOIiwidXBwZXIiLCJ0b1VwcGVyQ2FzZSIsInJlcGxhY2UiLCJmYWxsYmFjayIsIm5vcm1hbGl6ZWQiLCJ0b0xvd2VyQ2FzZSIsInR5cGUiLCJyZXN1bHQiLCJob3NwaXRhbFNjb3JlIiwic2NvcmUiLCJ0cmVhdG1lbnRTY29yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/normalizer.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ocr.ts":
/*!*****************************!*\
  !*** ./src/services/ocr.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleUploadAndExtractOcr: () => (/* binding */ handleUploadAndExtractOcr),\n/* harmony export */   runOcrOnFiles: () => (/* binding */ runOcrOnFiles)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var tesseract_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! tesseract.js */ \"(rsc)/./node_modules/tesseract.js/src/index.js\");\n/* harmony import */ var tesseract_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tesseract_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var pdf_parse__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! pdf-parse */ \"(rsc)/./node_modules/pdf-parse/index.js\");\n/* harmony import */ var pdf_parse__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(pdf_parse__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\nconst TEMP_DIR = (0,path__WEBPACK_IMPORTED_MODULE_1__.join)(process.cwd(), \"tmp\", \"ocr-uploads\");\nconst MAX_FILE_SIZE_BYTES = Number(process.env.OCR_MAX_FILE_MB || 25) * 1024 * 1024;\nconst ALLOWED_MIME_TYPES = new Set([\n    \"application/pdf\",\n    \"image/jpeg\",\n    \"image/png\",\n    \"image/heic\",\n    \"image/heif\"\n]);\n/**\r\n * handleUploadAndExtractOcr\r\n * -------------------------\r\n * Accepts uploaded files from a NextRequest, validates them, writes the content\r\n * to a temp folder, runs OCR per page, and returns a list of OcrPage objects.\r\n */ async function handleUploadAndExtractOcr(req) {\n    ensureTempDirectory();\n    const formData = await req.formData();\n    const incomingFiles = extractFilesFromFormData(formData);\n    if (!incomingFiles.length) {\n        throw createHttpError(400, \"No file provided. Please append `file` to FormData.\");\n    }\n    const savedFiles = [];\n    for (const file of incomingFiles){\n        if (!ALLOWED_MIME_TYPES.has(file.type)) {\n            throw createHttpError(400, \"Unsupported file type. Please upload PDF, JPG, PNG, or HEIC.\");\n        }\n        if (file.size > MAX_FILE_SIZE_BYTES) {\n            throw createHttpError(413, `File exceeds the maximum allowed size of ${Math.round(MAX_FILE_SIZE_BYTES / (1024 * 1024))} MB.`);\n        }\n        const fileId = (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomUUID)();\n        const fileName = file.name || `upload-${fileId}`;\n        const tempPath = (0,path__WEBPACK_IMPORTED_MODULE_1__.join)(TEMP_DIR, `${fileId}-${fileName}`);\n        const buffer = Buffer.from(await file.arrayBuffer());\n        await fs__WEBPACK_IMPORTED_MODULE_0__.promises.writeFile(tempPath, buffer);\n        savedFiles.push({\n            fileId,\n            fileName,\n            mimeType: file.type,\n            path: tempPath\n        });\n    }\n    const ocrPages = await runOcrOnFiles(savedFiles);\n    const filesMeta = summarizeFiles(savedFiles, ocrPages);\n    return {\n        batchId: (0,crypto__WEBPACK_IMPORTED_MODULE_2__.randomUUID)(),\n        ocrPages,\n        filesMeta\n    };\n}\n/**\r\n * runOcrOnFiles\r\n * --------------\r\n * Runs Tesseract OCR on each page of the uploaded files and returns\r\n * OcrPage objects that retain page ordering and metadata.\r\n */ async function runOcrOnFiles(files) {\n    const pages = [];\n    for (const file of files){\n        if (file.mimeType === \"application/pdf\") {\n            const pdfPages = await runOcrOnPdf(file);\n            pages.push(...pdfPages);\n            continue;\n        }\n        const text = await runTesseract(await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(file.path));\n        pages.push({\n            fileId: file.fileId,\n            fileName: file.fileName,\n            pageNumber: 1,\n            rawText: cleanText(text)\n        });\n    }\n    return pages;\n}\nasync function runOcrOnPdf(file) {\n    const buffer = await fs__WEBPACK_IMPORTED_MODULE_0__.promises.readFile(file.path);\n    const pageTexts = [];\n    const options = {\n        pagerender: async (pageData)=>{\n            const textContent = await pageData.getTextContent();\n            const textItems = textContent.items.map((item)=>item?.str ?? \"\").join(\" \");\n            const cleaned = cleanText(textItems);\n            pageTexts.push(cleaned);\n            return cleaned;\n        }\n    };\n    const parsed = await pdf_parse__WEBPACK_IMPORTED_MODULE_4___default()(buffer, options);\n    if (!pageTexts.length && parsed.text) {\n        parsed.text.split(/\\n{2,}/).map((chunk)=>cleanText(chunk)).filter(Boolean).forEach((chunk)=>pageTexts.push(chunk));\n    }\n    if (!pageTexts.length) {\n        pageTexts.push(\"\");\n    }\n    return pageTexts.map((rawText, index)=>({\n            fileId: file.fileId,\n            fileName: file.fileName,\n            pageNumber: index + 1,\n            rawText\n        }));\n}\nasync function runTesseract(buffer) {\n    const result = await tesseract_js__WEBPACK_IMPORTED_MODULE_3___default().recognize(buffer, \"eng\", {\n        tessjs_create_pdf: \"0\"\n    });\n    return result.data.text || \"\";\n}\nfunction cleanText(text) {\n    return text.replace(/\\s+/g, \" \").replace(/[^\\x20-\\x7E]+/g, \" \").trim();\n}\nfunction ensureTempDirectory() {\n    (0,fs__WEBPACK_IMPORTED_MODULE_0__.mkdirSync)(TEMP_DIR, {\n        recursive: true\n    });\n}\nfunction extractFilesFromFormData(formData) {\n    const files = [];\n    const primary = formData.get(\"file\");\n    if (primary instanceof File) {\n        files.push(primary);\n    }\n    const multiples = formData.getAll(\"files[]\");\n    for (const entry of multiples){\n        if (entry instanceof File) {\n            files.push(entry);\n        }\n    }\n    return files;\n}\nfunction summarizeFiles(files, pages) {\n    return files.map((file)=>({\n            file_id: file.fileId,\n            original_name: file.fileName,\n            page_count: pages.filter((page)=>page.fileId === file.fileId).length\n        }));\n}\nfunction createHttpError(status, message) {\n    const error = new Error(message);\n    error.status = status;\n    return error;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akUsU0FBU2tFLEdBQUcsQ0FBQztJQUM3QixJQUFJRCxtQkFBbUJFLE1BQU07UUFDM0J0QyxNQUFNUixJQUFJLENBQUM0QztJQUNiO0lBQ0EsTUFBTUcsWUFBWXBFLFNBQVNxRSxNQUFNLENBQUM7SUFDbEMsS0FBSyxNQUFNQyxTQUFTRixVQUFXO1FBQzdCLElBQUlFLGlCQUFpQkgsTUFBTTtZQUN6QnRDLE1BQU1SLElBQUksQ0FBQ2lEO1FBQ2I7SUFDRjtJQUNBLE9BQU96QztBQUNUO0FBRUEsU0FBU0YsZUFBZUUsS0FBa0IsRUFBRUMsS0FBZ0I7SUFDMUQsT0FBT0QsTUFBTWtCLEdBQUcsQ0FBQyxDQUFDekMsT0FBVTtZQUMxQmlFLFNBQVNqRSxLQUFLTSxNQUFNO1lBQ3BCNEQsZUFBZWxFLEtBQUtPLFFBQVE7WUFDNUI0RCxZQUFZM0MsTUFBTXdCLE1BQU0sQ0FBQyxDQUFDb0IsT0FBU0EsS0FBSzlELE1BQU0sS0FBS04sS0FBS00sTUFBTSxFQUFFVCxNQUFNO1FBQ3hFO0FBQ0Y7QUFFQSxTQUFTQyxnQkFBZ0J1RSxNQUFjLEVBQUVDLE9BQWU7SUFDdEQsTUFBTUMsUUFBUSxJQUFJQyxNQUFNRjtJQUN4QkMsTUFBTUYsTUFBTSxHQUFHQTtJQUNmLE9BQU9FO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZW1lZGljYS1jbGluaWMtb2NyLy4vc3JjL3NlcnZpY2VzL29jci50cz9kNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSBcImZzXCI7XHJcbmltcG9ydCB7IG1rZGlyU3luYyB9IGZyb20gXCJmc1wiO1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyBqb2luIH0gZnJvbSBcInBhdGhcIjtcclxuaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gXCJjcnlwdG9cIjtcclxuaW1wb3J0IFRlc3NlcmFjdCBmcm9tIFwidGVzc2VyYWN0LmpzXCI7XHJcbmltcG9ydCBwZGZQYXJzZSBmcm9tIFwicGRmLXBhcnNlXCI7XHJcbmltcG9ydCB7IE9jclBhZ2UgfSBmcm9tIFwiLi4vdHlwZXMvcGFja2FnZXNcIjtcclxuXHJcbmNvbnN0IFRFTVBfRElSID0gam9pbihwcm9jZXNzLmN3ZCgpLCBcInRtcFwiLCBcIm9jci11cGxvYWRzXCIpO1xyXG5jb25zdCBNQVhfRklMRV9TSVpFX0JZVEVTID1cclxuICBOdW1iZXIocHJvY2Vzcy5lbnYuT0NSX01BWF9GSUxFX01CIHx8IDI1KSAqIDEwMjQgKiAxMDI0O1xyXG5jb25zdCBBTExPV0VEX01JTUVfVFlQRVMgPSBuZXcgU2V0KFtcclxuICBcImFwcGxpY2F0aW9uL3BkZlwiLFxyXG4gIFwiaW1hZ2UvanBlZ1wiLFxyXG4gIFwiaW1hZ2UvcG5nXCIsXHJcbiAgXCJpbWFnZS9oZWljXCIsXHJcbiAgXCJpbWFnZS9oZWlmXCIsXHJcbl0pO1xyXG5cclxuLyoqXHJcbiAqIGhhbmRsZVVwbG9hZEFuZEV4dHJhY3RPY3JcclxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gKiBBY2NlcHRzIHVwbG9hZGVkIGZpbGVzIGZyb20gYSBOZXh0UmVxdWVzdCwgdmFsaWRhdGVzIHRoZW0sIHdyaXRlcyB0aGUgY29udGVudFxyXG4gKiB0byBhIHRlbXAgZm9sZGVyLCBydW5zIE9DUiBwZXIgcGFnZSwgYW5kIHJldHVybnMgYSBsaXN0IG9mIE9jclBhZ2Ugb2JqZWN0cy5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVVcGxvYWRBbmRFeHRyYWN0T2NyKHJlcTogTmV4dFJlcXVlc3QpOiBQcm9taXNlPHtcclxuICBiYXRjaElkOiBzdHJpbmc7XHJcbiAgb2NyUGFnZXM6IE9jclBhZ2VbXTtcclxuICBmaWxlc01ldGE6IHtcclxuICAgIGZpbGVfaWQ6IHN0cmluZztcclxuICAgIG9yaWdpbmFsX25hbWU6IHN0cmluZztcclxuICAgIHBhZ2VfY291bnQ/OiBudW1iZXI7XHJcbiAgfVtdO1xyXG59PiB7XHJcbiAgZW5zdXJlVGVtcERpcmVjdG9yeSgpO1xyXG4gIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxLmZvcm1EYXRhKCk7XHJcbiAgY29uc3QgaW5jb21pbmdGaWxlcyA9IGV4dHJhY3RGaWxlc0Zyb21Gb3JtRGF0YShmb3JtRGF0YSk7XHJcblxyXG4gIGlmICghaW5jb21pbmdGaWxlcy5sZW5ndGgpIHtcclxuICAgIHRocm93IGNyZWF0ZUh0dHBFcnJvcig0MDAsIFwiTm8gZmlsZSBwcm92aWRlZC4gUGxlYXNlIGFwcGVuZCBgZmlsZWAgdG8gRm9ybURhdGEuXCIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgc2F2ZWRGaWxlczogU2F2ZWRGaWxlW10gPSBbXTtcclxuXHJcbiAgZm9yIChjb25zdCBmaWxlIG9mIGluY29taW5nRmlsZXMpIHtcclxuICAgIGlmICghQUxMT1dFRF9NSU1FX1RZUEVTLmhhcyhmaWxlLnR5cGUpKSB7XHJcbiAgICAgIHRocm93IGNyZWF0ZUh0dHBFcnJvcig0MDAsIFwiVW5zdXBwb3J0ZWQgZmlsZSB0eXBlLiBQbGVhc2UgdXBsb2FkIFBERiwgSlBHLCBQTkcsIG9yIEhFSUMuXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZpbGUuc2l6ZSA+IE1BWF9GSUxFX1NJWkVfQllURVMpIHtcclxuICAgICAgdGhyb3cgY3JlYXRlSHR0cEVycm9yKFxyXG4gICAgICAgIDQxMyxcclxuICAgICAgICBgRmlsZSBleGNlZWRzIHRoZSBtYXhpbXVtIGFsbG93ZWQgc2l6ZSBvZiAke01hdGgucm91bmQoTUFYX0ZJTEVfU0laRV9CWVRFUyAvICgxMDI0ICogMTAyNCkpfSBNQi5gXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmlsZUlkID0gcmFuZG9tVVVJRCgpO1xyXG4gICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlLm5hbWUgfHwgYHVwbG9hZC0ke2ZpbGVJZH1gO1xyXG4gICAgY29uc3QgdGVtcFBhdGggPSBqb2luKFRFTVBfRElSLCBgJHtmaWxlSWR9LSR7ZmlsZU5hbWV9YCk7XHJcbiAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpO1xyXG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKHRlbXBQYXRoLCBidWZmZXIpO1xyXG5cclxuICAgIHNhdmVkRmlsZXMucHVzaCh7XHJcbiAgICAgIGZpbGVJZCxcclxuICAgICAgZmlsZU5hbWUsXHJcbiAgICAgIG1pbWVUeXBlOiBmaWxlLnR5cGUsXHJcbiAgICAgIHBhdGg6IHRlbXBQYXRoLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBvY3JQYWdlcyA9IGF3YWl0IHJ1bk9jck9uRmlsZXMoc2F2ZWRGaWxlcyk7XHJcbiAgY29uc3QgZmlsZXNNZXRhID0gc3VtbWFyaXplRmlsZXMoc2F2ZWRGaWxlcywgb2NyUGFnZXMpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgYmF0Y2hJZDogcmFuZG9tVVVJRCgpLFxyXG4gICAgb2NyUGFnZXMsXHJcbiAgICBmaWxlc01ldGEsXHJcbiAgfTtcclxufVxyXG5cclxudHlwZSBTYXZlZEZpbGUgPSB7XHJcbiAgZmlsZUlkOiBzdHJpbmc7XHJcbiAgZmlsZU5hbWU6IHN0cmluZztcclxuICBtaW1lVHlwZTogc3RyaW5nO1xyXG4gIHBhdGg6IHN0cmluZztcclxufTtcclxuXHJcbi8qKlxyXG4gKiBydW5PY3JPbkZpbGVzXHJcbiAqIC0tLS0tLS0tLS0tLS0tXHJcbiAqIFJ1bnMgVGVzc2VyYWN0IE9DUiBvbiBlYWNoIHBhZ2Ugb2YgdGhlIHVwbG9hZGVkIGZpbGVzIGFuZCByZXR1cm5zXHJcbiAqIE9jclBhZ2Ugb2JqZWN0cyB0aGF0IHJldGFpbiBwYWdlIG9yZGVyaW5nIGFuZCBtZXRhZGF0YS5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5PY3JPbkZpbGVzKGZpbGVzOiBTYXZlZEZpbGVbXSk6IFByb21pc2U8T2NyUGFnZVtdPiB7XHJcbiAgY29uc3QgcGFnZXM6IE9jclBhZ2VbXSA9IFtdO1xyXG5cclxuICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcclxuICAgIGlmIChmaWxlLm1pbWVUeXBlID09PSBcImFwcGxpY2F0aW9uL3BkZlwiKSB7XHJcbiAgICAgIGNvbnN0IHBkZlBhZ2VzID0gYXdhaXQgcnVuT2NyT25QZGYoZmlsZSk7XHJcbiAgICAgIHBhZ2VzLnB1c2goLi4ucGRmUGFnZXMpO1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcnVuVGVzc2VyYWN0KGF3YWl0IGZzLnJlYWRGaWxlKGZpbGUucGF0aCkpO1xyXG4gICAgcGFnZXMucHVzaCh7XHJcbiAgICAgIGZpbGVJZDogZmlsZS5maWxlSWQsXHJcbiAgICAgIGZpbGVOYW1lOiBmaWxlLmZpbGVOYW1lLFxyXG4gICAgICBwYWdlTnVtYmVyOiAxLFxyXG4gICAgICByYXdUZXh0OiBjbGVhblRleHQodGV4dCksXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBwYWdlcztcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcnVuT2NyT25QZGYoZmlsZTogU2F2ZWRGaWxlKTogUHJvbWlzZTxPY3JQYWdlW10+IHtcclxuICBjb25zdCBidWZmZXIgPSBhd2FpdCBmcy5yZWFkRmlsZShmaWxlLnBhdGgpO1xyXG4gIGNvbnN0IHBhZ2VUZXh0czogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgIHBhZ2VyZW5kZXI6IGFzeW5jIChwYWdlRGF0YTogYW55KSA9PiB7XHJcbiAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gYXdhaXQgcGFnZURhdGEuZ2V0VGV4dENvbnRlbnQoKTtcclxuICAgICAgY29uc3QgdGV4dEl0ZW1zID0gdGV4dENvbnRlbnQuaXRlbXNcclxuICAgICAgICAubWFwKChpdGVtOiB7IHN0cj86IHN0cmluZyB9KSA9PiBpdGVtPy5zdHIgPz8gXCJcIilcclxuICAgICAgICAuam9pbihcIiBcIik7XHJcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhblRleHQodGV4dEl0ZW1zKTtcclxuICAgICAgcGFnZVRleHRzLnB1c2goY2xlYW5lZCk7XHJcbiAgICAgIHJldHVybiBjbGVhbmVkO1xyXG4gICAgfSxcclxuICB9O1xyXG5cclxuICBjb25zdCBwYXJzZWQgPSBhd2FpdCBwZGZQYXJzZShidWZmZXIsIG9wdGlvbnMgYXMgYW55KTtcclxuXHJcbiAgaWYgKCFwYWdlVGV4dHMubGVuZ3RoICYmIHBhcnNlZC50ZXh0KSB7XHJcbiAgICBwYXJzZWQudGV4dFxyXG4gICAgICAuc3BsaXQoL1xcbnsyLH0vKVxyXG4gICAgICAubWFwKChjaHVuaykgPT4gY2xlYW5UZXh0KGNodW5rKSlcclxuICAgICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAuZm9yRWFjaCgoY2h1bmspID0+IHBhZ2VUZXh0cy5wdXNoKGNodW5rKSk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXBhZ2VUZXh0cy5sZW5ndGgpIHtcclxuICAgIHBhZ2VUZXh0cy5wdXNoKFwiXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHBhZ2VUZXh0cy5tYXAoKHJhd1RleHQsIGluZGV4KSA9PiAoe1xyXG4gICAgZmlsZUlkOiBmaWxlLmZpbGVJZCxcclxuICAgIGZpbGVOYW1lOiBmaWxlLmZpbGVOYW1lLFxyXG4gICAgcGFnZU51bWJlcjogaW5kZXggKyAxLFxyXG4gICAgcmF3VGV4dCxcclxuICB9KSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJ1blRlc3NlcmFjdChidWZmZXI6IEJ1ZmZlcik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVGVzc2VyYWN0LnJlY29nbml6ZShidWZmZXIsIFwiZW5nXCIsIHtcclxuICAgIHRlc3Nqc19jcmVhdGVfcGRmOiBcIjBcIixcclxuICB9KTtcclxuICByZXR1cm4gcmVzdWx0LmRhdGEudGV4dCB8fCBcIlwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhblRleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS5yZXBsYWNlKC9bXlxceDIwLVxceDdFXSsvZywgXCIgXCIpLnRyaW0oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5zdXJlVGVtcERpcmVjdG9yeSgpIHtcclxuICBta2RpclN5bmMoVEVNUF9ESVIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRyYWN0RmlsZXNGcm9tRm9ybURhdGEoZm9ybURhdGE6IEZvcm1EYXRhKTogRmlsZVtdIHtcclxuICBjb25zdCBmaWxlczogRmlsZVtdID0gW107XHJcbiAgY29uc3QgcHJpbWFyeSA9IGZvcm1EYXRhLmdldChcImZpbGVcIik7XHJcbiAgaWYgKHByaW1hcnkgaW5zdGFuY2VvZiBGaWxlKSB7XHJcbiAgICBmaWxlcy5wdXNoKHByaW1hcnkpO1xyXG4gIH1cclxuICBjb25zdCBtdWx0aXBsZXMgPSBmb3JtRGF0YS5nZXRBbGwoXCJmaWxlc1tdXCIpO1xyXG4gIGZvciAoY29uc3QgZW50cnkgb2YgbXVsdGlwbGVzKSB7XHJcbiAgICBpZiAoZW50cnkgaW5zdGFuY2VvZiBGaWxlKSB7XHJcbiAgICAgIGZpbGVzLnB1c2goZW50cnkpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gZmlsZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1bW1hcml6ZUZpbGVzKGZpbGVzOiBTYXZlZEZpbGVbXSwgcGFnZXM6IE9jclBhZ2VbXSkge1xyXG4gIHJldHVybiBmaWxlcy5tYXAoKGZpbGUpID0+ICh7XHJcbiAgICBmaWxlX2lkOiBmaWxlLmZpbGVJZCxcclxuICAgIG9yaWdpbmFsX25hbWU6IGZpbGUuZmlsZU5hbWUsXHJcbiAgICBwYWdlX2NvdW50OiBwYWdlcy5maWx0ZXIoKHBhZ2UpID0+IHBhZ2UuZmlsZUlkID09PSBmaWxlLmZpbGVJZCkubGVuZ3RoLFxyXG4gIH0pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlSHR0cEVycm9yKHN0YXR1czogbnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcpIHtcclxuICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKSBhcyBFcnJvciAmIHsgc3RhdHVzPzogbnVtYmVyIH07XHJcbiAgZXJyb3Iuc3RhdHVzID0gc3RhdHVzO1xyXG4gIHJldHVybiBlcnJvcjtcclxufVxyXG5cclxuIl0sIm5hbWVzIjpbInByb21pc2VzIiwiZnMiLCJta2RpclN5bmMiLCJqb2luIiwicmFuZG9tVVVJRCIsIlRlc3NlcmFjdCIsInBkZlBhcnNlIiwiVEVNUF9ESVIiLCJwcm9jZXNzIiwiY3dkIiwiTUFYX0ZJTEVfU0laRV9CWVRFUyIsIk51bWJlciIsImVudiIsIk9DUl9NQVhfRklMRV9NQiIsIkFMTE9XRURfTUlNRV9UWVBFUyIsIlNldCIsImhhbmRsZVVwbG9hZEFuZEV4dHJhY3RPY3IiLCJyZXEiLCJlbnN1cmVUZW1wRGlyZWN0b3J5IiwiZm9ybURhdGEiLCJpbmNvbWluZ0ZpbGVzIiwiZXh0cmFjdEZpbGVzRnJvbUZvcm1EYXRhIiwibGVuZ3RoIiwiY3JlYXRlSHR0cEVycm9yIiwic2F2ZWRGaWxlcyIsImZpbGUiLCJoYXMiLCJ0eXBlIiwic2l6ZSIsIk1hdGgiLCJyb3VuZCIsImZpbGVJZCIsImZpbGVOYW1lIiwibmFtZSIsInRlbXBQYXRoIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImFycmF5QnVmZmVyIiwid3JpdGVGaWxlIiwicHVzaCIsIm1pbWVUeXBlIiwicGF0aCIsIm9jclBhZ2VzIiwicnVuT2NyT25GaWxlcyIsImZpbGVzTWV0YSIsInN1bW1hcml6ZUZpbGVzIiwiYmF0Y2hJZCIsImZpbGVzIiwicGFnZXMiLCJwZGZQYWdlcyIsInJ1bk9jck9uUGRmIiwidGV4dCIsInJ1blRlc3NlcmFjdCIsInJlYWRGaWxlIiwicGFnZU51bWJlciIsInJhd1RleHQiLCJjbGVhblRleHQiLCJwYWdlVGV4dHMiLCJvcHRpb25zIiwicGFnZXJlbmRlciIsInBhZ2VEYXRhIiwidGV4dENvbnRlbnQiLCJnZXRUZXh0Q29udGVudCIsInRleHRJdGVtcyIsIml0ZW1zIiwibWFwIiwiaXRlbSIsInN0ciIsImNsZWFuZWQiLCJwYXJzZWQiLCJzcGxpdCIsImNodW5rIiwiZmlsdGVyIiwiQm9vbGVhbiIsImZvckVhY2giLCJpbmRleCIsInJlc3VsdCIsInJlY29nbml6ZSIsInRlc3Nqc19jcmVhdGVfcGRmIiwiZGF0YSIsInJlcGxhY2UiLCJ0cmltIiwicmVjdXJzaXZlIiwicHJpbWFyeSIsImdldCIsIkZpbGUiLCJtdWx0aXBsZXMiLCJnZXRBbGwiLCJlbnRyeSIsImZpbGVfaWQiLCJvcmlnaW5hbF9uYW1lIiwicGFnZV9jb3VudCIsInBhZ2UiLCJzdGF0dXMiLCJtZXNzYWdlIiwiZXJyb3IiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ocr.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@aws-sdk","vendor-chunks/@smithy","vendor-chunks/pdf-parse","vendor-chunks/next","vendor-chunks/tesseract.js","vendor-chunks/@aws-crypto","vendor-chunks/whatwg-url","vendor-chunks/tr46","vendor-chunks/tslib","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/regenerator-runtime","vendor-chunks/is-url","vendor-chunks/is-electron","vendor-chunks/@aws"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Focr-menus%2Froute&page=%2Fapi%2Focr-menus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Focr-menus%2Froute.ts&appDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CUser%5CDocuments%5Cside%20quest%5CLeMedica&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();